import{a as q}from"./chunk-Y343E7P7.js";import{a as J}from"./chunk-D2BC6RJP.js";import{a as $}from"./chunk-KOQOYHGF.js";import{g as N}from"./chunk-XSF5E5F2.js";import{a as Y}from"./chunk-4ON7RQLI.js";import{$b as F,Ab as f,Bb as m,Ec as B,Fc as R,Hc as W,Jb as T,Kb as s,Lb as H,Mb as x,Oa as y,Qc as L,Ra as I,Ta as p,Ub as U,Xb as z,Za as d,_b as V,ba as _,ca as h,db as E,hb as u,j as S,n as M,ob as g,t as O,tb as i,ub as o,uc as j,va as k,vb as l,vc as A,wb as b,wc as D,xb as C,y as P,zb as w}from"./chunk-HPFW3AUF.js";import"./chunk-EQDQRRRY.js";var K=()=>[0,1,2,3,4];function Q(a,e){if(a&1&&(i(0,"li"),l(1,"i",45),o()),a&2){let t=e.index,n=m().$implicit,r=m();p(),g("ngClass",r.starClass(t,n.score))}}function X(a,e){if(a&1&&(b(0),s(1),C()),a&2){let t=m().$implicit;p(),x(" ",t.context," ")}}function Z(a,e){if(a&1){let t=w();s(0),z(1,"slice"),i(2,"span",46),f("mouseenter",function(){_(t);let r=m().index,c=m();return h(c.hoverMap[r]=!0)})("mouseleave",function(){_(t);let r=m().index,c=m();return h(c.hoverMap[r]=!1)}),s(3,"\u2026"),o()}if(a&2){let t=m().$implicit;x(" ",V(1,1,t.context,0,30)," ")}}function ee(a,e){if(a&1&&(i(0,"div",47),s(1),o()),a&2){let t=m().$implicit;p(),x(" ",t.context," ")}}function te(a,e){if(a&1){let t=w();b(0),i(1,"div",33)(2,"div",34)(3,"div",35)(4,"div",36)(5,"img",37),f("error",function(r){_(t);let c=m();return h(c.setDefaultAvatar(r))}),o()(),i(6,"h5",38),s(7),o(),i(8,"ul",39),u(9,Q,2,1,"li",24),o(),i(10,"div",40)(11,"p",41),l(12,"i",42),u(13,X,2,1,"ng-container",43)(14,Z,4,5,"ng-template",null,0,F),o(),u(16,ee,2,1,"div",44),o()()()(),C()}if(a&2){let t=e.$implicit,n=e.index,r=T(15),c=m();p(5),g("src",t.avatar,y)("alt",t.name),p(2),H(t.name),p(2),g("ngForOf",U(7,K)),p(4),g("ngIf",t.context.length<=30)("ngIfElse",r),p(3),g("ngIf",c.hoverMap[n])}}var G=class a{constructor(e,t,n,r,c,v){this.usersSvc=e;this.userProfileService=t;this.auth=n;this.router=r;this.imageUrlService=c;this.isBrowser=W(v)}testimonials=[];startIndex=0;itemsToShow=3;hoverMap={};isBrowser;ngOnInit(){this.onResize(),this.usersSvc.getTestimonials().subscribe({next:e=>this.loadWithAvatars(e),error:e=>{console.error("Failed to load testimonials:",e),this.testimonials=[]}})}loadWithAvatars(e){let t=e.map(n=>this.userProfileService.searchUsers(n.name).pipe(M(r=>{let c=r.find(v=>v.name.toLowerCase()===n.name.toLowerCase());return this.toView(n,c?.avatar)}),P(r=>(console.error(`Error enriching ${n.name}:`,r),S(this.toView(n,n.avatar))))));O(t).subscribe({next:n=>this.testimonials=n,error:n=>{console.error("Error during forkJoin:",n),this.testimonials=e.map(r=>this.toView(r,r.avatar))}})}toView(e,t){let n=typeof e.reviewScore=="number"&&!isNaN(e.reviewScore)?e.reviewScore:0,r=Math.max(0,Math.min(5,n));return{avatar:this.getFullImageUrl(t)||"/assets/images/avatar.png",name:e.name,score:r,context:e.reviewContext}}getFullImageUrl(e){return this.imageUrlService.getFullImageUrl(e)}onStartShopping(){this.router.navigate([this.auth.isLoggedIn()?"/dashboard":"/signup"])}onResize(){this.isBrowser&&(this.itemsToShow=window.innerWidth<=768?1:3)}get visibleTestimonials(){let e=this.testimonials.length;return e===0?[]:Array.from({length:this.itemsToShow},(t,n)=>this.testimonials[(this.startIndex+n)%e])}prev(){let e=this.testimonials.length;this.startIndex=(this.startIndex-this.itemsToShow+e)%e}next(){let e=this.testimonials.length;this.startIndex=(this.startIndex+this.itemsToShow)%e}starClass(e,t){let n=Math.floor(t),r=t-n>=.5;return e<n?"fas fa-star":e===n&&r?"fas fa-star-half-alt":"far fa-star"}setDefaultAvatar(e){e.target.src="/assets/images/avatar.png"}static \u0275fac=function(t){return new(t||a)(d(Y),d(J),d($),d(N),d(q),d(k))};static \u0275cmp=E({type:a,selectors:[["app-home"]],hostBindings:function(t,n){t&1&&f("resize",function(){return n.onResize()},!1,I)},decls:60,vars:1,consts:[["truncated",""],[1,"hero","d-flex","align-items-center","justify-content-center","text-center"],[1,"container"],[1,"row"],[1,"col-md-6","text-center"],[1,"hero-title"],[1,"hero-subtitle","mt-3"],[1,"col-md-6","text-center","mt-4","mt-md-0"],["src","home1.png","alt","Shopping",1,"img-fluid","hero-image"],[1,"did-you-know","text-center","py-5"],[1,"info-box","mx-auto","p-4"],[1,"section-title"],[1,"section-text","mt-3"],[1,"btn","btn-primary","mt-4",3,"click"],[1,"testimonials-section","text-center","py-5",2,"background-color","#FCACC4"],[1,"container","py-5"],[1,"row","justify-content-center","mb-5"],[1,"col-md-10","col-xl-8","text-center"],[1,"fas","fa-heart","fa-2x","mb-3"],[1,"fw-bold","mb-2"],[1,"position-relative"],[1,"btn","btn-link","position-absolute","top-50","start-0","translate-middle-y",3,"click"],[1,"fas","fa-chevron-left","fa-2x"],[1,"row","text-center","mx-auto",2,"max-width","900px"],[4,"ngFor","ngForOf"],[1,"btn","btn-link","position-absolute","top-50","end-0","translate-middle-y",3,"click"],[1,"fas","fa-chevron-right","fa-2x"],["id","how-it-works",1,"how-it-works","py-5"],[1,"section-title","text-center","mb-4"],[1,"row","align-items-center"],[1,"col-md-6","text-md-start","text-center"],[1,"hiw-list","list-unstyled","mx-auto"],["src","home2.png","alt","How It Works",1,"img-fluid","hiw-image"],[1,"col-12","col-md-4"],[1,"card","testimonial-card","mb-4","d-flex","flex-column"],[1,"card-body","d-flex","flex-column"],[1,"d-flex","justify-content-center","mb-3"],["width","100","height","100",1,"rounded-circle","shadow-1-strong",3,"error","src","alt"],[1,"font-weight-bold","text-center","mb-1"],[1,"rating-stars","list-unstyled","d-flex","justify-content-center","mb-3"],[1,"review-wrapper","flex-grow-1"],[1,"testimonial-text","mb-0"],[1,"fas","fa-quote-left","pe-2"],[4,"ngIf","ngIfElse"],["class","full-text-container",4,"ngIf"],[3,"ngClass"],[1,"ellipsis",3,"mouseenter","mouseleave"],[1,"full-text-container"]],template:function(t,n){t&1&&(i(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h1",5),s(5,"Plan,"),l(6,"br"),s(7,"Track "),l(8,"br"),s(9," & Save"),o(),i(10,"p",6),s(11," Shop smarter, track "),l(12,"br"),s(13," your spending, find the "),l(14,"br"),s(15," best prices \u2014 all in one app. "),o()(),i(16,"div",7),l(17,"img",8),o()()()(),i(18,"section",9)(19,"div",2)(20,"div",10)(21,"h2",11),s(22,"Did you know?"),o(),i(23,"p",12),s(24," Using a smart shopping list helps reduce impulse purchases and unnecessary spending. With real-time price comparisons and budget tracking, users can make informed decisions, saving both time and money. "),o()(),i(25,"button",13),f("click",function(){return n.onStartShopping()}),s(26,` Start Shopping!
`),o()()(),i(27,"section",14)(28,"div",15)(29,"div",16)(30,"div",17),l(31,"i",18),i(32,"h3",19),s(33,"What our users have to say"),o()()(),i(34,"div",20)(35,"button",21),f("click",function(){return n.prev()}),l(36,"i",22),o(),i(37,"div",23),u(38,te,17,8,"ng-container",24),o(),i(39,"button",25),f("click",function(){return n.next()}),l(40,"i",26),o()()()(),i(41,"section",27)(42,"div",2)(43,"h2",28),s(44,"How it Works?"),o(),i(45,"div",29)(46,"div",30)(47,"ul",31)(48,"li"),s(49,"Create an Account"),o(),i(50,"li"),s(51,"Build Your Shopping List"),o(),i(52,"li"),s(53,"Compare & Save"),o(),i(54,"li"),s(55,"Track Expenses"),o(),i(56,"li"),s(57,"Earn Rewards"),o()()(),i(58,"div",7),l(59,"img",32),o()()()()),t&2&&(p(38),g("ngForOf",n.visibleTestimonials))},dependencies:[R,j,A,D,B,L],styles:[".position-relative[_ngcontent-%COMP%]{overflow:visible!important}.hero[_ngcontent-%COMP%]{background-color:#0b3b5b;padding:0}.hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%], .hero[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{color:#fff}.hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;line-height:1.2}.hero[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1.1rem}.did-you-know[_ngcontent-%COMP%]{background-color:#fff}.did-you-know[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{background-color:#0b3b5b;border-radius:12px;max-width:700px;color:#fff}.did-you-know[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#fcacc4;border:none;color:#083b5b;padding:.75rem 1.5rem;font-size:1.1rem;border-radius:30px}.testimonials-section[_ngcontent-%COMP%]{background:#f3f2f2;color:#0b3b5b}.testimonials-section[_ngcontent-%COMP%]   .position-relative[_ngcontent-%COMP%]{overflow:visible!important}.testimonials-section[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#083b5b;z-index:20;font-size:1.5rem}@media (max-width: 767.98px){.testimonials-section[_ngcontent-%COMP%]   .position-relative[_ngcontent-%COMP%] > .btn-link.start-0[_ngcontent-%COMP%]{left:.5rem}}.testimonials-section[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 2px 6px #0000001a;display:flex;flex-direction:column;height:350px}.testimonials-section[_ngcontent-%COMP%]   .review-wrapper[_ngcontent-%COMP%]{position:relative}.testimonials-section[_ngcontent-%COMP%]   .testimonial-text[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.testimonials-section[_ngcontent-%COMP%]   .ellipsis[_ngcontent-%COMP%]{cursor:pointer;font-weight:700}.testimonials-section[_ngcontent-%COMP%]   .full-text-container[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:100%;margin-top:.5rem;background:#fff;padding:.75rem;border-radius:6px;box-shadow:0 2px 8px #00000026;white-space:normal;word-break:break-word;z-index:10}.testimonials-section[_ngcontent-%COMP%]   .rating-stars[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ffc107;font-size:1.2rem;margin:0 4px}.how-it-works[_ngcontent-%COMP%]{background-color:#fff}.how-it-works[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:#0b3b5b;font-size:2.5rem;font-weight:700}.how-it-works[_ngcontent-%COMP%]   .hiw-list[_ngcontent-%COMP%]{font-size:1.8rem;text-align:center}.how-it-works[_ngcontent-%COMP%]   .hiw-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:1.8rem;padding-left:48px}.how-it-works[_ngcontent-%COMP%]   .hiw-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{font-size:1.8rem}.how-it-works[_ngcontent-%COMP%]   .hiw-image[_ngcontent-%COMP%]{width:60%;border-radius:8px}"]})};export{G as HomeComponent};
