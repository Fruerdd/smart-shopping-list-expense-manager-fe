import{a as dr}from"./chunk-IYNE3RVJ.js";import{g as ar}from"./chunk-XFZYCNZE.js";import{a as hr}from"./chunk-D3X57ITO.js";import{q as lr,r as cr}from"./chunk-QUJHE6QH.js";import{a as zi}from"./chunk-KPVCULSL.js";import{a as Vi}from"./chunk-MM22J7PI.js";import{a as Uo,b as Wo,d as Di,e as jo,f as $o,g as Gt,h as qo,i as Ko,j as Yo,k as Qo,l as Ii}from"./chunk-Y6UGLKWX.js";import{a as ur}from"./chunk-KBRR4CDA.js";import{a as Xo,b as Ri,c as ts,d as Li,e as Go,g as Ni,h as Zo,j as Jo,k as tr,n as er,o as ir,p as nr,q as sr,u as or,v as Fi,w as rr}from"./chunk-JYF56DXZ.js";import{Ab as V,Bb as A,Fc as Qt,Gb as Xn,Hb as Gn,Hc as Xt,Ib as Zn,Kb as M,Lb as kt,M as Ei,Mb as Jn,Nc as zo,Oa as Do,Oc as Bo,P as $,Pa as Io,Pc as Ho,Qb as We,R as Te,Ra as Ro,Rb as je,Rc as qe,Sa as Lo,Sb as $e,Ta as P,Vb as ut,W as Kt,X as le,Xa as No,Za as Dt,ba as N,ca as F,db as It,hb as Z,j as ko,ka as Yn,la as Ao,n as Eo,nc as Fo,ob as T,qb as Ue,rb as Ai,tb as x,u as Mi,ub as y,uc as Vo,va as Ti,vb as W,vc as Oi,w as ki,wa as Qn,wb as ce,wc as Yt,xb as he,y as To,za as Oo,zb as j}from"./chunk-VE4VNBXX.js";import{a as Ot,b as Ee,c as Kn}from"./chunk-EQDQRRRY.js";function Hl(n,e){if(n&1){let t=j();x(0,"button",12),V("click",function(){N(t);let s=A(2);return F(s.markAllAsRead())}),W(1,"i",13),M(2," Mark all as read "),y()}}function Ul(n,e){n&1&&(x(0,"div",14),W(1,"i",15),M(2," Loading notifications... "),y())}function Wl(n,e){n&1&&(x(0,"div",16),W(1,"i",17),x(2,"p"),M(3,"No notifications yet"),y()())}function jl(n,e){if(n&1){let t=j();x(0,"div",32)(1,"img",33),V("error",function(s){N(t);let o=A(4);return F(o.setDefaultImage(s))}),y(),x(2,"span",34),M(3),y()()}if(n&2){let t=A().$implicit,i=A(3);P(),T("src",i.getFullImageUrl(t.sourceUserAvatar)||"/assets/images/avatar.png",Do),P(2),kt(t.sourceUserName)}}function $l(n,e){if(n&1){let t=j();x(0,"div",35)(1,"button",36),V("click",function(){N(t);let s=A().$implicit,o=A(3);return F(o.acceptFriendRequest(s))}),W(2,"i",37),M(3," Accept "),y(),x(4,"button",38),V("click",function(){N(t);let s=A().$implicit,o=A(3);return F(o.declineFriendRequest(s))}),W(5,"i",7),M(6," Decline "),y()()}}function ql(n,e){if(n&1){let t=j();x(0,"div",39)(1,"button",40),V("click",function(){N(t);let s=A().$implicit,o=A(3);return F(o.markAsRead(s))}),W(2,"i",37),M(3," Mark as read "),y()()}}function Kl(n,e){n&1&&(x(0,"div",41),W(1,"i",42),M(2," Read "),y())}function Yl(n,e){if(n&1&&(x(0,"div",20)(1,"div",21),W(2,"i"),y(),x(3,"div",22)(4,"div",23)(5,"span",24),M(6),y(),x(7,"span",25),M(8),y()(),x(9,"p",26),M(10),y(),Z(11,jl,4,2,"div",27),y(),x(12,"div",28),Z(13,$l,7,0,"div",29)(14,ql,4,0,"div",30)(15,Kl,3,0,"div",31),y()()),n&2){let t=e.$implicit,i=A(3);Ue("unread",!t.isRead),P(2),Ai(i.getNotificationIcon(t.notificationType)),Ue("unread-icon",!t.isRead),P(4),kt(t.title),P(2),kt(i.getTimeAgo(t.createdAt)),P(2),kt(t.message),P(),T("ngIf",t.notificationType==="FRIEND_REQUEST"),P(2),T("ngIf",t.notificationType==="FRIEND_REQUEST"&&!t.isRead),P(),T("ngIf",t.notificationType!=="FRIEND_REQUEST"&&!t.isRead),P(),T("ngIf",t.isRead)}}function Ql(n,e){if(n&1&&(x(0,"div",18),Z(1,Yl,16,13,"div",19),y()),n&2){let t=A(2);P(),T("ngForOf",t.notifications)}}function Xl(n,e){if(n&1){let t=j();x(0,"div",2)(1,"div",3)(2,"h3"),M(3,"Notifications"),y(),x(4,"div",4),Z(5,Hl,3,0,"button",5),x(6,"button",6),V("click",function(){N(t);let s=A();return F(s.closePopup())}),W(7,"i",7),y()()(),x(8,"div",8),Z(9,Ul,3,0,"div",9)(10,Wl,4,0,"div",10)(11,Ql,2,1,"div",11),y()()}if(n&2){let t=A();P(5),T("ngIf",t.hasUnreadNonFriendRequestNotifications()),P(4),T("ngIf",t.loading),P(),T("ngIf",!t.loading&&t.notifications.length===0),P(),T("ngIf",!t.loading&&t.notifications.length>0)}}function Gl(n,e){if(n&1){let t=j();x(0,"div",43),V("click",function(){N(t);let s=A();return F(s.closePopup())}),y()}}var Bi=class n{constructor(e,t){this.userProfileService=e;this.imageUrlService=t}currentUserId=null;isVisible=!1;closeNotifications=new Yn;notificationCountChanged=new Yn;notifications=[];unreadCount=0;loading=!1;pollingSubscription;ngOnInit(){this.currentUserId&&(this.loadNotifications(),this.loadUnreadCount(),this.startPolling())}ngOnDestroy(){this.pollingSubscription&&this.pollingSubscription.unsubscribe()}startPolling(){this.currentUserId&&(this.pollingSubscription=Mi(3e4).pipe(Ei(()=>this.userProfileService.getUnreadNotificationCount(this.currentUserId))).subscribe({next:e=>{let t=this.unreadCount;this.unreadCount=e,this.notificationCountChanged.emit(e),e!==t&&this.loadNotifications()},error:e=>{console.error("Error polling notification count:",e)}}))}loadNotifications(){this.currentUserId&&(this.loading=!0,this.userProfileService.getUserNotifications(this.currentUserId).subscribe({next:e=>{let t=new Date;t.setDate(t.getDate()-3),this.notifications=e.filter(i=>new Date(i.createdAt)>=t),this.loading=!1},error:e=>{console.error("Error loading notifications:",e),this.notifications=[],this.loading=!1}}))}loadUnreadCount(){this.currentUserId&&this.userProfileService.getUnreadNotificationCount(this.currentUserId).subscribe({next:e=>{this.unreadCount=e,this.notificationCountChanged.emit(e)},error:e=>console.error("Error loading unread count:",e)})}acceptFriendRequest(e){this.currentUserId&&this.userProfileService.acceptFriendRequest(this.currentUserId,e.sourceUserId).subscribe({next:t=>{console.log("Friend request accepted:",t),this.markAsRead(e),this.loadNotifications(),this.loadUnreadCount()},error:t=>{console.error("Error accepting friend request:",t),alert("Failed to accept friend request")}})}declineFriendRequest(e){this.currentUserId&&this.userProfileService.declineFriendRequest(this.currentUserId,e.sourceUserId).subscribe({next:t=>{console.log("Friend request declined:",t),this.markAsRead(e),this.loadNotifications(),this.loadUnreadCount()},error:t=>{console.error("Error declining friend request:",t),alert("Failed to decline friend request")}})}markAsRead(e){this.userProfileService.markNotificationAsRead(e.id).subscribe({next:()=>{e.isRead=!0,this.loadUnreadCount()},error:t=>{console.error("Error marking notification as read:",t)}})}markAllAsRead(){if(!this.currentUserId)return;let e=this.notifications.filter(t=>!t.isRead&&t.notificationType!=="FRIEND_REQUEST");e.length!==0&&this.userProfileService.markAllNotificationsAsRead(this.currentUserId).subscribe({next:t=>{this.notifications.forEach(i=>{i.notificationType!=="FRIEND_REQUEST"&&(i.isRead=!0)}),this.loadUnreadCount()},error:t=>{console.error("Backend mark-all-as-read failed, using individual marking:",t),this.markNotificationsIndividually(e)}})}markNotificationsIndividually(e){let t=0,i=e.length;e.forEach(s=>{this.userProfileService.markNotificationAsRead(s.id).subscribe({next:()=>{s.isRead=!0,t++,t===i&&this.loadUnreadCount()},error:o=>{console.error(`Error marking notification ${s.id} as read:`,o),t++,t===i&&this.loadUnreadCount()}})})}closePopup(){this.closeNotifications.emit()}getNotificationIcon(e){switch(e){case"FRIEND_REQUEST":return"fas fa-user-plus";case"COLLABORATOR_ADDED":return"fas fa-list";case"REFERRAL_REWARD":return"fas fa-gift";case"SYSTEM_MESSAGE":return"fas fa-info-circle";default:return"fas fa-bell"}}getTimeAgo(e){let t=new Date,i=new Date(e),s=t.getTime()-i.getTime(),o=Math.floor(s/(1e3*60)),r=Math.floor(s/(1e3*60*60)),a=Math.floor(s/(1e3*60*60*24));return o<1?"Just now":o<60?`${o}m ago`:r<24?`${r}h ago`:`${a}d ago`}hasUnreadNotifications(){return this.notifications.some(e=>!e.isRead)}hasUnreadNonFriendRequestNotifications(){return this.notifications.some(e=>!e.isRead&&e.notificationType!=="FRIEND_REQUEST")}getFullImageUrl(e){return this.imageUrlService.getFullImageUrl(e)}setDefaultImage(e){let t=e.target;t.src="/assets/images/avatar.png"}static \u0275fac=function(t){return new(t||n)(Dt(zi),Dt(hr))};static \u0275cmp=It({type:n,selectors:[["app-notifications"]],inputs:{currentUserId:"currentUserId",isVisible:"isVisible"},outputs:{closeNotifications:"closeNotifications",notificationCountChanged:"notificationCountChanged"},decls:2,vars:2,consts:[["class","notifications-popup",4,"ngIf"],["class","notifications-backdrop",3,"click",4,"ngIf"],[1,"notifications-popup"],[1,"notifications-header"],[1,"header-actions"],["class","mark-all-read-btn",3,"click",4,"ngIf"],[1,"close-btn",3,"click"],[1,"fas","fa-times"],[1,"notifications-content"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","notifications-list",4,"ngIf"],[1,"mark-all-read-btn",3,"click"],[1,"fas","fa-check-double"],[1,"loading-state"],[1,"fas","fa-spinner","fa-spin"],[1,"empty-state"],[1,"fas","fa-bell-slash"],[1,"notifications-list"],["class","notification-item",3,"unread",4,"ngFor","ngForOf"],[1,"notification-item"],[1,"notification-icon"],[1,"notification-content"],[1,"notification-header"],[1,"notification-title"],[1,"notification-time"],[1,"notification-message"],["class","source-user-info",4,"ngIf"],[1,"notification-actions"],["class","friend-request-actions",4,"ngIf"],["class","general-actions",4,"ngIf"],["class","read-indicator",4,"ngIf"],[1,"source-user-info"],["alt","User avatar",1,"source-avatar",3,"error","src"],[1,"source-name"],[1,"friend-request-actions"],[1,"accept-btn",3,"click"],[1,"fas","fa-check"],[1,"decline-btn",3,"click"],[1,"general-actions"],[1,"mark-read-btn",3,"click"],[1,"read-indicator"],[1,"fas","fa-check-circle"],[1,"notifications-backdrop",3,"click"]],template:function(t,i){t&1&&Z(0,Xl,12,4,"div",0)(1,Gl,1,0,"div",1),t&2&&(T("ngIf",i.isVisible),P(),T("ngIf",i.isVisible))},dependencies:[Qt,Oi,Yt],styles:[".notifications-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#0000004d;z-index:999}.notifications-popup[_ngcontent-%COMP%]{position:fixed;top:80px;right:20px;width:400px;max-height:600px;background:#fff;border-radius:12px;box-shadow:0 10px 40px #00000026;z-index:1000;animation:_ngcontent-%COMP%_slideInFromRight .3s ease-out}@media (max-width: 768px){.notifications-popup[_ngcontent-%COMP%]{top:70px;left:10px;right:10px;width:auto}}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.notifications-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #e5e7eb;background:linear-gradient(135deg,#083a5e,#0f4a74);color:#fff;border-radius:12px 12px 0 0}.notifications-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.notifications-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.notifications-header[_ngcontent-%COMP%]   .mark-all-read-btn[_ngcontent-%COMP%]{background:#fcacc433;color:#fff;border:1px solid rgba(252,172,196,.3);padding:6px 12px;border-radius:6px;font-size:12px;cursor:pointer;transition:all .2s ease}.notifications-header[_ngcontent-%COMP%]   .mark-all-read-btn[_ngcontent-%COMP%]:hover{background:#fcacc44d}.notifications-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:18px;cursor:pointer;padding:5px;border-radius:4px;transition:background-color .2s ease}.notifications-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background:#fcacc433}.notifications-content[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#6b7280}.loading-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;margin-bottom:10px;display:block}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.notifications-list[_ngcontent-%COMP%]{padding:0}.notification-item[_ngcontent-%COMP%]{display:flex;padding:16px 20px;border-bottom:1px solid #f3f4f6;transition:background-color .2s ease}.notification-item[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.notification-item.unread[_ngcontent-%COMP%]{background-color:#e8f2ff;border-left:4px solid #083a5e}.notification-item[_ngcontent-%COMP%]:last-child{border-bottom:none;border-radius:0 0 12px 12px}.notification-icon[_ngcontent-%COMP%]{margin-right:12px}.notification-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;background-color:#e5e7eb;color:#6b7280}.notification-icon[_ngcontent-%COMP%]   i.unread-icon[_ngcontent-%COMP%]{background-color:#083a5e;color:#fff}.notification-icon[_ngcontent-%COMP%]   i.fa-user-plus[_ngcontent-%COMP%]{background-color:#e8f2ff;color:#083a5e}.notification-icon[_ngcontent-%COMP%]   i.fa-user-plus.unread-icon[_ngcontent-%COMP%]{background-color:#083a5e;color:#fff}.notification-icon[_ngcontent-%COMP%]   i.fa-list[_ngcontent-%COMP%]{background-color:#e8f2ff;color:#083a5e}.notification-icon[_ngcontent-%COMP%]   i.fa-list.unread-icon[_ngcontent-%COMP%]{background-color:#083a5e;color:#fff}.notification-icon[_ngcontent-%COMP%]   i.fa-gift[_ngcontent-%COMP%]{background-color:#fef3c7;color:#d97706}.notification-icon[_ngcontent-%COMP%]   i.fa-gift.unread-icon[_ngcontent-%COMP%]{background-color:#d97706;color:#fff}.notification-icon[_ngcontent-%COMP%]   i.fa-info-circle[_ngcontent-%COMP%]{background-color:#e8f2ff;color:#083a5e}.notification-icon[_ngcontent-%COMP%]   i.fa-info-circle.unread-icon[_ngcontent-%COMP%]{background-color:#083a5e;color:#fff}.notification-content[_ngcontent-%COMP%]{flex:1}.notification-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px}.notification-content[_ngcontent-%COMP%]   .notification-title[_ngcontent-%COMP%]{font-weight:600;color:#111827;font-size:14px}.notification-content[_ngcontent-%COMP%]   .notification-time[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;white-space:nowrap;margin-left:8px}.notification-content[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%]{color:#374151;font-size:13px;line-height:1.4;margin:0 0 8px}.notification-content[_ngcontent-%COMP%]   .source-user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px}.notification-content[_ngcontent-%COMP%]   .source-user-info[_ngcontent-%COMP%]   .source-avatar[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;object-fit:cover}.notification-content[_ngcontent-%COMP%]   .source-user-info[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500}.notification-actions[_ngcontent-%COMP%]{margin-left:12px;display:flex;flex-direction:column;justify-content:center;gap:6px}.notification-actions[_ngcontent-%COMP%]   .friend-request-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.notification-actions[_ngcontent-%COMP%]   .friend-request-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:6px;font-size:11px;font-weight:500;cursor:pointer;transition:all .2s ease;min-width:70px}.notification-actions[_ngcontent-%COMP%]   .friend-request-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.notification-actions[_ngcontent-%COMP%]   .friend-request-actions[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#083a5e;color:#fff}.notification-actions[_ngcontent-%COMP%]   .friend-request-actions[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#0f4a74}.notification-actions[_ngcontent-%COMP%]   .friend-request-actions[_ngcontent-%COMP%]   .decline-btn[_ngcontent-%COMP%]{background-color:#dc2626;color:#fff}.notification-actions[_ngcontent-%COMP%]   .friend-request-actions[_ngcontent-%COMP%]   .decline-btn[_ngcontent-%COMP%]:hover{background-color:#b91c1c}.notification-actions[_ngcontent-%COMP%]   .general-actions[_ngcontent-%COMP%]   .mark-read-btn[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#083a5e;border:1px solid #083a5e;padding:6px 12px;border-radius:6px;font-size:11px;cursor:pointer;transition:all .2s ease}.notification-actions[_ngcontent-%COMP%]   .general-actions[_ngcontent-%COMP%]   .mark-read-btn[_ngcontent-%COMP%]:hover{background-color:#e8f2ff}.notification-actions[_ngcontent-%COMP%]   .general-actions[_ngcontent-%COMP%]   .mark-read-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.notification-actions[_ngcontent-%COMP%]   .read-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:11px;color:#083a5e;font-weight:500}.notification-actions[_ngcontent-%COMP%]   .read-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.notifications-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.notifications-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.notifications-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.notifications-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}"]})};var tc=["backgroundMusic"],ec=["musicPopupDiv"],wt=n=>({active:n}),is=n=>["/user-profile",n];function ic(n,e){n&1&&(x(0,"span"),M(1,"Admin Dashboard"),y())}function nc(n,e){n&1&&(x(0,"span"),M(1,"My Profile"),y())}function sc(n,e){n&1&&(x(0,"span"),M(1,"User Profile"),y())}function oc(n,e){n&1&&(x(0,"span"),M(1,"User Dashboard"),y())}function rc(n,e){n&1&&(x(0,"span"),M(1,"Shopping List"),y())}function ac(n,e){n&1&&(x(0,"span"),M(1,"Edit Profile"),y())}function lc(n,e){n&1&&(x(0,"span"),M(1,"GroceryMate"),y())}function cc(n,e){if(n&1){let t=j();x(0,"div",24),V("click",function(){N(t);let s=A();return F(s.openMenu())}),W(1,"i"),y()}if(n&2){let t=A();P(),Ai(t.menu_icon)}}function hc(n,e){if(n&1){let t=j();x(0,"div",25)(1,"button",26),V("click",function(){N(t);let s=A();return F(s.togglePlay())}),x(2,"mat-icon"),M(3),y()(),x(4,"input",27),$e("ngModelChange",function(s){N(t);let o=A();return je(o.volume,s)||(o.volume=s),F(s)}),y()()}if(n&2){let t=A();P(3),kt(t.isPlaying?"pause":"play_arrow"),P(),We("ngModel",t.volume)}}function dc(n,e){if(n&1){let t=j();x(0,"li",28),V("click",function(){N(t);let s=A();return F(s.activatePage("login"))}),M(1," Log In "),y()}if(n&2){let t=A();T("ngClass",ut(1,wt,t.activePage==="login"))}}function uc(n,e){if(n&1){let t=j();x(0,"li",29),V("click",function(){N(t);let s=A();return F(s.activatePage("sign-up"))}),M(1," Sign Up "),y()}if(n&2){let t=A();T("ngClass",ut(1,wt,t.activePage==="sign-up"))}}function fc(n,e){if(n&1){let t=j();x(0,"li",30),V("click",function(){N(t);let s=A();return F(s.activatePage("dashboard"))}),M(1," Dashboard "),y()}if(n&2){let t=A();T("ngClass",ut(1,wt,t.activePage==="dashboard"))}}function pc(n,e){if(n&1){let t=j();x(0,"li",31),V("click",function(){N(t);let s=A();return F(s.activatePage("user-profile"))}),M(1," My Profile "),y()}if(n&2){let t=A();T("routerLink",ut(2,is,t.loggedInUserId))("ngClass",ut(4,wt,t.activePage==="user-profile"))}}function gc(n,e){if(n&1){let t=j();x(0,"li",32),V("click",function(){N(t);let s=A();return F(s.scrollToSection("how-it-works"))}),M(1," How to Use "),y()}if(n&2){let t=A();T("ngClass",ut(1,wt,t.activePage==="how-it-works"))}}function mc(n,e){if(n&1){let t=j();x(0,"li",33),V("click",function(){N(t);let s=A();return F(s.activatePage("admin-page"))}),M(1," Admin Dashboard "),y()}if(n&2){let t=A();T("ngClass",ut(1,wt,t.activePage==="admin-page"))}}function _c(n,e){if(n&1){let t=j();x(0,"li",34),V("click",function(){N(t);let s=A();return F(s.activatePage("log-out"))}),M(1," Log Out "),y()}if(n&2){let t=A();T("ngClass",ut(1,wt,t.activePage==="log-out"))}}function bc(n,e){if(n&1){let t=j();x(0,"li")(1,"mat-icon",35),V("click",function(){N(t);let s=A();return F(s.toggleMusicPopup())}),M(2,"music_note"),y()()}}function yc(n,e){if(n&1){let t=j();x(0,"li",38)(1,"mat-icon",39),V("click",function(){N(t);let s=A(2);return F(s.toggleMusicPopup())}),M(2,"music_note"),y()()}}function xc(n,e){if(n&1){let t=j();ce(0),x(1,"li",36),V("click",function(){N(t);let s=A();return F(s.activatePage("home"))}),M(2,"Home"),y(),x(3,"li",32),V("click",function(){N(t);let s=A();return F(s.scrollToSection("shopping-list"))}),M(4,"Shopping List"),y(),x(5,"li",32),V("click",function(){N(t);let s=A();return F(s.scrollToSection("favorites-section"))}),M(6,"Favorites"),y(),x(7,"li",32),V("click",function(){N(t);let s=A();return F(s.scrollToSection("price-comparison"))}),M(8,"Price Comparison"),y(),Z(9,yc,3,0,"li",37),he()}if(n&2){let t=A();P(3),T("ngClass",ut(4,wt,t.activePage==="shopping-list")),P(2),T("ngClass",ut(6,wt,t.activePage==="favorites")),P(2),T("ngClass",ut(8,wt,t.activePage==="price-comparison")),P(2),T("ngIf",!t.isMobileView)}}function vc(n,e){if(n&1&&(x(0,"span",43),M(1),y()),n&2){let t=A(2);P(),kt(t.unreadNotificationCount)}}function Sc(n,e){if(n&1){let t=j();x(0,"li")(1,"mat-icon",35),V("click",function(){N(t);let s=A(2);return F(s.toggleMusicPopup())}),M(2,"music_note"),y()()}}function Cc(n,e){if(n&1){let t=j();ce(0),x(1,"li",36),V("click",function(){N(t);let s=A();return F(s.activatePage("home"))}),M(2,"Home"),y(),x(3,"li",32),V("click",function(){N(t);let s=A();return F(s.scrollToSection("analytics"))}),M(4,"Analytics"),y(),x(5,"li",40),V("click",function(){N(t);let s=A();return F(s.toggleNotifications())}),W(6,"i",41),Z(7,vc,2,1,"span",42),M(8," Notifications "),y(),Z(9,Sc,3,0,"li",9),he()}if(n&2){let t=A();P(3),T("ngClass",ut(3,wt,t.activePage==="analytics")),P(4),T("ngIf",t.unreadNotificationCount>0),P(2),T("ngIf",!t.isMobileView)}}function wc(n,e){if(n&1){let t=j();x(0,"li")(1,"mat-icon",35),V("click",function(){N(t);let s=A(2);return F(s.toggleMusicPopup())}),M(2,"music_note"),y()()}}function Pc(n,e){if(n&1){let t=j();ce(0),x(1,"li",36),V("click",function(){N(t);let s=A();return F(s.activatePage("home"))}),M(2,"Home"),y(),x(3,"li",44),V("click",function(){N(t);let s=A();return F(s.activatePage("user-profile"))}),M(4,"My Profile"),y(),x(5,"li",45),V("click",function(){N(t);let s=A();return F(s.activatePage("dashboard"))}),M(6,"Dashboard"),y(),Z(7,wc,3,0,"li",9),he()}if(n&2){let t=A();P(3),T("routerLink",ut(2,is,t.loggedInUserId)),P(4),T("ngIf",!t.isMobileView)}}function Mc(n,e){if(n&1){let t=j();x(0,"li")(1,"mat-icon",35),V("click",function(){N(t);let s=A(2);return F(s.toggleMusicPopup())}),M(2,"music_note"),y()()}}function kc(n,e){if(n&1){let t=j();ce(0),x(1,"li",36),V("click",function(){N(t);let s=A();return F(s.activatePage("home"))}),M(2,"Home"),y(),x(3,"li",44),V("click",function(){N(t);let s=A();return F(s.activatePage("user-profile"))}),M(4,"My Profile"),y(),Z(5,Mc,3,0,"li",9),he()}if(n&2){let t=A();P(3),T("routerLink",ut(2,is,t.loggedInUserId)),P(2),T("ngIf",!t.isMobileView)}}function Ec(n,e){if(n&1){let t=j();x(0,"li")(1,"mat-icon",35),V("click",function(){N(t);let s=A(2);return F(s.toggleMusicPopup())}),M(2,"music_note"),y()()}}function Tc(n,e){if(n&1){let t=j();ce(0),x(1,"li",36),V("click",function(){N(t);let s=A();return F(s.activatePage("home"))}),M(2,"Home"),y(),x(3,"li",34),V("click",function(){N(t);let s=A();return F(s.activatePage("log-out"))}),M(4,"Log Out"),y(),Z(5,Ec,3,0,"li",9),he()}if(n&2){let t=A();P(3),T("ngClass",ut(2,wt,t.activePage==="log-out")),P(2),T("ngIf",!t.isMobileView)}}function Ac(n,e){if(n&1){let t=j();x(0,"li")(1,"mat-icon",35),V("click",function(){N(t);let s=A(2);return F(s.toggleMusicPopup())}),M(2,"music_note"),y()()}}function Oc(n,e){if(n&1){let t=j();ce(0),x(1,"li",45),V("click",function(){N(t);let s=A();return F(s.activatePage("dashboard"))}),M(2,"Dashboard"),y(),Z(3,Ac,3,0,"li",9),he()}if(n&2){let t=A();P(3),T("ngIf",!t.isMobileView)}}function Dc(n,e){if(n&1){let t=j();x(0,"div",46,1)(2,"button",26),V("click",function(){N(t);let s=A();return F(s.togglePlay())}),x(3,"mat-icon"),M(4),y()(),x(5,"input",47),$e("ngModelChange",function(s){N(t);let o=A();return je(o.volume,s)||(o.volume=s),F(s)}),y()()}if(n&2){let t=A();P(4),kt(t.isPlaying?"pause":"play_arrow"),P(),We("ngModel",t.volume)}}var Ui=class n{constructor(e,t,i,s){this.platformId=e;this.router=t;this.authService=i;this.userProfileService=s}backgroundMusicRef;musicPopupDivRef;isPlaying=!1;volume=.5;isMusicPopupVisible=!1;activePage="";menuValue=!1;menu_icon="bx bx-menu";isMobileView=!1;isDashboardPage=!1;isShoppingListPage=!1;isMyProfilePage=!1;isOtherUserProfilePage=!1;isEditProfilePage=!1;isAdminPage=!1;isAdmin=!1;loggedInUserId=null;currentProfileUserId=null;userType=null;showNotifications=!1;unreadNotificationCount=0;notificationSubscription;get isLoggedIn(){return Xt(this.platformId)?this.authService.isLoggedIn():!1}ngOnInit(){this.checkViewport(),Xt(this.platformId)&&this.isLoggedIn&&(this.parseUserInfo(),this.loggedInUserId?this.initializeNotifications():this.getCurrentUserIdFromApi());let e=this.router.url;this.updateActivePageFromUrl(e),this.router.events.pipe(ki(t=>t instanceof Di)).subscribe(t=>{this.updateActivePageFromUrl(t.url)})}parseUserInfo(){try{let e=this.authService.getToken();if(e){let i=JSON.parse(atob(e.split(".")[1]));i&&(this.loggedInUserId=i.id||i.userId||null,this.userType=i.userType||null,this.isAdmin=this.userType==="ADMIN")}let t=localStorage.getItem("userInfo");if(t){let i=JSON.parse(t);this.loggedInUserId=i.id||this.loggedInUserId,this.userType=i.userType||this.userType,this.isAdmin=this.userType==="ADMIN"||this.isAdmin}this.loggedInUserId&&!this.isValidUUID(this.loggedInUserId)&&(this.loggedInUserId=null)}catch(e){console.error("Error parsing user information:",e)}}isValidUUID(e){return/^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$/i.test(e)}togglePlay(){this.isPlaying=!this.isPlaying,this.isPlaying?(this.playMusic(),this.backgroundMusicRef.nativeElement.muted=!0):this.pauseMusic()}playMusic(){this.backgroundMusicRef.nativeElement.muted=!1,this.backgroundMusicRef.nativeElement.play().then(()=>{this.backgroundMusicRef.nativeElement.muted=!1,this.backgroundMusicRef.nativeElement.volume=this.volume,this.isPlaying=!0}).catch(e=>{console.error("Autoplay prevented:",e),this.isPlaying=!1})}pauseMusic(){this.backgroundMusicRef.nativeElement.pause(),this.isPlaying=!1}toggleMusicPopup(){this.isMusicPopupVisible=!this.isMusicPopupVisible}updateActivePageFromUrl(e){let t=e.match(/^\/user-profile\/([^\/]+)/);t?(this.currentProfileUserId=t[1],this.isMyProfilePage=this.currentProfileUserId===this.loggedInUserId,this.isOtherUserProfilePage=this.currentProfileUserId!==this.loggedInUserId&&this.isValidUUID(this.currentProfileUserId)):(this.currentProfileUserId=null,this.isMyProfilePage=e==="/user-profile"||e==="/user-profile/",this.isOtherUserProfilePage=!1),this.isDashboardPage=e==="/dashboard",this.isAdminPage=e==="/admin-page",this.isShoppingListPage=e==="/dashboard/shopping-list"||e.startsWith("/dashboard/shopping-list/"),this.isEditProfilePage=e.startsWith("/user-profiles/edit"),e==="/"?this.activePage="home":e==="/dashboard"?this.activePage="dashboard":e.startsWith("/user-profile")?this.activePage="user-profile":e.startsWith("/user-profiles/edit")?this.activePage="user-edit":e==="/admin-page"?this.activePage="admin":e==="/login"?this.activePage="login":e==="/about"?this.activePage="about":e.startsWith("/dashboard/shopping-list")&&(this.activePage="shopping-list")}ngAfterViewInit(){Xt(this.platformId)&&this.checkViewport()}onResize(){Xt(this.platformId)&&this.checkViewport()}onDocumentClick(e){if(this.menuValue&&this.isMobileView){let t=e.target instanceof Element&&e.target.closest(".desktop_menu"),i=e.target instanceof Element&&e.target.closest(".menu-icon");!t&&!i&&this.closeMenu()}if(this.showNotifications&&e.target instanceof Element){let t=e.target.closest(".notifications-popup"),i=e.target.closest(".notifications-menu-item");!t&&!i&&this.closeNotifications()}}checkViewport(){Xt(this.platformId)&&(this.isMobileView=window.innerWidth<=900)}activatePage(e){if(this.activePage=e,e==="log-out"){this.logout();return}this.isMobileView&&this.closeMenu()}scrollToSection(e){let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})}scrollToTopAndActivateHome(){window.scrollTo({top:0,behavior:"smooth"}),this.activatePage("home")}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}openMenu(){this.menuValue=!0,this.menu_icon="bx bx-x"}closeMenu(){this.menuValue=!1,this.menu_icon="bx bx-menu"}logout(){this.authService.logout(),this.loggedInUserId=null,this.userType=null,this.isAdmin=!1,this.router.navigate(["/login"])}getCurrentUserIdFromApi(){this.userProfileService.getCurrentUserProfile().subscribe({next:e=>{this.loggedInUserId=e.id,this.initializeNotifications()},error:e=>{console.error("Error getting current user ID:",e)}})}ngOnDestroy(){this.notificationSubscription?.unsubscribe()}loadNotificationCount(){this.loggedInUserId&&this.userProfileService.getUnreadNotificationCount(this.loggedInUserId).subscribe({next:e=>{this.unreadNotificationCount=e},error:e=>{console.error("Error loading notification count:",e)}})}startNotificationPolling(){this.loggedInUserId&&(this.notificationSubscription=Mi(3e4).pipe(Ei(()=>this.userProfileService.getUnreadNotificationCount(this.loggedInUserId))).subscribe({next:e=>{this.unreadNotificationCount=e},error:e=>{console.error("Error polling notification count:",e)}}))}toggleNotifications(){this.showNotifications=!this.showNotifications}closeNotifications(){this.showNotifications=!1}onNotificationCountChanged(e){this.unreadNotificationCount=e}initializeNotifications(){this.loggedInUserId&&(this.loadNotificationCount(),this.startNotificationPolling())}static \u0275fac=function(t){return new(t||n)(Dt(Ti),Dt(Gt),Dt(Vi),Dt(zi))};static \u0275cmp=It({type:n,selectors:[["app-header"]],viewQuery:function(t,i){if(t&1&&(Xn(tc,5),Xn(ec,5)),t&2){let s;Gn(s=Zn())&&(i.backgroundMusicRef=s.first),Gn(s=Zn())&&(i.musicPopupDivRef=s.first)}},hostBindings:function(t,i){t&1&&V("resize",function(o){return i.onResize(o)},!1,Ro)("click",function(o){return i.onDocumentClick(o)},!1,Lo)},decls:38,vars:29,consts:[["backgroundMusic",""],["musicPopupDiv",""],["href",Io`https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css`,"rel","stylesheet"],[1,"container"],[1,"row"],[1,"col-auto"],[1,"logo-container","d-flex","align-items-center"],["src","app_logo.jpg","alt","logo",1,"logo-image",2,"cursor","pointer",3,"click"],[1,"company-name",2,"cursor","pointer",3,"click"],[4,"ngIf"],[1,"col","text-end"],["class","menu-icon",3,"click",4,"ngIf"],[1,"desktop_menu"],["src","/assets/music/background_tune.mp3","loop","","muted","",3,"volume"],["class","music-controls mobile-music-controls",4,"ngIf"],["routerLink","/login","routerLinkActive","active",3,"ngClass","click",4,"ngIf"],["routerLink","/signup","routerLinkActive","active",3,"ngClass","click",4,"ngIf"],["routerLink","/dashboard","routerLinkActive","active",3,"ngClass","click",4,"ngIf"],["routerLinkActive","active",3,"routerLink","ngClass","click",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["routerLink","/admin-page","routerLinkActive","active",3,"ngClass","click",4,"ngIf"],["class","log-out-button",3,"ngClass","click",4,"ngIf"],["class","music-controls music-popup",4,"ngIf"],[3,"closeNotifications","notificationCountChanged","currentUserId","isVisible"],[1,"menu-icon",3,"click"],[1,"music-controls","mobile-music-controls"],["mat-icon-button","",3,"click"],["type","range","id","volume-mobile","min","0","max","1","step","0.05",3,"ngModelChange","ngModel"],["routerLink","/login","routerLinkActive","active",3,"click","ngClass"],["routerLink","/signup","routerLinkActive","active",3,"click","ngClass"],["routerLink","/dashboard","routerLinkActive","active",3,"click","ngClass"],["routerLinkActive","active",3,"click","routerLink","ngClass"],[3,"click","ngClass"],["routerLink","/admin-page","routerLinkActive","active",3,"click","ngClass"],[1,"log-out-button",3,"click","ngClass"],[1,"music-icon-li",3,"click"],["routerLink","/home","routerLinkActive","active",3,"click"],["class","music-icon-li",4,"ngIf"],[1,"music-icon-li"],[3,"click"],[1,"notifications-menu-item",3,"click"],[1,"fas","fa-bell"],["class","notification-badge",4,"ngIf"],[1,"notification-badge"],["routerLinkActive","active",3,"click","routerLink"],["routerLink","/dashboard","routerLinkActive","active",3,"click"],[1,"music-controls","music-popup"],["type","range","id","volume","min","0","max","1","step","0.05",3,"ngModelChange","ngModel"]],template:function(t,i){if(t&1){let s=j();x(0,"header"),W(1,"link",2),x(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"img",7),V("click",function(){return N(s),F(i.scrollToTop())}),y(),x(7,"span",8),V("click",function(){return N(s),F(i.scrollToTop())}),Z(8,ic,2,0,"span",9)(9,nc,2,0,"span",9)(10,sc,2,0,"span",9)(11,oc,2,0,"span",9)(12,rc,2,0,"span",9)(13,ac,2,0,"span",9)(14,lc,2,0,"span",9),y()()(),x(15,"div",10),Z(16,cc,2,3,"div",11),x(17,"div",12)(18,"ul"),W(19,"audio",13,0),Z(21,hc,5,2,"div",14)(22,dc,2,3,"li",15)(23,uc,2,3,"li",16)(24,fc,2,3,"li",17)(25,pc,2,6,"li",18)(26,gc,2,3,"li",19)(27,mc,2,3,"li",20)(28,_c,2,3,"li",21)(29,bc,3,0,"li",9)(30,xc,10,10,"ng-container",9)(31,Cc,10,5,"ng-container",9)(32,Pc,8,4,"ng-container",9)(33,kc,6,4,"ng-container",9)(34,Tc,6,4,"ng-container",9)(35,Oc,4,1,"ng-container",9),y()(),Z(36,Dc,6,2,"div",22),y()()(),x(37,"app-notifications",23),V("closeNotifications",function(){return N(s),F(i.closeNotifications())})("notificationCountChanged",function(r){return N(s),F(i.onNotificationCountChanged(r))}),y()()}t&2&&(P(8),T("ngIf",i.isAdminPage),P(),T("ngIf",i.isMyProfilePage),P(),T("ngIf",i.isOtherUserProfilePage),P(),T("ngIf",i.isDashboardPage),P(),T("ngIf",i.isShoppingListPage),P(),T("ngIf",i.isEditProfilePage),P(),T("ngIf",!i.isAdminPage&&!i.isMyProfilePage&&!i.isOtherUserProfilePage&&!i.isDashboardPage&&!i.isShoppingListPage&&!i.isEditProfilePage),P(2),T("ngIf",i.isMobileView),P(),Ue("mobile_menu",i.menuValue),P(2),T("volume",i.volume),P(2),T("ngIf",i.isMobileView),P(),T("ngIf",!i.isLoggedIn),P(),T("ngIf",!i.isLoggedIn),P(),T("ngIf",i.isLoggedIn&&!i.isDashboardPage&&!i.isMyProfilePage&&!i.isOtherUserProfilePage&&!i.isAdminPage&&!i.isAdmin&&!i.isShoppingListPage&&!i.isEditProfilePage),P(),T("ngIf",i.isLoggedIn&&!i.isDashboardPage&&!i.isMyProfilePage&&!i.isOtherUserProfilePage&&!i.isAdminPage&&!i.isAdmin&&!i.isShoppingListPage&&!i.isEditProfilePage),P(),T("ngIf",i.isLoggedIn&&!i.isDashboardPage&&!i.isMyProfilePage&&!i.isOtherUserProfilePage&&!i.isAdminPage&&!i.isAdmin&&!i.isShoppingListPage&&!i.isEditProfilePage),P(),T("ngIf",i.isLoggedIn&&!i.isDashboardPage&&!i.isMyProfilePage&&!i.isOtherUserProfilePage&&!i.isAdminPage&&i.isAdmin&&!i.isShoppingListPage&&!i.isEditProfilePage),P(),T("ngIf",i.isLoggedIn&&!i.isDashboardPage&&!i.isMyProfilePage&&!i.isOtherUserProfilePage&&!i.isShoppingListPage&&!i.isEditProfilePage&&!i.isAdminPage),P(),T("ngIf",!i.isMobileView&&!i.isAdminPage&&!i.isMyProfilePage&&!i.isOtherUserProfilePage&&!i.isDashboardPage&&!i.isShoppingListPage&&!i.isEditProfilePage),P(),T("ngIf",i.isDashboardPage),P(),T("ngIf",i.isMyProfilePage),P(),T("ngIf",i.isOtherUserProfilePage),P(),T("ngIf",i.isEditProfilePage),P(),T("ngIf",i.isAdminPage),P(),T("ngIf",i.isShoppingListPage),P(),T("ngIf",i.isMusicPopupVisible&&!i.isMobileView),P(),T("currentUserId",i.loggedInUserId)("isVisible",i.showNotifications))},dependencies:[Qt,Vo,Yt,qo,Ko,Fi,Ri,Jo,Li,Ni,ar,lr,cr,Bi],styles:["header[_ngcontent-%COMP%]{padding:10px;background:#0b3b5b;z-index:999;position:sticky;top:0;left:0;width:100%}.music-controls[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{color:#0b3b5b}.music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:10px;height:10px;background:#fff;border-radius:50%;cursor:pointer}.music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:10px;height:10px;background:#fff;border-radius:50%;cursor:pointer;border:none}.music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb:active, .music-controls[_ngcontent-%COMP%]   .music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-thumb:active{background:#0b3b5b;color:#0b3b5b}.music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-track{background:linear-gradient(to right,#fcacc4,#0b3b5b);height:10px;border-radius:10px;border:none}.music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{background:linear-gradient(to right,#fcacc4,#0b3b5b);height:10px;border-radius:10px}.music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:#ddd;border-radius:10px;height:10px}.music-popup[_ngcontent-%COMP%]{position:absolute;top:80px;right:55px;background-color:#fcacc4;padding:15px;border-radius:5px;display:flex;flex-direction:column;align-items:center;gap:10px}.music-icon-li[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:24px;color:#fff}.logo-image[_ngcontent-%COMP%]{display:flex;align-items:center;width:50px;height:50px;border-radius:50px}.logo-container[_ngcontent-%COMP%]{display:flex!important;align-items:center!important;flex-wrap:nowrap!important;z-index:100}.log-out-button[_ngcontent-%COMP%]{background-color:red;color:#fff;cursor:pointer;padding:0 8px;border-radius:50px}#sign-up-button[_ngcontent-%COMP%]{background-color:#fff;color:#0b3b5b;cursor:pointer;padding:0 8px;border-radius:30px}#log-in-button[_ngcontent-%COMP%]{background-color:#fcacc4;color:#0b3b5b;cursor:pointer;padding:0 8px;border-radius:30px}.company-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-left:10px;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.desktop_menu[_ngcontent-%COMP%]{margin-top:24px}.desktop_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0;display:flex;justify-content:flex-end;align-items:center}.desktop_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;color:#fff;display:inline-flex;align-items:center;font-size:18px;margin-left:15px;font-weight:500;padding:0 8px;cursor:pointer;transition:.2s ease-in-out}.desktop_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{font-size:18px;font-weight:700;padding:0 8px;cursor:pointer;color:#0b3b5b;transition:.2s ease-in-out;background-color:#fff;border-radius:50px}.log-out-button[_ngcontent-%COMP%]:hover{background-color:#8b0000!important;color:#fff!important;transition:.2s ease-in-out}.desktop_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{border:2px solid white;border-radius:30px;color:#0b3b5b;background-color:#fff;transition:all .3s ease-in-out}.menu-icon[_ngcontent-%COMP%]{display:block;color:#fff;font-size:30px;cursor:pointer;padding-top:10px}@media screen and (min-width: 128px) and (max-width: 900px){.desktop_menu[_ngcontent-%COMP%]{display:none}.text-end[_ngcontent-%COMP%]{display:flex!important;justify-content:flex-end;align-items:center}.desktop_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block}.desktop_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;text-align:left;margin:0;padding:10px 0 10px 26px;border-bottom:1px solid white}.menu-icon[_ngcontent-%COMP%]{display:inline-flex!important;color:#fff;font-size:40px;padding:10px!important;padding-top:10px}.mobile_menu[_ngcontent-%COMP%]{right:0;transition:.4s ease-in-out}.desktop_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{border-radius:0}.desktop_menu.mobile_menu[_ngcontent-%COMP%]{display:block;position:fixed;right:0;top:0;width:280px;height:100%;background-color:#0b3b5b;transition:right .3s}.desktop_menu.mobile_menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;text-align:left;margin:0;padding:10px 0 10px 26px;border-bottom:1px solid white}.mobile-music-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:5px 0}.mobile-music-controls[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{color:#fcacc4;margin-right:10px;display:flex;align-items:center;justify-content:center}.mobile-music-controls[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px;line-height:24px}.mobile-music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:100px;-webkit-appearance:none;appearance:none;background:#ddd;border-radius:5px;height:5px;vertical-align:middle}.mobile-music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:15px;height:15px;background:#fcacc4;border-radius:50%;cursor:pointer;margin-top:-5px}.mobile-music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:15px;height:15px;background:#fcacc4;border-radius:50%;cursor:pointer;border:none}.mobile-music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb:active, .mobile-music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-thumb:active{background:#0b3b5b}.mobile-music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{background:linear-gradient(to right,#0b3b5b,#fcacc4);height:5px;border-radius:5px}.mobile-music-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-track{background:linear-gradient(to right,#0b3b5b,#fcacc4);height:5px;border-radius:5px;border:none}}@media screen and (max-width: 768px){.company-name[_ngcontent-%COMP%]{font-size:1.2rem;max-width:150px}}@media screen and (max-width: 576px){.company-name[_ngcontent-%COMP%]{font-size:1rem;max-width:120px}}.notifications-menu-item[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:8px}.notifications-menu-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:-8px;left:12px;background-color:#dc2626;color:#fff;border-radius:50%;padding:2px 6px;font-size:10px;font-weight:700;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;border:2px solid #0B3B5B;z-index:10}.mobile_menu[_ngcontent-%COMP%]   .desktop_menu[_ngcontent-%COMP%]{margin-top:10px}"]})};var Wi=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=It({type:n,selectors:[["app-footer"]],decls:16,vars:0,consts:[[1,"text-center","text-white","header-footer"],[1,"container","py-3"],[1,"d-flex","flex-column","flex-md-row","justify-content-center","align-items-center"],["href","tel:+387123456789",1,"mx-3","my-2","text-white"],[1,"bi","bi-telephone-fill"],["href","mailto:inquiries@grocerymate.com",1,"mx-3","my-2","text-white"],[1,"bi","bi-envelope-fill"],["href","https://www.google.com/maps/search/?api=1&query=Hrasnicka+cesta+3a,+Ilidza+71210","target","_blank",1,"mx-3","my-2","text-white"],[1,"bi","bi-geo-alt-fill"],[1,"text-center","text-white","p-3",2,"background-color","#0B3B5B"],["href","https://media.rnztools.nz/rnz/image/upload/s---up7dilw--/c_scale,f_auto,q_auto,w_1050/v1673917056/4LF1EO1_l_intro_1647359651_jpg?_a=BACCd2AD",1,"text-white"]],template:function(t,i){t&1&&(x(0,"footer",0)(1,"div",1)(2,"div",2)(3,"a",3),W(4,"i",4),M(5," +387123456789 "),y(),x(6,"a",5),W(7,"i",6),M(8," inquiries@grocerymate.com "),y(),x(9,"a",7),W(10,"i",8),M(11," Hrasnicka cesta 3a, Ilidza 71210 "),y()()(),x(12,"div",9),M(13," \xA9 2025 Copyright: "),x(14,"a",10),M(15," GroceryMate "),y()()())},styles:[".header-footer[_ngcontent-%COMP%]{background-color:#0b3b5b;max-height:200px;overflow-y:auto;box-sizing:border-box}"]})};function Ic(n,e){n&1&&W(0,"app-header")}function Rc(n,e){n&1&&W(0,"app-footer")}var ji=class n{constructor(e){this.router=e;this.router.events.pipe(ki(t=>t instanceof Di)).subscribe(t=>{let i=["/login","/signup"];this.showHeader=!i.includes(t.url),this.showFooter=!i.includes(t.url)})}showHeader=!0;showFooter=!0;ngOnInit(){console.log("\u{1F6F0}\uFE0F environment.apiUrl =",qe.apiUrl)}static \u0275fac=function(t){return new(t||n)(Dt(Gt))};static \u0275cmp=It({type:n,selectors:[["app-root"]],decls:3,vars:2,consts:[[4,"ngIf"]],template:function(t,i){t&1&&(Z(0,Ic,1,0,"app-header",0),W(1,"router-outlet"),Z(2,Rc,1,0,"app-footer",0)),t&2&&(T("ngIf",i.showHeader),P(2),T("ngIf",i.showFooter))},dependencies:[Qt,Yt,Ii,$o,Ui,Wi],encapsulation:2})};var ue=function(n){return n[n.Server=0]="Server",n[n.Client=1]="Client",n[n.Prerender=2]="Prerender",n}(ue||{});var _g={[ue.Prerender]:"ssg",[ue.Server]:"ssr",[ue.Client]:""};function Lc(n,e){n&1&&(x(0,"div",25),W(1,"input",26),x(2,"label",27),M(3," Active "),y()())}function Nc(n,e){if(n&1&&(x(0,"option",28),M(1),y()),n&2){let t=e.$implicit;T("value",t.storeId),P(),Jn(" ",t.name," ")}}function Fc(n,e){if(n&1){let t=j();x(0,"form",1),V("ngSubmit",function(){N(t);let s=A();return F(s.onEditSubmit())}),x(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"label",29),M(6,"Store Name"),y(),W(7,"input",30),y(),x(8,"div",5)(9,"label",31),M(10,"Icon URL"),y(),W(11,"input",32),y()(),x(12,"div",4)(13,"div",5)(14,"label",33),M(15,"Location"),y(),W(16,"input",34),y(),x(17,"div",5)(18,"label",35),M(19,"Contact"),y(),W(20,"input",36),y()(),x(21,"div",25),W(22,"input",37),x(23,"label",38),M(24," Active "),y()()(),x(25,"div",15)(26,"button",39),M(27," Update Store "),y()()()()}if(n&2){let t=A();T("formGroup",t.editForm),P(26),T("disabled",t.editForm.invalid)}}function Vc(n,e){n&1&&(x(0,"div",40),M(1," No stores to edit yet. "),y())}var $i=class n{fb=le(or);svc=le(dr);route=le(jo);router=le(Gt);storeForm;storeId=null;stores=[];selectedStoreId="";editForm;ngOnInit(){this.storeId=this.route.snapshot.paramMap.get("id"),this.storeForm=this.fb.group({name:["",ts.required],icon:[""],location:[""],contact:[""],isActive:[!0]}),this.storeId&&this.svc.getStore(this.storeId).subscribe(e=>{this.storeForm.patchValue({name:e.name,icon:e.icon,location:e.location,contact:e.contact,isActive:!0})}),this.svc.getStores().subscribe(e=>this.stores=e),this.editForm=this.fb.group({name:["",ts.required],icon:[""],location:[""],contact:[""],isActive:[!0]})}onSubmit(){if(this.storeForm.invalid)return;let e=this.storeForm.value;(this.storeId?this.svc.updateStore(this.storeId,e):this.svc.createStore(e)).subscribe(()=>this.router.navigate(["/admin-page/product-analytics"]))}onStoreSelect(e){if(!e){this.selectedStoreId="",this.editForm.reset();return}this.selectedStoreId=e,this.svc.getStore(e).subscribe(t=>{this.editForm.patchValue({name:t.name,icon:t.icon,location:t.location,contact:t.contact,isActive:!0})})}onEditSubmit(){this.editForm.invalid||!this.selectedStoreId||this.svc.updateStore(this.selectedStoreId,this.editForm.value).subscribe(()=>alert("Store updated!"))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=It({type:n,selectors:[["app-add-edit-store"]],decls:41,vars:9,consts:[[1,"mb-4"],[3,"ngSubmit","formGroup"],[1,"card","mb-4","shadow-sm"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6"],["for","name",1,"form-label"],["id","name","type","text","formControlName","name","placeholder","Enter store name",1,"form-control"],["for","icon",1,"form-label"],["id","icon","type","text","formControlName","icon","placeholder","https://\u2026",1,"form-control"],["for","location",1,"form-label"],["id","location","type","text","formControlName","location","placeholder","Address or area",1,"form-control"],["for","contact",1,"form-label"],["id","contact","type","text","formControlName","contact","placeholder","Phone or email",1,"form-control"],["class","form-check mb-3",4,"ngIf"],[1,"card-footer","text-end"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"container","mt-4"],[1,"mb-3","col-md-4"],["for","storeSelect",1,"form-label"],["id","storeSelect","name","storeSelect",1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"form-check","mb-3"],["type","checkbox","id","active","formControlName","isActive",1,"form-check-input"],["for","active",1,"form-check-label"],[3,"value"],["for","editName",1,"form-label"],["id","editName","type","text","formControlName","name",1,"form-control"],["for","editIcon",1,"form-label"],["id","editIcon","type","text","formControlName","icon",1,"form-control"],["for","editLocation",1,"form-label"],["id","editLocation","type","text","formControlName","location",1,"form-control"],["for","editContact",1,"form-label"],["id","editContact","type","text","formControlName","contact",1,"form-control"],["type","checkbox","id","editActive","formControlName","isActive",1,"form-check-input"],["for","editActive",1,"form-check-label"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-info"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"h4"),M(2),y()(),x(3,"form",1),V("ngSubmit",function(){return i.onSubmit()}),x(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"label",6),M(9,"Store Name"),y(),W(10,"input",7),y(),x(11,"div",5)(12,"label",8),M(13,"Icon URL"),y(),W(14,"input",9),y()(),x(15,"div",4)(16,"div",5)(17,"label",10),M(18,"Location"),y(),W(19,"input",11),y(),x(20,"div",5)(21,"label",12),M(22,"Contact"),y(),W(23,"input",13),y()(),Z(24,Lc,4,0,"div",14),y(),x(25,"div",15)(26,"button",16),M(27),y()()()(),W(28,"hr"),x(29,"div",17)(30,"h4"),M(31,"Edit Existing Store"),y(),x(32,"div",18)(33,"label",19),M(34,"Store"),y(),x(35,"select",20),$e("ngModelChange",function(o){return je(i.selectedStoreId,o)||(i.selectedStoreId=o),o}),V("ngModelChange",function(o){return i.onStoreSelect(o)}),x(36,"option",21),M(37,"-- Select a store --"),y(),Z(38,Nc,2,2,"option",22),y()(),Z(39,Fc,28,2,"form",23)(40,Vc,2,0,"div",24),y()),t&2&&(P(2),kt(i.storeId?"Edit Store":"Add Store"),P(),T("formGroup",i.storeForm),P(21),T("ngIf",i.storeForm.contains("isActive")),P(2),T("disabled",i.storeForm.invalid),P(),Jn(" ",i.storeId?"Update Store":"Create Store"," "),P(8),We("ngModel",i.selectedStoreId),P(3),T("ngForOf",i.stores),P(),T("ngIf",i.selectedStoreId),P(),T("ngIf",!i.stores.length))},dependencies:[Qt,Oi,Yt,rr,Zo,nr,sr,Ri,Xo,ir,Li,Go,tr,er,Fi,Ni,Ii],encapsulation:2})};var qi=class n{constructor(e,t,i){this.auth=e;this.users=t;this.router=i}canActivate(){if(!this.auth.isLoggedIn())return this.router.createUrlTree(["/login"]);let e=this.auth.getCurrentUserId();return e?this.users.getUsers().pipe(Eo(t=>t.find(s=>s.id===e)?.userType==="ADMIN"?!0:this.router.createUrlTree(["/dashboard"])),To(()=>ko(this.router.createUrlTree(["/dashboard"])))):this.router.createUrlTree(["/login"])}static \u0275fac=function(t){return new(t||n)(Kt(Vi),Kt(ur),Kt(Gt))};static \u0275prov=Te({token:n,factory:n.\u0275fac,providedIn:"root"})};var ns=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-PILYFBSK.js").then(n=>n.HomeComponent)},{path:"dashboard",loadComponent:()=>import("./chunk-B6BXADSY.js").then(n=>n.UserDashboardComponent),children:[{path:"shopping-list",loadComponent:()=>import("./chunk-OL7VLQEY.js").then(n=>n.ShoppingListPageComponent)},{path:"shopping-list/:id",loadComponent:()=>import("./chunk-OL7VLQEY.js").then(n=>n.ShoppingListPageComponent)}]},{path:"admin-page",loadComponent:()=>import("./chunk-65ENX2ZH.js").then(n=>n.AdminPageComponent),canActivate:[qi],children:[{path:"add-users",loadComponent:()=>import("./chunk-J2MNKEK2.js").then(n=>n.AddUsersComponent)},{path:"add-edit-store",component:$i},{path:"edit-users",loadComponent:()=>import("./chunk-ZL3Y5RID.js").then(n=>n.EditUsersComponent)},{path:"add-products",loadComponent:()=>import("./chunk-UGVRUPPI.js").then(n=>n.AddProductsComponent)},{path:"add-products/:storeId",loadComponent:()=>import("./chunk-UGVRUPPI.js").then(n=>n.AddProductsComponent)},{path:"edit-products",loadComponent:()=>import("./chunk-3TU2NGX7.js").then(n=>n.EditProductsComponent)},{path:"edit-products/:storeId",loadComponent:()=>import("./chunk-3TU2NGX7.js").then(n=>n.EditProductsComponent)}]},{path:"login",loadComponent:()=>import("./chunk-THF5GR2D.js").then(n=>n.LoginComponent)},{path:"signup",loadComponent:()=>import("./chunk-AR54CNQF.js").then(n=>n.SignupComponent)},{path:"user-profile",loadComponent:()=>import("./chunk-D77X5ORX.js").then(n=>n.UserProfileComponent)},{path:"user-profile/:id",loadComponent:()=>import("./chunk-D77X5ORX.js").then(n=>n.UserProfileComponent)},{path:"user-profiles/edit/:id",loadComponent:()=>import("./chunk-ACPLKZAT.js").then(n=>n.UserEditComponent)},{path:"**",redirectTo:"/home"}],Ug=ns.filter(n=>n.path!==void 0).map(n=>n.path==="admin-page"?Ee(Ot({},n),{renderMode:ue.Client}):Ee(Ot({},n),{renderMode:ue.Server}));var U=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(U||{}),Rt="*";function pr(n,e=null){return{type:U.Sequence,steps:n,options:e}}function ss(n){return{type:U.Style,styles:n,offset:null}}var Zt=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Ke=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,i=0,s=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(r=>{r.onDone(()=>{++t==o&&this._onFinish()}),r.onDestroy(()=>{++i==o&&this._onDestroy()}),r.onStart(()=>{++s==o&&this._onStart()})}),this.totalTime=this.players.reduce((r,a)=>Math.max(r,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let s=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(s)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Ki="!";function gr(n){return new $(3e3,!1)}function zc(){return new $(3100,!1)}function Bc(){return new $(3101,!1)}function Hc(n){return new $(3001,!1)}function Uc(n){return new $(3003,!1)}function Wc(n){return new $(3004,!1)}function jc(n,e){return new $(3005,!1)}function $c(){return new $(3006,!1)}function qc(){return new $(3007,!1)}function Kc(n,e){return new $(3008,!1)}function Yc(n){return new $(3002,!1)}function Qc(n,e,t,i,s){return new $(3010,!1)}function Xc(){return new $(3011,!1)}function Gc(){return new $(3012,!1)}function Zc(){return new $(3200,!1)}function Jc(){return new $(3202,!1)}function th(){return new $(3013,!1)}function eh(n){return new $(3014,!1)}function ih(n){return new $(3015,!1)}function nh(n){return new $(3016,!1)}function sh(n,e){return new $(3404,!1)}function oh(n){return new $(3502,!1)}function rh(n){return new $(3503,!1)}function ah(){return new $(3300,!1)}function lh(n){return new $(3504,!1)}function ch(n){return new $(3301,!1)}function hh(n,e){return new $(3302,!1)}function dh(n){return new $(3303,!1)}function uh(n,e){return new $(3400,!1)}function fh(n){return new $(3401,!1)}function ph(n){return new $(3402,!1)}function gh(n,e){return new $(3505,!1)}function Jt(n){switch(n.length){case 0:return new Zt;case 1:return n[0];default:return new Ke(n)}}function Tr(n,e,t=new Map,i=new Map){let s=[],o=[],r=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),h=c==r,d=h&&a||new Map;l.forEach((u,f)=>{let p=f,g=u;if(f!=="offset")switch(p=n.normalizePropertyName(p,s),g){case Ki:g=t.get(f);break;case Rt:g=i.get(f);break;default:g=n.normalizeStyleValue(f,p,g,s);break}d.set(p,g)}),h||o.push(d),a=d,r=c}),s.length)throw oh(s);return o}function Ms(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&os(t,"start",n)));break;case"done":n.onDone(()=>i(t&&os(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&os(t,"destroy",n)));break}}function os(n,e,t){let i=t.totalTime,s=!!t.disabled,o=ks(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,s),r=n._data;return r!=null&&(o._data=r),o}function ks(n,e,t,i,s="",o=0,r){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:s,totalTime:o,disabled:!!r}}function vt(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function mr(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var mh=typeof document>"u"?null:document.documentElement;function Es(n){let e=n.parentNode||n.host||null;return e===mh?null:e}function _h(n){return n.substring(1,6)=="ebkit"}var fe=null,_r=!1;function bh(n){fe||(fe=yh()||{},_r=fe.style?"WebkitAppearance"in fe.style:!1);let e=!0;return fe.style&&!_h(n)&&(e=n in fe.style,!e&&_r&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in fe.style)),e}function yh(){return typeof document<"u"?document.body:null}function Ar(n,e){for(;e;){if(e===n)return!0;e=Es(e)}return!1}function Or(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var Ts=(()=>{class n{validateStyleProperty(t){return bh(t)}containsElement(t,i){return Ar(t,i)}getParentElement(t){return Es(t)}query(t,i,s){return Or(t,i,s)}computeStyle(t,i,s){return s||""}animate(t,i,s,o,r,a=[],l){return new Zt(s,o)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Te({token:n,factory:n.\u0275fac})}return n})(),me=class{static NOOP=new Ts},_e=class{};var xh=1e3,Dr="{{",vh="}}",Ir="ng-enter",ds="ng-leave",Yi="ng-trigger",Ji=".ng-trigger",br="ng-animating",us=".ng-animating";function Bt(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:fs(parseFloat(e[1]),e[2])}function fs(n,e){switch(e){case"s":return n*xh;default:return n}}function tn(n,e,t){return n.hasOwnProperty("duration")?n:Sh(n,e,t)}function Sh(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,s,o=0,r="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(gr(n)),{duration:0,delay:0,easing:""};s=fs(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=fs(parseFloat(l),a[4]));let c=a[5];c&&(r=c)}else s=n;if(!t){let a=!1,l=e.length;s<0&&(e.push(zc()),a=!0),o<0&&(e.push(Bc()),a=!0),a&&e.splice(l,0,gr(n))}return{duration:s,delay:o,easing:r}}function Ch(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Lt(n,e,t){e.forEach((i,s)=>{let o=As(s);t&&!t.has(s)&&t.set(s,n.style[o]),n.style[o]=i})}function ge(n,e){e.forEach((t,i)=>{let s=As(i);n.style[s]=""})}function Ye(n){return Array.isArray(n)?n.length==1?n[0]:pr(n):n}function wh(n,e,t){let i=e.params||{},s=Rr(n);s.length&&s.forEach(o=>{i.hasOwnProperty(o)||t.push(Hc(o))})}var ps=new RegExp(`${Dr}\\s*(.+?)\\s*${vh}`,"g");function Rr(n){let e=[];if(typeof n=="string"){let t;for(;t=ps.exec(n);)e.push(t[1]);ps.lastIndex=0}return e}function Xe(n,e,t){let i=`${n}`,s=i.replace(ps,(o,r)=>{let a=e[r];return a==null&&(t.push(Uc(r)),a=""),a.toString()});return s==i?n:s}var Ph=/-+([a-z0-9])/g;function As(n){return n.replace(Ph,(...e)=>e[1].toUpperCase())}function Mh(n,e){return n===0||e===0}function kh(n,e,t){if(t.size&&e.length){let i=e[0],s=[];if(t.forEach((o,r)=>{i.has(r)||s.push(r),i.set(r,o)}),s.length)for(let o=1;o<e.length;o++){let r=e[o];s.forEach(a=>r.set(a,Os(n,a)))}}return e}function xt(n,e,t){switch(e.type){case U.Trigger:return n.visitTrigger(e,t);case U.State:return n.visitState(e,t);case U.Transition:return n.visitTransition(e,t);case U.Sequence:return n.visitSequence(e,t);case U.Group:return n.visitGroup(e,t);case U.Animate:return n.visitAnimate(e,t);case U.Keyframes:return n.visitKeyframes(e,t);case U.Style:return n.visitStyle(e,t);case U.Reference:return n.visitReference(e,t);case U.AnimateChild:return n.visitAnimateChild(e,t);case U.AnimateRef:return n.visitAnimateRef(e,t);case U.Query:return n.visitQuery(e,t);case U.Stagger:return n.visitStagger(e,t);default:throw Wc(e.type)}}function Os(n,e){return window.getComputedStyle(n)[e]}var Eh=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),en=class extends _e{normalizePropertyName(e,t){return As(e)}normalizeStyleValue(e,t,i,s){let o="",r=i.toString().trim();if(Eh.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&s.push(jc(e,i))}return r+o}};var nn="*";function Th(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>Ah(i,t,e)):t.push(n),t}function Ah(n,e,t){if(n[0]==":"){let l=Oh(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(ih(n)),e;let s=i[1],o=i[2],r=i[3];e.push(yr(s,r));let a=s==nn&&r==nn;o[0]=="<"&&!a&&e.push(yr(r,s))}function Oh(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(nh(n)),"* => *"}}var Qi=new Set(["true","1"]),Xi=new Set(["false","0"]);function yr(n,e){let t=Qi.has(n)||Xi.has(n),i=Qi.has(e)||Xi.has(e);return(s,o)=>{let r=n==nn||n==s,a=e==nn||e==o;return!r&&t&&typeof s=="boolean"&&(r=s?Qi.has(n):Xi.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?Qi.has(e):Xi.has(e)),r&&a}}var Lr=":self",Dh=new RegExp(`s*${Lr}s*,?`,"g");function Nr(n,e,t,i){return new gs(n).build(e,t,i)}var xr="",gs=class{_driver;constructor(e){this._driver=e}build(e,t,i){let s=new ms(t);return this._resetContextStyleTimingState(s),xt(this,Ye(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector=xr,e.collectedStyles=new Map,e.collectedStyles.set(xr,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,s=t.depCount=0,o=[],r=[];return e.name.charAt(0)=="@"&&t.errors.push($c()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==U.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,o.push(this.visitState(l,t))}),l.name=c}else if(a.type==U.Transition){let l=this.visitTransition(a,t);i+=l.queryCount,s+=l.depCount,r.push(l)}else t.errors.push(qc())}),{type:U.Trigger,name:e.name,states:o,transitions:r,queryCount:i,depCount:s,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,r=s||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Rr(l).forEach(c=>{r.hasOwnProperty(c)||o.add(c)})})}),o.size&&t.errors.push(Kc(e.name,[...o.values()]))}return{type:U.State,name:e.name,style:i,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=xt(this,Ye(e.animation),t),s=Th(e.expr,t.errors);return{type:U.Transition,matchers:s,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:pe(e.options)}}visitSequence(e,t){return{type:U.Sequence,steps:e.steps.map(i=>xt(this,i,t)),options:pe(e.options)}}visitGroup(e,t){let i=t.currentTime,s=0,o=e.steps.map(r=>{t.currentTime=i;let a=xt(this,r,t);return s=Math.max(s,t.currentTime),a});return t.currentTime=s,{type:U.Group,steps:o,options:pe(e.options)}}visitAnimate(e,t){let i=Nh(e.timings,t.errors);t.currentAnimateTimings=i;let s,o=e.styles?e.styles:ss({});if(o.type==U.Keyframes)s=this.visitKeyframes(o,t);else{let r=e.styles,a=!1;if(!r){a=!0;let c={};i.easing&&(c.easing=i.easing),r=ss(c)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(r,t);l.isEmptyStep=a,s=l}return t.currentAnimateTimings=null,{type:U.Animate,timings:i,style:s,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of s)typeof a=="string"?a===Rt?i.push(a):t.errors.push(Yc(a)):i.push(new Map(Object.entries(a)));let o=!1,r=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(r=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(Dr)>=0){o=!0;break}}}),{type:U.Style,styles:i,easing:r,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,s=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(r=>{typeof r!="string"&&r.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),h=c.get(l),d=!0;h&&(o!=s&&o>=h.startTime&&s<=h.endTime&&(t.errors.push(Qc(l,h.startTime,h.endTime,o,s)),d=!1),o=h.startTime),d&&c.set(l,{startTime:o,endTime:s}),t.options&&wh(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:U.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Xc()),i;let s=1,o=0,r=[],a=!1,l=!1,c=0,h=e.steps.map(_=>{let b=this._makeStyleAst(_,t),w=b.offset!=null?b.offset:Lh(b.styles),C=0;return w!=null&&(o++,C=b.offset=w),l=l||C<0||C>1,a=a||C<c,c=C,r.push(C),b});l&&t.errors.push(Gc()),a&&t.errors.push(Zc());let d=e.steps.length,u=0;o>0&&o<d?t.errors.push(Jc()):o==0&&(u=s/(d-1));let f=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return h.forEach((_,b)=>{let w=u>0?b==f?1:u*b:r[b],C=w*m;t.currentTime=p+g.delay+C,g.duration=C,this._validateStyleAst(_,t),_.offset=w,i.styles.push(_)}),i}visitReference(e,t){return{type:U.Reference,animation:xt(this,Ye(e.animation),t),options:pe(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:U.AnimateChild,options:pe(e.options)}}visitAnimateRef(e,t){return{type:U.AnimateRef,animation:this.visitReference(e.animation,t),options:pe(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;let[o,r]=Ih(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,vt(t.collectedStyles,t.currentQuerySelector,new Map);let a=xt(this,Ye(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:U.Query,selector:o,limit:s.limit||0,optional:!!s.optional,includeSelf:r,animation:a,originalSelector:e.selector,options:pe(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(th());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:tn(e.timings,t.errors,!0);return{type:U.Stagger,animation:xt(this,Ye(e.animation),t),timings:i,options:null}}};function Ih(n){let e=!!n.split(/\s*,\s*/).find(t=>t==Lr);return e&&(n=n.replace(Dh,"")),n=n.replace(/@\*/g,Ji).replace(/@\w+/g,t=>Ji+"-"+t.slice(1)).replace(/:animating/g,us),[n,e]}function Rh(n){return n?Ot({},n):null}var ms=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function Lh(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Nh(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=tn(n,e).duration;return rs(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=rs(0,0,"");return o.dynamic=!0,o.strValue=t,o}let s=tn(t,e);return rs(s.duration,s.delay,s.easing)}function pe(n){return n?(n=Ot({},n),n.params&&(n.params=Rh(n.params))):n={},n}function rs(n,e,t){return{duration:n,delay:e,easing:t}}function Ds(n,e,t,i,s,o,r=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:s,delay:o,totalTime:s+o,easing:r,subTimeline:a}}var Ge=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},Fh=1,Vh=":enter",zh=new RegExp(Vh,"g"),Bh=":leave",Hh=new RegExp(Bh,"g");function Fr(n,e,t,i,s,o=new Map,r=new Map,a,l,c=[]){return new _s().buildKeyframes(n,e,t,i,s,o,r,a,l,c)}var _s=class{buildKeyframes(e,t,i,s,o,r,a,l,c,h=[]){c=c||new Ge;let d=new bs(e,t,c,s,o,h,[]);d.options=l;let u=l.delay?Bt(l.delay):0;d.currentTimeline.delayNextStep(u),d.currentTimeline.setStyles([r],null,d.errors,l),xt(this,i,d);let f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){let m=f[g];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[Ds(t,[],[],[],0,u,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let s=t.createSubContext(e.options),o=t.currentTimeline.currentTime,r=this._visitSubInstructions(i,s,s.options);o!=r&&t.transformIntoNewTimeline(r)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let s of e){let o=s?.delay;if(o){let r=typeof o=="number"?o:Bt(Xe(o,s?.params??{},t.errors));i.delayNextStep(r)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,r=i.duration!=null?Bt(i.duration):null,a=i.delay!=null?Bt(i.delay):null;return r!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,r,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),xt(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,s=t,o=e.options;if(o&&(o.params||o.delay)&&(s=t.createSubContext(o),s.transformIntoNewTimeline(),o.delay!=null)){s.previousNode.type==U.Style&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=sn);let r=Bt(o.delay);s.delayNextStep(r)}e.steps.length&&(e.steps.forEach(r=>xt(this,r,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>i&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],s=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Bt(e.options.delay):0;e.steps.forEach(r=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),xt(this,r,a),s=Math.max(s,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(r=>t.currentTimeline.mergeTimelineCollectedStyles(r)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,s=t.params?Xe(i,t.params,t.errors):i;return tn(s,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),s.snapshotCurrentStyles());let o=e.style;o.type==U.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,s=t.currentAnimateTimings;!s&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=s&&s.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,s=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(s+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,s=e.options||{},o=s.delay?Bt(s.delay):0;o&&(t.previousNode.type===U.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=sn);let r=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,h)=>{t.currentQueryIndex=h;let d=t.createSubContext(e.options,c);o&&d.delayNextStep(o),c===t.element&&(l=d.currentTimeline),xt(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let u=d.currentTimeline.currentTime;r=Math.max(r,u)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(r),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,s=t.currentTimeline,o=e.timings,r=Math.abs(o.duration),a=r*(t.currentQueryTotal-1),l=r*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let h=t.currentTimeline;l&&h.delayNextStep(l);let d=h.currentTime;xt(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=s.currentTime-d+(s.startTime-i.currentTimeline.startTime)}},sn={},bs=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=sn;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,s,o,r,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=s,this._leaveClassName=o,this.errors=r,this.timelines=a,this.currentTimeline=l||new on(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,s=this.options;i.duration!=null&&(s.duration=Bt(i.duration)),i.delay!=null&&(s.delay=Bt(i.delay));let o=i.params;if(o){let r=s.params;r||(r=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!r.hasOwnProperty(a))&&(r[a]=Xe(o[a],r,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(s=>{i[s]=t[s]})}}return e}createSubContext(e=null,t,i){let s=t||this.element,o=new n(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=sn,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new ys(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(o),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,s,o,r){let a=[];if(s&&a.push(this.element),e.length>0){e=e.replace(zh,"."+this._enterClassName),e=e.replace(Hh,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,e,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&a.length==0&&r.push(eh(t)),a}},on=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,s){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=s,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Fh,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Rt),this._currentKeyframe.set(t,Rt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,s){t&&this._previousKeyframe.set("easing",t);let o=s&&s.params||{},r=Uh(e,this._globalTimelineStyles);for(let[a,l]of r){let c=Xe(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Rt),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let s=this._styleSummary.get(i);(!s||t.time>s.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,s=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((h,d)=>{h===Ki?e.add(d):h===Rt&&t.add(d)}),i||c.set("offset",l/this.duration),s.push(c)});let o=[...e.values()],r=[...t.values()];if(i){let a=s[0],l=new Map(a);a.set("offset",0),l.set("offset",1),s=[a,l]}return Ds(this.element,s,o,r,this.duration,this.startTime,this.easing,!1)}},ys=class extends on{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,s,o,r,a=!1){super(e,t,r.delay),this.keyframes=i,this.preStyleProps=s,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:r.duration,delay:r.delay,easing:r.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],r=i+t,a=t/r,l=new Map(e[0]);l.set("offset",0),o.push(l);let c=new Map(e[0]);c.set("offset",vr(a)),o.push(c);let h=e.length-1;for(let d=1;d<=h;d++){let u=new Map(e[d]),f=u.get("offset"),p=t+f*i;u.set("offset",vr(p/r)),o.push(u)}i=r,t=0,s="",e=o}return Ds(this.element,e,this.preStyleProps,this.postStyleProps,i,t,s,!0)}};function vr(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Uh(n,e){let t=new Map,i;return n.forEach(s=>{if(s==="*"){i??=e.keys();for(let o of i)t.set(o,Rt)}else for(let[o,r]of s)t.set(o,r)}),t}function Sr(n,e,t,i,s,o,r,a,l,c,h,d,u){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:o,toState:i,toStyles:r,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:d,errors:u}}var as={},rn=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,s){return Wh(this.ast.matchers,e,t,i,s)}buildStyles(e,t,i){let s=this._stateStyles.get("*");return e!==void 0&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,i):new Map}build(e,t,i,s,o,r,a,l,c,h){let d=[],u=this.ast.options&&this.ast.options.params||as,f=a&&a.params||as,p=this.buildStyles(i,f,d),g=l&&l.params||as,m=this.buildStyles(s,g,d),_=new Set,b=new Map,w=new Map,C=s==="void",S={params:Vr(g,u),delay:this.ast.options?.delay},k=h?[]:Fr(e,t,this.ast.animation,o,r,p,m,S,c,d),O=0;return k.forEach(D=>{O=Math.max(D.duration+D.delay,O)}),d.length?Sr(t,this._triggerName,i,s,C,p,m,[],[],b,w,O,d):(k.forEach(D=>{let R=D.element,z=vt(b,R,new Set);D.preStyleProps.forEach(B=>z.add(B));let H=vt(w,R,new Set);D.postStyleProps.forEach(B=>H.add(B)),R!==t&&_.add(R)}),Sr(t,this._triggerName,i,s,C,p,m,k,[..._.values()],b,w,O))}};function Wh(n,e,t,i,s){return n.some(o=>o(e,t,i,s))}function Vr(n,e){let t=Ot({},e);return Object.entries(n).forEach(([i,s])=>{s!=null&&(t[i]=s)}),t}var xs=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,s=Vr(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((r,a)=>{r&&(r=Xe(r,s,t));let l=this.normalizer.normalizePropertyName(a,t);r=this.normalizer.normalizeStyleValue(a,l,r,t),i.set(a,r)})}),i}};function jh(n,e,t){return new vs(n,e,t)}var vs=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(s=>{let o=s.options&&s.options.params||{};this.states.set(s.name,new xs(s.style,o,i))}),Cr(this.states,"true","1"),Cr(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new rn(e,s,this.states))}),this.fallbackTransition=$h(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,s){return this.transitionFactories.find(r=>r.match(e,t,i,s))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function $h(n,e,t){let i=[(r,a)=>!0],s={type:U.Sequence,steps:[],options:null},o={type:U.Transition,animation:s,matchers:i,options:null,queryCount:0,depCount:0};return new rn(n,o,e)}function Cr(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var qh=new Ge,Ss=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],s=[],o=Nr(this._driver,t,i,s);if(i.length)throw rh(i);this._animations.set(e,o)}_buildPlayer(e,t,i){let s=e.element,o=Tr(this._normalizer,e.keyframes,t,i);return this._driver.animate(s,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let s=[],o=this._animations.get(e),r,a=new Map;if(o?(r=Fr(this._driver,t,o,Ir,ds,new Map,new Map,i,qh,s),r.forEach(h=>{let d=vt(a,h.element,new Map);h.postStyleProps.forEach(u=>d.set(u,null))})):(s.push(ah()),r=[]),s.length)throw lh(s);a.forEach((h,d)=>{h.forEach((u,f)=>{h.set(f,this._driver.computeStyle(d,f,Rt))})});let l=r.map(h=>{let d=a.get(h.element);return this._buildPlayer(h,new Map,d)}),c=Jt(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw ch(e);return t}listen(e,t,i,s){let o=ks(t,"","","");return Ms(this._getPlayer(e),i,o,s),()=>{}}command(e,t,i,s){if(i=="register"){this.register(e,s[0]);return}if(i=="create"){let r=s[0]||{};this.create(e,t,r);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e);break}}},wr="ng-animate-queued",Kh=".ng-animate-queued",ls="ng-animate-disabled",Yh=".ng-animate-disabled",Qh="ng-star-inserted",Xh=".ng-star-inserted",Gh=[],zr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Zh={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Et="__ng_removed",Ze=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),s=i?e.value:e;if(this.value=td(s),i){let o=e,{value:r}=o,a=Kn(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(s=>{i[s]==null&&(i[s]=t[s])})}}},Qe="void",cs=new Ze(Qe),Cs=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,Pt(t,this._hostClassName)}listen(e,t,i,s){if(!this._triggers.has(t))throw hh(i,t);if(i==null||i.length==0)throw dh(t);if(!ed(i))throw uh(i,t);let o=vt(this._elementListeners,e,[]),r={name:t,phase:i,callback:s};o.push(r);let a=vt(this._engine.statesByElement,e,new Map);return a.has(t)||(Pt(e,Yi),Pt(e,Yi+"-"+t),a.set(t,cs)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(r);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw fh(e);return t}trigger(e,t,i,s=!0){let o=this._getTrigger(t),r=new Je(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Pt(e,Yi),Pt(e,Yi+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new Ze(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=cs),!(c.value===Qe)&&l.value===c.value){if(!sd(l.params,c.params)){let g=[],m=o.matchStyles(l.value,l.params,g),_=o.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{ge(e,m),Lt(e,_)})}return}let u=vt(this._engine.playersByElement,e,[]);u.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=o.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!s)return;f=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:r,isFallbackTransition:p}),p||(Pt(e,wr),r.onStart(()=>{Ae(e,wr)})),r.onDone(()=>{let g=this.players.indexOf(r);g>=0&&this.players.splice(g,1);let m=this._engine.playersByElement.get(e);if(m){let _=m.indexOf(r);_>=0&&m.splice(_,1)}}),this.players.push(r),u.push(r),r}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,Ji,!0);i.forEach(s=>{if(s[Et])return;let o=this._engine.fetchNamespacesByElement(s);o.size?o.forEach(r=>r.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,i,s){let o=this._engine.statesByElement.get(e),r=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(r.set(c,l.value),this._triggers.has(c)){let h=this.trigger(e,c,Qe,s);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,r),i&&Jt(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let s=new Set;t.forEach(o=>{let r=o.name;if(s.has(r))return;s.add(r);let l=this._triggers.get(r).fallbackTransition,c=i.get(r)||cs,h=new Ze(Qe),d=new Je(this.id,r,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:r,transition:l,fromState:c,toState:h,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)s=!0;else{let r=e;for(;r=r.parentNode;)if(i.statesByElement.get(r)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[Et];(!o||o===zr)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Pt(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let s=i.player;if(s.destroyed)return;let o=i.element,r=this._elementListeners.get(o);r&&r.forEach(a=>{if(a.name==i.triggerName){let l=ks(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,Ms(i.player,a.phase,l,a.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(i)}),this._queue=[],t.sort((i,s)=>{let o=i.transition.ast.depCount,r=s.transition.ast.depCount;return o==0||r==0?o-r:this._engine.driver.containsElement(i.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},ws=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new Cs(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,s=this.namespacesByHostElement;if(i.length-1>=0){let r=!1,a=this.driver.getParentElement(t);for(;a;){let l=s.get(a);if(l){let c=i.indexOf(l);i.splice(c+1,0,e),r=!0;break}a=this.driver.getParentElement(a)}r||i.unshift(e)}else i.push(e);return s.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let s=this._namespaceLookup[e];s&&s.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let s=this._namespaceList.indexOf(i);s>=0&&this._namespaceList.splice(s,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let s of i.values())if(s.namespaceId){let o=this._fetchNamespace(s.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,s){if(Gi(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,s),!0}return!1}insertNode(e,t,i,s){if(!Gi(t))return;let o=t[Et];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let r=this.collectedLeaveElements.indexOf(t);r>=0&&this.collectedLeaveElements.splice(r,1)}if(e){let r=this._fetchNamespace(e);r&&r.insertNode(t,i)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Pt(e,ls)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ae(e,ls))}removeNode(e,t,i){if(Gi(t)){let s=e?this._fetchNamespace(e):null;s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,s,o){this.collectedLeaveElements.push(t),t[Et]={namespaceId:e,setForRemoval:s,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,s,o){return Gi(t)?this._fetchNamespace(e).listen(t,i,s,o):()=>{}}_buildInstruction(e,t,i,s,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,s,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Ji,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,us,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Jt(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Et];if(t&&t.setForRemoval){if(e[Et]=zr,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ls)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Yh,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,s)=>this._balanceNamespaceList(i,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let s=this.collectedEnterElements[i];Pt(s,Qh)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let s=0;s<i.length;s++)i[s]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let s=this.collectedLeaveElements[i];this.processLeaveNode(s)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Jt(t).onDone(()=>{i.forEach(s=>s())}):i.forEach(s=>s())}}reportError(e){throw ph(e)}_flushAnimations(e,t){let i=new Ge,s=[],o=new Map,r=[],a=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(v=>{h.add(v);let E=this.driver.query(v,Kh,!0);for(let I=0;I<E.length;I++)h.add(E[I])});let d=this.bodyNode,u=Array.from(this.statesByElement.keys()),f=kr(u,this.collectedEnterElements),p=new Map,g=0;f.forEach((v,E)=>{let I=Ir+g++;p.set(E,I),v.forEach(L=>Pt(L,I))});let m=[],_=new Set,b=new Set;for(let v=0;v<this.collectedLeaveElements.length;v++){let E=this.collectedLeaveElements[v],I=E[Et];I&&I.setForRemoval&&(m.push(E),_.add(E),I.hasAnimation?this.driver.query(E,Xh,!0).forEach(L=>_.add(L)):b.add(E))}let w=new Map,C=kr(u,Array.from(_));C.forEach((v,E)=>{let I=ds+g++;w.set(E,I),v.forEach(L=>Pt(L,I))}),e.push(()=>{f.forEach((v,E)=>{let I=p.get(E);v.forEach(L=>Ae(L,I))}),C.forEach((v,E)=>{let I=w.get(E);v.forEach(L=>Ae(L,I))}),m.forEach(v=>{this.processLeaveNode(v)})});let S=[],k=[];for(let v=this._namespaceList.length-1;v>=0;v--)this._namespaceList[v].drainQueuedTransitions(t).forEach(I=>{let L=I.player,tt=I.element;if(S.push(L),this.collectedEnterElements.length){let dt=tt[Et];if(dt&&dt.setForMove){if(dt.previousTriggersValues&&dt.previousTriggersValues.has(I.triggerName)){let ae=dt.previousTriggersValues.get(I.triggerName),Ct=this.statesByElement.get(I.element);if(Ct&&Ct.has(I.triggerName)){let Pi=Ct.get(I.triggerName);Pi.value=ae,Ct.set(I.triggerName,Pi)}}L.destroy();return}}let pt=!d||!this.driver.containsElement(d,tt),at=w.get(tt),gt=p.get(tt),Y=this._buildInstruction(I,i,gt,at,pt);if(Y.errors&&Y.errors.length){k.push(Y);return}if(pt){L.onStart(()=>ge(tt,Y.fromStyles)),L.onDestroy(()=>Lt(tt,Y.toStyles)),s.push(L);return}if(I.isFallbackTransition){L.onStart(()=>ge(tt,Y.fromStyles)),L.onDestroy(()=>Lt(tt,Y.toStyles)),s.push(L);return}let qt=[];Y.timelines.forEach(dt=>{dt.stretchStartingKeyframe=!0,this.disabledNodes.has(dt.element)||qt.push(dt)}),Y.timelines=qt,i.append(tt,Y.timelines);let zt={instruction:Y,player:L,element:tt};r.push(zt),Y.queriedElements.forEach(dt=>vt(a,dt,[]).push(L)),Y.preStyleProps.forEach((dt,ae)=>{if(dt.size){let Ct=l.get(ae);Ct||l.set(ae,Ct=new Set),dt.forEach((Pi,qn)=>Ct.add(qn))}}),Y.postStyleProps.forEach((dt,ae)=>{let Ct=c.get(ae);Ct||c.set(ae,Ct=new Set),dt.forEach((Pi,qn)=>Ct.add(qn))})});if(k.length){let v=[];k.forEach(E=>{v.push(gh(E.triggerName,E.errors))}),S.forEach(E=>E.destroy()),this.reportError(v)}let O=new Map,D=new Map;r.forEach(v=>{let E=v.element;i.has(E)&&(D.set(E,E),this._beforeAnimationBuild(v.player.namespaceId,v.instruction,O))}),s.forEach(v=>{let E=v.element;this._getPreviousPlayers(E,!1,v.namespaceId,v.triggerName,null).forEach(L=>{vt(O,E,[]).push(L),L.destroy()})});let R=m.filter(v=>Er(v,l,c)),z=new Map;Mr(z,this.driver,b,c,Rt).forEach(v=>{Er(v,l,c)&&R.push(v)});let B=new Map;f.forEach((v,E)=>{Mr(B,this.driver,new Set(v),l,Ki)}),R.forEach(v=>{let E=z.get(v),I=B.get(v);z.set(v,new Map([...E?.entries()??[],...I?.entries()??[]]))});let rt=[],ht=[],K={};r.forEach(v=>{let{element:E,player:I,instruction:L}=v;if(i.has(E)){if(h.has(E)){I.onDestroy(()=>Lt(E,L.toStyles)),I.disabled=!0,I.overrideTotalTime(L.totalTime),s.push(I);return}let tt=K;if(D.size>1){let at=E,gt=[];for(;at=at.parentNode;){let Y=D.get(at);if(Y){tt=Y;break}gt.push(at)}gt.forEach(Y=>D.set(Y,tt))}let pt=this._buildAnimation(I.namespaceId,L,O,o,B,z);if(I.setRealPlayer(pt),tt===K)rt.push(I);else{let at=this.playersByElement.get(tt);at&&at.length&&(I.parentPlayer=Jt(at)),s.push(I)}}else ge(E,L.fromStyles),I.onDestroy(()=>Lt(E,L.toStyles)),ht.push(I),h.has(E)&&s.push(I)}),ht.forEach(v=>{let E=o.get(v.element);if(E&&E.length){let I=Jt(E);v.setRealPlayer(I)}}),s.forEach(v=>{v.parentPlayer?v.syncPlayerEvents(v.parentPlayer):v.destroy()});for(let v=0;v<m.length;v++){let E=m[v],I=E[Et];if(Ae(E,ds),I&&I.hasAnimation)continue;let L=[];if(a.size){let pt=a.get(E);pt&&pt.length&&L.push(...pt);let at=this.driver.query(E,us,!0);for(let gt=0;gt<at.length;gt++){let Y=a.get(at[gt]);Y&&Y.length&&L.push(...Y)}}let tt=L.filter(pt=>!pt.destroyed);tt.length?id(this,E,tt):this.processLeaveNode(E)}return m.length=0,rt.forEach(v=>{this.players.push(v),v.onDone(()=>{v.destroy();let E=this.players.indexOf(v);this.players.splice(E,1)}),v.play()}),rt}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,s,o){let r=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(r=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==Qe;a.forEach(c=>{c.queued||!l&&c.triggerName!=s||r.push(c)})}}return(i||s)&&(r=r.filter(a=>!(i&&i!=a.namespaceId||s&&s!=a.triggerName))),r}_beforeAnimationBuild(e,t,i){let s=t.triggerName,o=t.element,r=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:s;for(let l of t.timelines){let c=l.element,h=c!==o,d=vt(i,c,[]);this._getPreviousPlayers(c,h,r,a,t.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}ge(o,t.fromStyles)}_buildAnimation(e,t,i,s,o,r){let a=t.triggerName,l=t.element,c=[],h=new Set,d=new Set,u=t.timelines.map(p=>{let g=p.element;h.add(g);let m=g[Et];if(m&&m.removedBeforeQueried)return new Zt(p.duration,p.delay);let _=g!==l,b=nd((i.get(g)||Gh).map(O=>O.getRealPlayer())).filter(O=>{let D=O;return D.element?D.element===g:!1}),w=o.get(g),C=r.get(g),S=Tr(this._normalizer,p.keyframes,w,C),k=this._buildPlayer(p,S,b);if(p.subTimeline&&s&&d.add(g),_){let O=new Je(e,a,g);O.setRealPlayer(k),c.push(O)}return k});c.forEach(p=>{vt(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>Jh(this.playersByQueriedElement,p.element,p))}),h.forEach(p=>Pt(p,br));let f=Jt(u);return f.onDestroy(()=>{h.forEach(p=>Ae(p,br)),Lt(l,t.toStyles)}),d.forEach(p=>{vt(s,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Zt(e.duration,e.delay)}},Je=class{namespaceId;triggerName;element;_player=new Zt;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(s=>Ms(e,i,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){vt(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Jh(n,e,t){let i=n.get(e);if(i){if(i.length){let s=i.indexOf(t);i.splice(s,1)}i.length==0&&n.delete(e)}return i}function td(n){return n??null}function Gi(n){return n&&n.nodeType===1}function ed(n){return n=="start"||n=="done"}function Pr(n,e){let t=n.style.display;return n.style.display=e??"none",t}function Mr(n,e,t,i,s){let o=[];t.forEach(l=>o.push(Pr(l)));let r=[];i.forEach((l,c)=>{let h=new Map;l.forEach(d=>{let u=e.computeStyle(c,d,s);h.set(d,u),(!u||u.length==0)&&(c[Et]=Zh,r.push(c))}),n.set(c,h)});let a=0;return t.forEach(l=>Pr(l,o[a++])),r}function kr(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,s=new Set(e),o=new Map;function r(a){if(!a)return i;let l=o.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:s.has(c)?l=i:l=r(c),o.set(a,l),l}return e.forEach(a=>{let l=r(a);l!==i&&t.get(l).push(a)}),t}function Pt(n,e){n.classList?.add(e)}function Ae(n,e){n.classList?.remove(e)}function id(n,e,t){Jt(t).onDone(()=>n.processLeaveNode(e))}function nd(n){let e=[];return Br(n,e),e}function Br(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Ke?Br(i.players,e):e.push(i)}}function sd(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s=0;s<t.length;s++){let o=t[s];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function Er(n,e,t){let i=t.get(n);if(!i)return!1;let s=e.get(n);return s?i.forEach(o=>s.add(o)):e.set(n,i),t.delete(n),!0}var Oe=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new ws(e.body,t,i),this._timelineEngine=new Ss(e.body,t,i),this._transitionEngine.onRemovalComplete=(s,o)=>this.onRemovalComplete(s,o)}registerTrigger(e,t,i,s,o){let r=e+"-"+s,a=this._triggerCache[r];if(!a){let l=[],c=[],h=Nr(this._driver,o,l,c);if(l.length)throw sh(s,l);a=jh(s,h,this._normalizer),this._triggerCache[r]=a}this._transitionEngine.registerTrigger(t,s,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,s){this._transitionEngine.insertNode(e,t,i,s)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,s){if(i.charAt(0)=="@"){let[o,r]=mr(i),a=s;this._timelineEngine.command(o,t,r,a)}else this._transitionEngine.trigger(e,t,i,s)}listen(e,t,i,s,o){if(i.charAt(0)=="@"){let[r,a]=mr(i);return this._timelineEngine.listen(r,t,a,o)}return this._transitionEngine.listen(e,t,i,s,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function od(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=hs(e[0]),e.length>1&&(i=hs(e[e.length-1]))):e instanceof Map&&(t=hs(e)),t||i?new rd(n,t,i):null}var rd=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,s){this._element=t,this._startStyles=i,this._endStyles=s;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Lt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Lt(this._element,this._initialStyles),this._endStyles&&(Lt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ge(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ge(this._element,this._endStyles),this._endStyles=null),Lt(this._element,this._initialStyles),this._state=3)}}return n})();function hs(n){let e=null;return n.forEach((t,i)=>{ad(i)&&(e=e||new Map,e.set(i,t))}),e}function ad(n){return n==="display"||n==="position"}var an=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,s){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=s,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,s)=>{s!=="offset"&&e.set(s,this._finished?i:Os(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},ln=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Ar(e,t)}getParentElement(e){return Es(e)}query(e,t,i){return Or(e,t,i)}computeStyle(e,t,i){return Os(e,t)}animate(e,t,i,s,o,r=[]){let a=s==0?"both":"forwards",l={duration:i,delay:s,fill:a};o&&(l.easing=o);let c=new Map,h=r.filter(f=>f instanceof an);Mh(i,s)&&h.forEach(f=>{f.currentSnapshot.forEach((p,g)=>c.set(g,p))});let d=Ch(t).map(f=>new Map(f));d=kh(e,d,c);let u=od(e,d);return new an(e,d,l,u)}};var Zi="@",Hr="@.disabled",cn=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,s){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=s}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,s=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,s){this.delegate.setAttribute(e,t,i,s)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,s){this.delegate.setStyle(e,t,i,s)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==Zi&&t==Hr?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i,s){return this.delegate.listen(e,t,i,s)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Ps=class extends cn{factory;constructor(e,t,i,s,o){super(t,i,s,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==Zi?t.charAt(1)=="."&&t==Hr?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i,s){if(t.charAt(0)==Zi){let o=ld(e),r=t.slice(1),a="";return r.charAt(0)!=Zi&&([r,a]=cd(r)),this.engine.listen(this.namespaceId,o,r,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,i,l)})}return this.delegate.listen(e,t,i,s)}};function ld(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function cd(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var hn=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(s,o)=>{o?.removeChild(null,s)}}createRenderer(e,t){let i="",s=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,h=c.get(s);if(!h){let d=()=>c.delete(s);h=new cn(i,s,this.engine,d),c.set(s,h)}return h}let o=t.id,r=t.id+"-"+this._currentId;this._currentId++,this.engine.register(r,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,r,e,c.name,c)};return t.data.animation.forEach(a),new Ps(this,r,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let s=this._animationCallbacksBuffer;s.length==0&&queueMicrotask(()=>{this._zone.run(()=>{s.forEach(o=>{let[r,a]=o;r(a)}),this._animationCallbacksBuffer=[]})}),s.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var dd=(()=>{class n extends Oe{constructor(t,i,s){super(t,i,s)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(Kt(Fo),Kt(me),Kt(_e))};static \u0275prov=Te({token:n,factory:n.\u0275fac})}return n})();function ud(){return new en}function fd(n,e,t){return new hn(n,e,t)}var Ur=[{provide:_e,useFactory:ud},{provide:Oe,useClass:dd},{provide:No,useFactory:fd,deps:[Uo,Oe,Ao]}],rm=[{provide:me,useClass:Ts},{provide:Qn,useValue:"NoopAnimations"},...Ur],pd=[{provide:me,useFactory:()=>new ln},{provide:Qn,useFactory:()=>"BrowserAnimations"},...Ur];function Wr(){return Oo("NgEagerAnimations"),[...pd]}var jr=(n,e)=>{let t=le(Ti),i=Xt(t);if(n.url.includes("/login")||n.url.includes("/register"))return e(n);let s=i?localStorage.getItem("token"):null;if(s){let o={Authorization:`Bearer ${s}`};n.body instanceof FormData||(o["Content-Type"]="application/json"),n=n.clone({setHeaders:o})}return e(n)};var $r={providers:[Yo(ns,Qo({onSameUrlNavigation:"reload"})),Wr(),zo(Ho(),Bo([jr]))]};function ii(n){return n+.5|0}var te=(n,e,t)=>Math.max(Math.min(n,t),e);function ti(n){return te(ii(n*2.55),0,255)}function ee(n){return te(ii(n*255),0,255)}function Ht(n){return te(ii(n/2.55)/100,0,1)}function qr(n){return te(ii(n*100),0,100)}var Mt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Rs=[..."0123456789ABCDEF"],gd=n=>Rs[n&15],md=n=>Rs[(n&240)>>4]+Rs[n&15],dn=n=>(n&240)>>4===(n&15),_d=n=>dn(n.r)&&dn(n.g)&&dn(n.b)&&dn(n.a);function bd(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Mt[n[1]]*17,g:255&Mt[n[2]]*17,b:255&Mt[n[3]]*17,a:e===5?Mt[n[4]]*17:255}:(e===7||e===9)&&(t={r:Mt[n[1]]<<4|Mt[n[2]],g:Mt[n[3]]<<4|Mt[n[4]],b:Mt[n[5]]<<4|Mt[n[6]],a:e===9?Mt[n[7]]<<4|Mt[n[8]]:255})),t}var yd=(n,e)=>n<255?e(n):"";function xd(n){var e=_d(n)?gd:md;return n?"#"+e(n.r)+e(n.g)+e(n.b)+yd(n.a,e):void 0}var vd=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Xr(n,e,t){let i=e*Math.min(t,1-t),s=(o,r=(o+n/30)%12)=>t-i*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function Sd(n,e,t){let i=(s,o=(s+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function Cd(n,e,t){let i=Xr(n,1,.5),s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function wd(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function Ls(n){let t=n.r/255,i=n.g/255,s=n.b/255,o=Math.max(t,i,s),r=Math.min(t,i,s),a=(o+r)/2,l,c,h;return o!==r&&(h=o-r,c=a>.5?h/(2-o-r):h/(o+r),l=wd(t,i,s,h,o),l=l*60+.5),[l|0,c||0,a]}function Ns(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(ee)}function Fs(n,e,t){return Ns(Xr,n,e,t)}function Pd(n,e,t){return Ns(Cd,n,e,t)}function Md(n,e,t){return Ns(Sd,n,e,t)}function Gr(n){return(n%360+360)%360}function kd(n){let e=vd.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?ti(+e[5]):ee(+e[5]));let s=Gr(+e[2]),o=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?i=Pd(s,o,r):e[1]==="hsv"?i=Md(s,o,r):i=Fs(s,o,r),{r:i[0],g:i[1],b:i[2],a:t}}function Ed(n,e){var t=Ls(n);t[0]=Gr(t[0]+e),t=Fs(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Td(n){if(!n)return;let e=Ls(n),t=e[0],i=qr(e[1]),s=qr(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${Ht(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}var Kr={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Yr={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ad(){let n={},e=Object.keys(Yr),t=Object.keys(Kr),i,s,o,r,a;for(i=0;i<e.length;i++){for(r=a=e[i],s=0;s<t.length;s++)o=t[s],a=a.replace(o,Kr[o]);o=parseInt(Yr[r],16),n[a]=[o>>16&255,o>>8&255,o&255]}return n}var un;function Od(n){un||(un=Ad(),un.transparent=[0,0,0,0]);let e=un[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var Dd=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Id(n){let e=Dd.exec(n),t=255,i,s,o;if(e){if(e[7]!==i){let r=+e[7];t=e[8]?ti(r):te(r*255,0,255)}return i=+e[1],s=+e[3],o=+e[5],i=255&(e[2]?ti(i):te(i,0,255)),s=255&(e[4]?ti(s):te(s,0,255)),o=255&(e[6]?ti(o):te(o,0,255)),{r:i,g:s,b:o,a:t}}}function Rd(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Ht(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var Is=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,De=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Ld(n,e,t){let i=De(Ht(n.r)),s=De(Ht(n.g)),o=De(Ht(n.b));return{r:ee(Is(i+t*(De(Ht(e.r))-i))),g:ee(Is(s+t*(De(Ht(e.g))-s))),b:ee(Is(o+t*(De(Ht(e.b))-o))),a:n.a+t*(e.a-n.a)}}function fn(n,e,t){if(n){let i=Ls(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=Fs(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Zr(n,e){return n&&Object.assign(e||{},n)}function Qr(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ee(n[3]))):(e=Zr(n,{r:0,g:0,b:0,a:1}),e.a=ee(e.a)),e}function Nd(n){return n.charAt(0)==="r"?Id(n):kd(n)}var ei=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=Qr(e):t==="string"&&(i=bd(e)||Od(e)||Nd(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Zr(this._rgb);return e&&(e.a=Ht(e.a)),e}set rgb(e){this._rgb=Qr(e)}rgbString(){return this._valid?Rd(this._rgb):void 0}hexString(){return this._valid?xd(this._rgb):void 0}hslString(){return this._valid?Td(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,s=e.rgb,o,r=t===o?.5:t,a=2*r-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,i.r=255&c*i.r+o*s.r+.5,i.g=255&c*i.g+o*s.g+.5,i.b=255&c*i.b+o*s.b+.5,i.a=r*i.a+(1-r)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=Ld(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=ee(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=ii(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return fn(this._rgb,2,e),this}darken(e){return fn(this._rgb,2,-e),this}saturate(e){return fn(this._rgb,1,e),this}desaturate(e){return fn(this._rgb,1,-e),this}rotate(e){return Ed(this._rgb,e),this}};function Nt(){}var ra=(()=>{let n=0;return()=>n++})();function J(n){return n==null}function it(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function q(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function lt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function mt(n,e){return lt(n)?n:e}function Q(n,e){return typeof n>"u"?e:n}var aa=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,Hs=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function G(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function X(n,e,t,i){let s,o,r;if(it(n))if(o=n.length,i)for(s=o-1;s>=0;s--)e.call(t,n[s],s);else for(s=0;s<o;s++)e.call(t,n[s],s);else if(q(n))for(r=Object.keys(n),o=r.length,s=0;s<o;s++)e.call(t,n[r[s]],r[s])}function oi(n,e){let t,i,s,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],o=e[t],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function _n(n){if(it(n))return n.map(_n);if(q(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,s=0;for(;s<i;++s)e[t[s]]=_n(n[t[s]]);return e}return n}function la(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Fd(n,e,t,i){if(!la(n))return;let s=e[n],o=t[n];q(s)&&q(o)?Re(s,o,i):e[n]=_n(o)}function Re(n,e,t){let i=it(e)?e:[e],s=i.length;if(!q(n))return n;t=t||{};let o=t.merger||Fd,r;for(let a=0;a<s;++a){if(r=i[a],!q(r))continue;let l=Object.keys(r);for(let c=0,h=l.length;c<h;++c)o(l[c],n,r,t)}return n}function Le(n,e){return Re(n,e,{merger:Vd})}function Vd(n,e,t){if(!la(n))return;let i=e[n],s=t[n];q(i)&&q(s)?Le(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=_n(s))}var Jr={"":n=>n,x:n=>n.x,y:n=>n.y};function zd(n){let e=n.split("."),t=[],i="";for(let s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Bd(n){let e=zd(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function Ne(n,e){return(Jr[e]||(Jr[e]=Bd(e)))(n)}function xn(n){return n.charAt(0).toUpperCase()+n.slice(1)}var ri=n=>typeof n<"u",Ut=n=>typeof n=="function",Us=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function ca(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var ot=Math.PI,et=2*ot,ym=et+ot,bn=Number.POSITIVE_INFINITY,Hd=ot/180,st=ot/2,be=ot/4,ta=ot*2/3,Wt=Math.log10,ai=Math.sign;function li(n,e,t){return Math.abs(n-e)<t}function Ws(n){let e=Math.round(n);n=li(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Wt(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function ha(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,o)=>s-o).pop(),e}function Ud(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function ci(n){return!Ud(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function da(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function js(n,e,t){let i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function At(n){return n*(ot/180)}function vn(n){return n*(180/ot)}function $s(n){if(!lt(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function qs(n,e){let t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i),o=Math.atan2(i,t);return o<-.5*ot&&(o+=et),{angle:o,distance:s}}function ua(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Tt(n){return(n%et+et)%et}function hi(n,e,t,i){let s=Tt(n),o=Tt(e),r=Tt(t),a=Tt(o-s),l=Tt(r-s),c=Tt(s-o),h=Tt(s-r);return s===o||s===r||i&&o===r||a>l&&c<h}function St(n,e,t){return Math.max(e,Math.min(t,n))}function fa(n){return St(n,-32768,32767)}function Fe(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Sn(n,e,t){t=t||(r=>n[r]<e);let i=n.length-1,s=0,o;for(;i-s>1;)o=s+i>>1,t(o)?s=o:i=o;return{lo:s,hi:i}}var Cn=(n,e,t,i)=>Sn(n,t,i?s=>{let o=n[s][e];return o<t||o===t&&n[s+1][e]===t}:s=>n[s][e]<t),pa=(n,e,t)=>Sn(n,t,i=>n[i][e]>=t);function ga(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}var ma=["push","pop","shift","splice","unshift"];function _a(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ma.forEach(t=>{let i="_onData"+xn(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){let r=s.apply(this,o);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...o)}),r}})})}function Ks(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(ma.forEach(o=>{delete n[o]}),delete n._chartjs)}function ba(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var Ys=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Qs(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,Ys.call(window,()=>{i=!1,n.apply(e,t)}))}}function ya(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var Xs=n=>n==="start"?"left":n==="end"?"right":"center",_t=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,xa=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;var pn=n=>n===0||n===1,ea=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*et/t)),ia=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*et/t)+1,Ie={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*st)+1,easeOutSine:n=>Math.sin(n*st),easeInOutSine:n=>-.5*(Math.cos(ot*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>pn(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>pn(n)?n:ea(n,.075,.3),easeOutElastic:n=>pn(n)?n:ia(n,.075,.3),easeInOutElastic(n){return pn(n)?n:n<.5?.5*ea(n*2,.1125,.45):.5+.5*ia(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Ie.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ie.easeInBounce(n*2)*.5:Ie.easeOutBounce(n*2-1)*.5+.5};function va(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Gs(n){return va(n)?n:new ei(n)}function Vs(n){return va(n)?n:new ei(n).saturate(.5).darken(.1).hexString()}var Wd=["x","y","borderWidth","radius","tension"],jd=["color","borderColor","backgroundColor"];function $d(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:jd},numbers:{type:"number",properties:Wd}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function qd(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var na=new Map;function Kd(n,e){e=e||{};let t=n+JSON.stringify(e),i=na.get(t);return i||(i=new Intl.NumberFormat(n,e),na.set(t,i)),i}function di(n,e,t){return Kd(e,t).format(n)}var Sa={values(n){return it(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,s,o=n;if(t.length>1){let c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=Yd(n,t)}let r=Wt(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),di(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(Wt(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?Sa.numeric.call(this,n,e,t):""}};function Yd(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var ui={formatters:Sa};function Qd(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ui.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var ie=Object.create(null),wn=Object.create(null);function ni(n,e){if(!e)return n;let t=e.split(".");for(let i=0,s=t.length;i<s;++i){let o=t[i];n=n[o]||(n[o]=Object.create(null))}return n}function zs(n,e,t){return typeof e=="string"?Re(ni(n,e),t):Re(ni(n,""),e)}var Bs=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Vs(s.backgroundColor),this.hoverBorderColor=(i,s)=>Vs(s.borderColor),this.hoverColor=(i,s)=>Vs(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return zs(this,e,t)}get(e){return ni(this,e)}describe(e,t){return zs(wn,e,t)}override(e,t){return zs(ie,e,t)}route(e,t,i,s){let o=ni(this,e),r=ni(this,i),a="_"+t;Object.defineProperties(o,{[a]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){let l=this[a],c=r[s];return q(l)?Object.assign({},c,l):Q(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}},nt=new Bs({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$d,qd,Qd]);function Xd(n){return!n||J(n.size)||J(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function si(n,e,t,i,s){let o=e[s];return o||(o=e[s]=n.measureText(s).width,t.push(s)),o>i&&(i=o),i}function Ca(n,e,t,i){i=i||{};let s=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},o=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let r=0,a=t.length,l,c,h,d,u;for(l=0;l<a;l++)if(d=t[l],d!=null&&!it(d))r=si(n,s,o,r,d);else if(it(d))for(c=0,h=d.length;c<h;c++)u=d[c],u!=null&&!it(u)&&(r=si(n,s,o,r,u));n.restore();let f=o.length/2;if(f>t.length){for(l=0;l<f;l++)delete s[o[l]];o.splice(0,f)}return r}function ne(n,e,t){let i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function Zs(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Js(n,e,t,i){to(n,e,t,i,null)}function to(n,e,t,i,s){let o,r,a,l,c,h,d,u,f=e.pointStyle,p=e.rotation,g=e.radius,m=(p||0)*Hd;if(f&&typeof f=="object"&&(o=f.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(m),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(g)||g<=0)){switch(n.beginPath(),f){default:s?n.ellipse(t,i,s/2,g,0,0,et):n.arc(t,i,g,0,et),n.closePath();break;case"triangle":h=s?s/2:g,n.moveTo(t+Math.sin(m)*h,i-Math.cos(m)*g),m+=ta,n.lineTo(t+Math.sin(m)*h,i-Math.cos(m)*g),m+=ta,n.lineTo(t+Math.sin(m)*h,i-Math.cos(m)*g),n.closePath();break;case"rectRounded":c=g*.516,l=g-c,r=Math.cos(m+be)*l,d=Math.cos(m+be)*(s?s/2-c:l),a=Math.sin(m+be)*l,u=Math.sin(m+be)*(s?s/2-c:l),n.arc(t-d,i-a,c,m-ot,m-st),n.arc(t+u,i-r,c,m-st,m),n.arc(t+d,i+a,c,m,m+st),n.arc(t-u,i+r,c,m+st,m+ot),n.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,h=s?s/2:l,n.rect(t-h,i-l,2*h,2*l);break}m+=be;case"rectRot":d=Math.cos(m)*(s?s/2:g),r=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(s?s/2:g),n.moveTo(t-d,i-a),n.lineTo(t+u,i-r),n.lineTo(t+d,i+a),n.lineTo(t-u,i+r),n.closePath();break;case"crossRot":m+=be;case"cross":d=Math.cos(m)*(s?s/2:g),r=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(s?s/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+u,i-r),n.lineTo(t-u,i+r);break;case"star":d=Math.cos(m)*(s?s/2:g),r=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(s?s/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+u,i-r),n.lineTo(t-u,i+r),m+=be,d=Math.cos(m)*(s?s/2:g),r=Math.cos(m)*g,a=Math.sin(m)*g,u=Math.sin(m)*(s?s/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+u,i-r),n.lineTo(t-u,i+r);break;case"line":r=s?s/2:Math.cos(m)*g,a=Math.sin(m)*g,n.moveTo(t-r,i-a),n.lineTo(t+r,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(m)*(s?s/2:g),i+Math.sin(m)*g);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function ve(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Pn(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Mn(n){n.restore()}function Gd(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),J(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Zd(n,e,t,i,s){if(s.strikethrough||s.underline){let o=n.measureText(i),r=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=t-o.actualBoundingBoxAscent,c=t+o.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(r,h),n.lineTo(a,h),n.stroke()}}function Jd(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Se(n,e,t,i,s,o={}){let r=it(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="",l,c;for(n.save(),n.font=s.string,Gd(n,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&Jd(n,o.backdrop),a&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),J(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(c,t,i,o.maxWidth)),n.fillText(c,t,i,o.maxWidth),Zd(n,t,i,c,o),i+=Number(s.lineHeight);n.restore()}function fi(n,e){let{x:t,y:i,w:s,h:o,radius:r}=e;n.arc(t+r.topLeft,i+r.topLeft,r.topLeft,1.5*ot,ot,!0),n.lineTo(t,i+o-r.bottomLeft),n.arc(t+r.bottomLeft,i+o-r.bottomLeft,r.bottomLeft,ot,st,!0),n.lineTo(t+s-r.bottomRight,i+o),n.arc(t+s-r.bottomRight,i+o-r.bottomRight,r.bottomRight,st,0,!0),n.lineTo(t+s,i+r.topRight),n.arc(t+s-r.topRight,i+r.topRight,r.topRight,0,-st,!0),n.lineTo(t+r.topLeft,i)}var tu=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,eu=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function iu(n,e){let t=(""+n).match(tu);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var nu=n=>+n||0;function kn(n,e){let t={},i=q(e),s=i?Object.keys(e):e,o=q(n)?i?r=>Q(n[r],n[e[r]]):r=>n[r]:()=>n;for(let r of s)t[r]=nu(o(r));return t}function wa(n){return kn(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ce(n){return kn(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ft(n){let e=wa(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ct(n,e){n=n||{},e=e||nt.font;let t=Q(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Q(n.style,e.style);i&&!(""+i).match(eu)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let s={family:Q(n.family,e.family),lineHeight:iu(Q(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Q(n.weight,e.weight),string:""};return s.string=Xd(s),s}function pi(n,e,t,i){let s=!0,o,r,a;for(o=0,r=n.length;o<r;++o)if(a=n[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),t!==void 0&&it(a)&&(a=a[t%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function Pa(n,e,t){let{min:i,max:s}=n,o=Hs(e,(s-i)/2),r=(a,l)=>t&&a===0?0:a+l;return{min:r(i,-Math.abs(o)),max:r(s,o)}}function se(n,e){return Object.assign(Object.create(n),e)}function En(n,e=[""],t,i,s=()=>n[0]){let o=t||n;typeof i>"u"&&(i=Ea("_fallback",n));let r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:s,override:a=>En([a,...n],e,o,i)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return Ma(a,l,()=>du(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return oa(a).includes(l)},ownKeys(a){return oa(a)},set(a,l,c){let h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function xe(n,e,t,i){let s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:eo(n,i),setContext:o=>xe(n,o,t,i),override:o=>xe(n.override(o),e,t,i)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete n[r],!0},get(o,r,a){return Ma(o,r,()=>ou(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(n,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,r)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,r){return Reflect.has(n,r)},ownKeys(){return Reflect.ownKeys(n)},set(o,r,a){return n[r]=a,delete o[r],!0}})}function eo(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:Ut(t)?t:()=>t,isIndexable:Ut(i)?i:()=>i}}var su=(n,e)=>n?n+xn(e):e,io=(n,e)=>q(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Ma(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let i=t();return n[e]=i,i}function ou(n,e,t){let{_proxy:i,_context:s,_subProxy:o,_descriptors:r}=n,a=i[e];return Ut(a)&&r.isScriptable(e)&&(a=ru(e,a,n,t)),it(a)&&a.length&&(a=au(e,a,n,r.isIndexable)),io(e,a)&&(a=xe(a,s,o&&o[e],r)),a}function ru(n,e,t,i){let{_proxy:s,_context:o,_subProxy:r,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(o,r||i);return a.delete(n),io(n,l)&&(l=no(s._scopes,s,n,l)),l}function au(n,e,t,i){let{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=t;if(typeof o.index<"u"&&i(n))return e[o.index%e.length];if(q(e[0])){let l=e,c=s._scopes.filter(h=>h!==l);e=[];for(let h of l){let d=no(c,s,n,h);e.push(xe(d,o,r&&r[n],a))}}return e}function ka(n,e,t){return Ut(n)?n(e,t):n}var lu=(n,e)=>n===!0?e:typeof n=="string"?Ne(e,n):void 0;function cu(n,e,t,i,s){for(let o of e){let r=lu(t,o);if(r){n.add(r);let a=ka(r._fallback,t,s);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(r===!1&&typeof i<"u"&&t!==i)return null}return!1}function no(n,e,t,i){let s=e._rootScopes,o=ka(e._fallback,t,i),r=[...n,...s],a=new Set;a.add(i);let l=sa(a,r,t,o||t,i);return l===null||typeof o<"u"&&o!==t&&(l=sa(a,r,o,l,i),l===null)?!1:En(Array.from(a),[""],s,o,()=>hu(e,t,i))}function sa(n,e,t,i,s){for(;t;)t=cu(n,e,t,i,s);return t}function hu(n,e,t){let i=n._getTarget();e in i||(i[e]={});let s=i[e];return it(s)&&q(t)?t:s||{}}function du(n,e,t,i){let s;for(let o of e)if(s=Ea(su(o,n),t),typeof s<"u")return io(n,s)?no(t,i,n,s):s}function Ea(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function oa(n){let e=n._keys;return e||(e=n._keys=uu(n._scopes)),e}function uu(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}var xm=Number.EPSILON||1e-14;function Tn(){return typeof window<"u"&&typeof document<"u"}function An(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function yn(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var On=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function fu(n,e){return On(n).getPropertyValue(e)}var pu=["top","right","bottom","left"];function ye(n,e,t){let i={};t=t?"-"+t:"";for(let s=0;s<4;s++){let o=pu[s];i[o]=parseFloat(n[e+"-"+o+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var gu=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function mu(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:o}=i,r=!1,a,l;if(gu(s,o,n.target))a=s,l=o;else{let c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function oe(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,s=On(t),o=s.boxSizing==="border-box",r=ye(s,"padding"),a=ye(s,"border","width"),{x:l,y:c,box:h}=mu(n,t),d=r.left+(h&&a.left),u=r.top+(h&&a.top),{width:f,height:p}=e;return o&&(f-=r.width+a.width,p-=r.height+a.height),{x:Math.round((l-d)/f*t.width/i),y:Math.round((c-u)/p*t.height/i)}}function _u(n,e,t){let i,s;if(e===void 0||t===void 0){let o=n&&An(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{let r=o.getBoundingClientRect(),a=On(o),l=ye(a,"border","width"),c=ye(a,"padding");e=r.width-c.width-l.width,t=r.height-c.height-l.height,i=yn(a.maxWidth,o,"clientWidth"),s=yn(a.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:i||bn,maxHeight:s||bn}}var gn=n=>Math.round(n*10)/10;function Ta(n,e,t,i){let s=On(n),o=ye(s,"margin"),r=yn(s.maxWidth,n,"clientWidth")||bn,a=yn(s.maxHeight,n,"clientHeight")||bn,l=_u(n,e,t),{width:c,height:h}=l;if(s.boxSizing==="content-box"){let u=ye(s,"border","width"),f=ye(s,"padding");c-=f.width+u.width,h-=f.height+u.height}return c=Math.max(0,c-o.width),h=Math.max(0,i?c/i:h-o.height),c=gn(Math.min(c,r,l.maxWidth)),h=gn(Math.min(h,a,l.maxHeight)),c&&!h&&(h=gn(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=gn(Math.floor(h*i))),{width:c,height:h}}function so(n,e,t){let i=e||1,s=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let r=n.canvas;return r.style&&(t||!r.style.height&&!r.style.width)&&(r.style.height=`${n.height}px`,r.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||r.height!==s||r.width!==o?(n.currentDevicePixelRatio=i,r.height=s,r.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var Aa=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};Tn()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function oo(n,e){let t=fu(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}var bu=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},yu=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function we(n,e,t){return n?bu(e,t):yu()}function ro(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function ao(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function mn(n,e,t){return n.options.clip?n[t]:e[t]}function xu(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:mn(t,e,"left"),right:mn(t,e,"right"),top:mn(i,e,"top"),bottom:mn(i,e,"bottom")}:e}function Oa(n,e){let t=e._clip;if(t.disabled)return!1;let i=xu(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}var go=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){let o=t.listeners[s],r=t.duration;o.forEach(a=>a({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(i-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Ys.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;let o=i.items,r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),o.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},jt=new go,Da="transparent",vu={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=Gs(n||Da),s=i.valid&&Gs(e||Da);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},mo=class{constructor(e,t,i,s){let o=t[i];s=pi([e.to,s,o,e.from]);let r=pi([e.from,o,s]);this._active=!0,this._fn=e.fn||vu[e.type||typeof r],this._easing=Ie[e.easing]||Ie.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let s=this._target[this._prop],o=i-this._start,r=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=pi([e.to,t,s,e.from]),this._from=pi([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to,l;if(this._active=o!==a&&(r||t<i),!this._active){this._target[s]=a,this._notify(!0);return}if(t<0){this._target[s]=o;return}l=t/i%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}},zn=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!q(e))return;let t=Object.keys(nt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{let o=e[s];if(!q(o))return;let r={};for(let a of t)r[a]=o[a];(it(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,r)})})}_animateOptions(e,t){let i=t.options,s=Cu(e,i);if(!s)return[];let o=this._createAnimations(s,i);return i.$shared&&Su(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,t){let i=this._properties,s=[],o=e.$animations||(e.$animations={}),r=Object.keys(t),a=Date.now(),l;for(l=r.length-1;l>=0;--l){let c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,t));continue}let h=t[c],d=o[c],u=i.get(c);if(d)if(u&&d.active()){d.update(u,h,a);continue}else d.cancel();if(!u||!u.duration){e[c]=h;continue}o[c]=d=new mo(u,e,c,h),s.push(d)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return jt.add(this._chart,i),!0}};function Su(n,e){let t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){let o=n[i[s]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function Cu(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Ia(n,e){let t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:i?o:s,end:i?s:o}}function wu(n,e,t){if(t===!1)return!1;let i=Ia(n,t),s=Ia(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function Pu(n){let e,t,i,s;return q(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function wl(n,e){let t=[],i=n._getSortedDatasetMetas(e),s,o;for(s=0,o=i.length;s<o;++s)t.push(i[s].index);return t}function Ra(n,e,t,i={}){let s=n.keys,o=i.mode==="single",r,a,l,c;if(e===null)return;let h=!1;for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===t){if(h=!0,i.all)continue;break}c=n.values[l],lt(c)&&(o||e===0||ai(e)===ai(c))&&(e+=c)}return!h&&!i.all?0:e}function Mu(n,e){let{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",r=Object.keys(n),a=new Array(r.length),l,c,h;for(l=0,c=r.length;l<c;++l)h=r[l],a[l]={[s]:h,[o]:n[h]};return a}function lo(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function ku(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Eu(n){let{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function Tu(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function La(n,e,t,i){for(let s of e.getMatchingVisibleMetas(i).reverse()){let o=n[s.index];if(t&&o>0||!t&&o<0)return s.index}return null}function Na(n,e){let{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:o,vScale:r,index:a}=i,l=o.axis,c=r.axis,h=ku(o,r,i),d=e.length,u;for(let f=0;f<d;++f){let p=e[f],{[l]:g,[c]:m}=p,_=p._stacks||(p._stacks={});u=_[c]=Tu(s,h,g),u[a]=m,u._top=La(u,r,!0,i.type),u._bottom=La(u,r,!1,i.type);let b=u._visualValues||(u._visualValues={});b[a]=m}}function co(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function Au(n,e){return se(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Ou(n,e,t){return se(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function gi(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let s of e){let o=s._stacks;if(!o||o[i]===void 0||o[i][t]===void 0)return;delete o[i][t],o[i]._visualValues!==void 0&&o[i]._visualValues[t]!==void 0&&delete o[i]._visualValues[t]}}}var ho=n=>n==="reset"||n==="none",Fa=(n,e)=>e?n:Object.assign({},n),Du=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:wl(t,!0),values:null},Pl=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=lo(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&gi(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,s=this.getDataset(),o=(u,f,p,g)=>u==="x"?f:u==="r"?g:p,r=i.xAxisID=Q(s.xAxisID,co(t,"x")),a=i.yAxisID=Q(s.yAxisID,co(t,"y")),l=i.rAxisID=Q(s.rAxisID,co(t,"r")),c=i.indexAxis,h=i.iAxisID=o(c,r,a,l),d=i.vAxisID=o(c,a,r,l);i.xScale=this.getScaleForId(r),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(h),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Ks(this._data,this),t._stacked&&gi(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),s=this._data;if(q(i)){let o=this._cachedMeta;this._data=Mu(i,o)}else if(s!==i){if(s){Ks(s,this);let o=this._cachedMeta;gi(o),o._parsed=[]}i&&Object.isExtensible(i)&&_a(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,s=this.getDataset(),o=!1;this._dataCheck();let r=i._stacked;i._stacked=lo(i.vScale,i),i.stack!==s.stack&&(o=!0,gi(i),i.stack=s.stack),this._resyncElements(t),(o||r!==i._stacked)&&(Na(this,i._parsed),i._stacked=lo(i.vScale,i))}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:s,_data:o}=this,{iScale:r,_stacked:a}=s,l=r.axis,c=t===0&&i===o.length?!0:s._sorted,h=t>0&&s._parsed[t-1],d,u,f;if(this._parsing===!1)s._parsed=o,s._sorted=!0,f=o;else{it(o[t])?f=this.parseArrayData(s,o,t,i):q(o[t])?f=this.parseObjectData(s,o,t,i):f=this.parsePrimitiveData(s,o,t,i);let p=()=>u[l]===null||h&&u[l]<h[l];for(d=0;d<i;++d)s._parsed[d+t]=u=f[d],c&&(p()&&(c=!1),h=u);s._sorted=c}a&&Na(this,f)}parsePrimitiveData(t,i,s,o){let{iScale:r,vScale:a}=t,l=r.axis,c=a.axis,h=r.getLabels(),d=r===a,u=new Array(o),f,p,g;for(f=0,p=o;f<p;++f)g=f+s,u[f]={[l]:d||r.parse(h[g],g),[c]:a.parse(i[g],g)};return u}parseArrayData(t,i,s,o){let{xScale:r,yScale:a}=t,l=new Array(o),c,h,d,u;for(c=0,h=o;c<h;++c)d=c+s,u=i[d],l[c]={x:r.parse(u[0],d),y:a.parse(u[1],d)};return l}parseObjectData(t,i,s,o){let{xScale:r,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=new Array(o),d,u,f,p;for(d=0,u=o;d<u;++d)f=d+s,p=i[f],h[d]={x:r.parse(Ne(p,l),f),y:a.parse(Ne(p,c),f)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,s){let o=this.chart,r=this._cachedMeta,a=i[t.axis],l={keys:wl(o,!0),values:i._stacks[t.axis]._visualValues};return Ra(l,a,r.index,{mode:s})}updateRangeFromParsed(t,i,s,o){let r=s[i.axis],a=r===null?NaN:r,l=o&&s._stacks[i.axis];o&&l&&(o.values=l,a=Ra(o,r,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let s=this._cachedMeta,o=s._parsed,r=s._sorted&&t===s.iScale,a=o.length,l=this._getOtherScale(t),c=Du(i,s,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:u}=Eu(l),f,p;function g(){p=o[f];let m=p[l.axis];return!lt(p[t.axis])||d>m||u<m}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(h,t,p,c),r));++f);if(r){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(h,t,p,c);break}}return h}getAllParsedValues(t){let i=this._cachedMeta._parsed,s=[],o,r,a;for(o=0,r=i.length;o<r;++o)a=i[o][t.axis],lt(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,s=i.iScale,o=i.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:o?""+o.getLabelForValue(r[o.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=Pu(Q(this.options.clip,wu(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,s=this._cachedMeta,o=s.data||[],r=i.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||o.length-l,h=this.options.drawActiveElementsOnTop,d;for(s.dataset&&s.dataset.draw(t,r,l,c),d=l;d<l+c;++d){let u=o[d];u.hidden||(u.active&&h?a.push(u):u.draw(t,r))}for(d=0;d<a.length;++d)a[d].draw(t,r)}getStyle(t,i){let s=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,i,s){let o=this.getDataset(),r;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];r=a.$context||(a.$context=Ou(this.getContext(),t,a)),r.parsed=this.getParsed(t),r.raw=o.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Au(this.chart.getContext(),this.index)),r.dataset=o,r.index=r.datasetIndex=this.index;return r.active=!!i,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",s){let o=i==="active",r=this._cachedDataOpts,a=t+"-"+i,l=r[a],c=this.enableOptionSharing&&ri(s);if(l)return Fa(l,c);let h=this.chart.config,d=h.datasetElementScopeKeys(this._type,t),u=o?[`${t}Hover`,"hover",t,""]:[t,""],f=h.getOptionScopes(this.getDataset(),d),p=Object.keys(nt.elements[t]),g=()=>this.getContext(s,o,i),m=h.resolveNamedOptions(f,p,g,u);return m.$shared&&(m.$shared=c,r[a]=Object.freeze(Fa(m,c))),m}_resolveAnimations(t,i,s){let o=this.chart,r=this._cachedDataOpts,a=`animation-${i}`,l=r[a];if(l)return l;let c;if(o.options.animation!==!1){let d=this.chart.config,u=d.datasetAnimationScopeKeys(this._type,i),f=d.getOptionScopes(this.getDataset(),u);c=d.createResolver(f,this.getContext(t,s,i))}let h=new zn(o,c&&c.animations);return c&&c._cacheable&&(r[a]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||ho(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let s=this.resolveDataElementOptions(t,i),o=this._sharedOptions,r=this.getSharedOptions(s),a=this.includeOptions(i,r)||r!==o;return this.updateSharedOptions(r,i,s),{sharedOptions:r,includeOptions:a}}updateElement(t,i,s,o){ho(o)?Object.assign(t,s):this._resolveAnimations(i,o).update(t,s)}updateSharedOptions(t,i,s){t&&!ho(i)&&this._resolveAnimations(void 0,i).update(t,s)}_setStyle(t,i,s,o){t.active=o;let r=this.getStyle(i,o);this._resolveAnimations(i,s,o).update(t,{options:!o&&this.getSharedOptions(r)||r})}removeHoverStyle(t,i,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,i,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,s=this._cachedMeta.data;for(let[l,c,h]of this._syncList)this[l](c,h);this._syncList=[];let o=s.length,r=i.length,a=Math.min(r,o);a&&this.parse(0,a),r>o?this._insertElements(o,r-o,t):r<o&&this._removeElements(r,o-r)}_insertElements(t,i,s=!0){let o=this._cachedMeta,r=o.data,a=t+i,l,c=h=>{for(h.length+=i,l=h.length-1;l>=a;l--)h[l]=h[l-i]};for(c(r),l=t;l<a;++l)r[l]=new this.dataElementType;this._parsing&&c(o._parsed),this.parse(t,i),s&&this.updateElements(r,t,i,"reset")}updateElements(t,i,s,o){}_removeElements(t,i){let s=this._cachedMeta;if(this._parsing){let o=s._parsed.splice(t,i);s._stacked&&gi(s,o)}s.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,s,o]=t;this[i](s,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function Iu(n,e,t){let i=1,s=1,o=0,r=0;if(e<et){let a=n,l=a+e,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),u=Math.sin(l),f=(w,C,S)=>hi(w,a,l,!0)?1:Math.max(C,C*t,S,S*t),p=(w,C,S)=>hi(w,a,l,!0)?-1:Math.min(C,C*t,S,S*t),g=f(0,c,d),m=f(st,h,u),_=p(ot,c,d),b=p(ot+st,h,u);i=(g-_)/2,s=(m-b)/2,o=-(g+_)/2,r=-(m+b)/2}return{ratioX:i,ratioY:s,offsetX:o,offsetY:r}}var Ru=(()=>{class n extends Pl{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:s,color:o}}=t.legend.options;return i.labels.map((r,a)=>{let c=t.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:o,lineWidth:c.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,s){s.chart.toggleDataVisibility(i.index),s.chart.update()}}}};constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let s=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=s;else{let r=c=>+s[c];if(q(s[t])){let{key:c="value"}=this._parsing;r=h=>+Ne(s[h],c)}let a,l;for(a=t,l=t+i;a<l;++a)o._parsed[a]=r(a)}}_getRotation(){return At(this.options.rotation-90)}_getCircumference(){return At(this.options.circumference)}_getRotationExtents(){let t=et,i=-et;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){let o=this.chart.getDatasetMeta(s).controller,r=o._getRotation(),a=o._getCircumference();t=Math.min(t,r),i=Math.max(i,r+a)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:s}=i,o=this._cachedMeta,r=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(aa(this.options.cutout,l),1),h=this._getRingWeight(this.index),{circumference:d,rotation:u}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=Iu(u,d,c),_=(s.width-a)/f,b=(s.height-a)/p,w=Math.max(Math.min(_,b)/2,0),C=Hs(this.options.radius,w),S=Math.max(C*c,0),k=(C-S)/this._getVisibleDatasetWeightTotal();this.offsetX=g*C,this.offsetY=m*C,o.total=this.calculateTotal(),this.outerRadius=C-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*h,0),this.updateElements(r,0,r.length,t)}_circumference(t,i){let s=this.options,o=this._cachedMeta,r=this._getCircumference();return i&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*r/et)}updateElements(t,i,s,o){let r=o==="reset",a=this.chart,l=a.chartArea,h=a.options.animation,d=(l.left+l.right)/2,u=(l.top+l.bottom)/2,f=r&&h.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:m,includeOptions:_}=this._getSharedOptions(i,o),b=this._getRotation(),w;for(w=0;w<i;++w)b+=this._circumference(w,r);for(w=i;w<i+s;++w){let C=this._circumference(w,r),S=t[w],k={x:d+this.offsetX,y:u+this.offsetY,startAngle:b,endAngle:b+C,circumference:C,outerRadius:g,innerRadius:p};_&&(k.options=m||this.resolveDataElementOptions(w,S.active?"active":o)),b+=C,this.updateElement(S,w,k,o)}}calculateTotal(){let t=this._cachedMeta,i=t.data,s=0,o;for(o=0;o<i.length;o++){let r=t._parsed[o];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(o)&&!i[o].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?et*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,s=this.chart,o=s.data.labels||[],r=di(i._parsed[t],s.options.locale);return{label:o[t]||"",value:r}}getMaxBorderWidth(t){let i=0,s=this.chart,o,r,a,l,c;if(!t){for(o=0,r=s.data.datasets.length;o<r;++o)if(s.isDatasetVisible(o)){a=s.getDatasetMeta(o),t=a.data,l=a.controller;break}}if(!t)return 0;for(o=0,r=t.length;o<r;++o)c=l.resolveDataElementOptions(o),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let s=0,o=t.length;s<o;++s){let r=this.resolveDataElementOptions(s);i=Math.max(i,r.offset||0,r.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(i+=this._getRingWeight(s));return i}_getRingWeight(t){return Math.max(Q(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})();var Ml=(()=>{class n extends Ru{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})();function Pe(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var _o=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Pe()}parse(){return Pe()}format(){return Pe()}add(){return Pe()}diff(){return Pe()}startOf(){return Pe()}endOf(){return Pe()}},Lu={_date:_o};function Nu(n,e,t,i){let{controller:s,data:o,_sorted:r}=n,a=s._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&r&&o.length){let c=a._reversePixels?pa:Cn;if(i){if(s._sharedOptions){let h=o[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){let u=c(o,e,t-d),f=c(o,e,t+d);return{lo:u.lo,hi:f.hi}}}}else{let h=c(o,e,t);if(l){let{vScale:d}=s._cachedMeta,{_parsed:u}=n,f=u.slice(0,h.lo+1).reverse().findIndex(g=>!J(g[d.axis]));h.lo-=Math.max(0,f);let p=u.slice(h.hi).findIndex(g=>!J(g[d.axis]));h.hi+=Math.max(0,p)}return h}}return{lo:0,hi:o.length-1}}function wi(n,e,t,i,s){let o=n.getSortedVisibleDatasetMetas(),r=t[e];for(let a=0,l=o.length;a<l;++a){let{index:c,data:h}=o[a],{lo:d,hi:u}=Nu(o[a],e,r,s);for(let f=d;f<=u;++f){let p=h[f];p.skip||i(p,c,f)}}}function Fu(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){let o=e?Math.abs(i.x-s.x):0,r=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function uo(n,e,t,i,s){let o=[];return!s&&!n.isPointInArea(e)||wi(n,t,e,function(a,l,c){!s&&!ve(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function Vu(n,e,t,i){let s=[];function o(r,a,l){let{startAngle:c,endAngle:h}=r.getProps(["startAngle","endAngle"],i),{angle:d}=qs(r,{x:e.x,y:e.y});hi(d,c,h)&&s.push({element:r,datasetIndex:a,index:l})}return wi(n,t,e,o),s}function zu(n,e,t,i,s,o){let r=[],a=Fu(t),l=Number.POSITIVE_INFINITY;function c(h,d,u){let f=h.inRange(e.x,e.y,s);if(i&&!f)return;let p=h.getCenterPoint(s);if(!(!!o||n.isPointInArea(p))&&!f)return;let m=a(e,p);m<l?(r=[{element:h,datasetIndex:d,index:u}],l=m):m===l&&r.push({element:h,datasetIndex:d,index:u})}return wi(n,t,e,c),r}function fo(n,e,t,i,s,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!i?Vu(n,e,t,s):zu(n,e,t,i,s,o)}function Va(n,e,t,i,s){let o=[],r=t==="x"?"inXRange":"inYRange",a=!1;return wi(n,t,e,(l,c,h)=>{l[r]&&l[r](e[t],s)&&(o.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:o}var Bu={evaluateInteractionItems:wi,modes:{index(n,e,t,i){let s=oe(e,n),o=t.axis||"x",r=t.includeInvisible||!1,a=t.intersect?uo(n,s,o,i,r):fo(n,s,o,!1,i,r),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{let h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(n,e,t,i){let s=oe(e,n),o=t.axis||"xy",r=t.includeInvisible||!1,a=t.intersect?uo(n,s,o,i,r):fo(n,s,o,!1,i,r);if(a.length>0){let l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(n,e,t,i){let s=oe(e,n),o=t.axis||"xy",r=t.includeInvisible||!1;return uo(n,s,o,i,r)},nearest(n,e,t,i){let s=oe(e,n),o=t.axis||"xy",r=t.includeInvisible||!1;return fo(n,s,o,t.intersect,i,r)},x(n,e,t,i){let s=oe(e,n);return Va(n,s,"x",t.intersect,i)},y(n,e,t,i){let s=oe(e,n);return Va(n,s,"y",t.intersect,i)}}},kl=["left","top","right","bottom"];function mi(n,e){return n.filter(t=>t.pos===e)}function za(n,e){return n.filter(t=>kl.indexOf(t.pos)===-1&&t.box.axis===e)}function _i(n,e){return n.sort((t,i)=>{let s=e?i:t,o=e?t:i;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function Hu(n){let e=[],t,i,s,o,r,a;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:o,options:{stack:r,stackWeight:a=1}}=s,e.push({index:t,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return e}function Uu(n){let e={};for(let t of n){let{stack:i,pos:s,stackWeight:o}=t;if(!i||!kl.includes(s))continue;let r=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}function Wu(n,e){let t=Uu(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e,o,r,a;for(o=0,r=n.length;o<r;++o){a=n[o];let{fullSize:l}=a.box,c=t[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=h?h*s:l&&e.availableHeight)}return t}function ju(n){let e=Hu(n),t=_i(e.filter(c=>c.box.fullSize),!0),i=_i(mi(e,"left"),!0),s=_i(mi(e,"right")),o=_i(mi(e,"top"),!0),r=_i(mi(e,"bottom")),a=za(e,"x"),l=za(e,"y");return{fullSize:t,leftAndTop:i.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:mi(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function Ba(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function El(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function $u(n,e,t,i){let{pos:s,box:o}=t,r=n.maxPadding;if(!q(s)){t.size&&(n[s]-=t.size);let d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?o.height:o.width),t.size=d.size/d.count,n[s]+=t.size}o.getPadding&&El(r,o.getPadding());let a=Math.max(0,e.outerWidth-Ba(r,n,"left","right")),l=Math.max(0,e.outerHeight-Ba(r,n,"top","bottom")),c=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:h}:{same:h,other:c}}function qu(n){let e=n.maxPadding;function t(i){let s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Ku(n,e){let t=e.maxPadding;function i(s){let o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(e[r],t[r])}),o}return i(n?["left","right"]:["top","bottom"])}function xi(n,e,t,i){let s=[],o,r,a,l,c,h;for(o=0,r=n.length,c=0;o<r;++o){a=n[o],l=a.box,l.update(a.width||e.w,a.height||e.h,Ku(a.horizontal,e));let{same:d,other:u}=$u(e,t,a,i);c|=d&&s.length,h=h||u,l.fullSize||s.push(a)}return c&&xi(s,e,t,i)||h}function Dn(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function Ha(n,e,t,i){let s=t.padding,{x:o,y:r}=e;for(let a of n){let l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){let d=e.w*h,u=c.size||l.height;ri(c.start)&&(r=c.start),l.fullSize?Dn(l,s.left,r,t.outerWidth-s.right-s.left,u):Dn(l,e.left+c.placed,r,d,u),c.start=r,c.placed+=d,r=l.bottom}else{let d=e.h*h,u=c.size||l.width;ri(c.start)&&(o=c.start),l.fullSize?Dn(l,o,s.top,u,t.outerHeight-s.bottom-s.top):Dn(l,o,e.top+c.placed,u,d),c.start=o,c.placed+=d,o=l.right}}e.x=o,e.y=r}var re={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let s=ft(n.options.layout.padding),o=Math.max(e-s.width,0),r=Math.max(t-s.height,0),a=ju(n.boxes),l=a.vertical,c=a.horizontal;X(n.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let h=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/h,hBoxMaxHeight:r/2}),u=Object.assign({},s);El(u,ft(i));let f=Object.assign({maxPadding:u,w:o,h:r,x:s.left,y:s.top},s),p=Wu(l.concat(c),d);xi(a.fullSize,f,d,p),xi(l,f,d,p),xi(c,f,d,p)&&xi(l,f,d,p),qu(f),Ha(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,Ha(a.rightAndBottom,f,d,p),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},X(a.chartArea,g=>{let m=g.box;Object.assign(m,n.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},Bn=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}},bo=class extends Bn{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},Fn="$chartjs",Yu={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ua=n=>n===null||n==="";function Qu(n,e){let t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Fn]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Ua(s)){let o=oo(n,"width");o!==void 0&&(n.width=o)}if(Ua(i))if(n.style.height==="")n.height=n.width/(e||2);else{let o=oo(n,"height");o!==void 0&&(n.height=o)}return n}var Tl=Aa?{passive:!0}:!1;function Xu(n,e,t){n&&n.addEventListener(e,t,Tl)}function Gu(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,Tl)}function Zu(n,e){let t=Yu[n.type]||n.type,{x:i,y:s}=oe(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Hn(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function Ju(n,e,t){let i=n.canvas,s=new MutationObserver(o=>{let r=!1;for(let a of o)r=r||Hn(a.addedNodes,i),r=r&&!Hn(a.removedNodes,i);r&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function tf(n,e,t){let i=n.canvas,s=new MutationObserver(o=>{let r=!1;for(let a of o)r=r||Hn(a.removedNodes,i),r=r&&!Hn(a.addedNodes,i);r&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}var Si=new Map,Wa=0;function Al(){let n=window.devicePixelRatio;n!==Wa&&(Wa=n,Si.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function ef(n,e){Si.size||window.addEventListener("resize",Al),Si.set(n,e)}function nf(n){Si.delete(n),Si.size||window.removeEventListener("resize",Al)}function sf(n,e,t){let i=n.canvas,s=i&&An(i);if(!s)return;let o=Qs((a,l)=>{let c=s.clientWidth;t(a,l),c<s.clientWidth&&t()},window),r=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||o(c,h)});return r.observe(s),ef(n,o),r}function po(n,e,t){t&&t.disconnect(),e==="resize"&&nf(n)}function of(n,e,t){let i=n.canvas,s=Qs(o=>{n.ctx!==null&&t(Zu(o,n))},n);return Xu(i,e,s),s}var yo=class extends Bn{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Qu(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[Fn])return!1;let i=t[Fn].initial;["height","width"].forEach(o=>{let r=i[o];J(r)?t.removeAttribute(o):t.setAttribute(o,r)});let s=i.style||{};return Object.keys(s).forEach(o=>{t.style[o]=s[o]}),t.width=t.width,delete t[Fn],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let s=e.$proxies||(e.$proxies={}),r={attach:Ju,detach:tf,resize:sf}[t]||of;s[t]=r(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:po,detach:po,resize:po}[t]||Gu)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return Ta(e,t,i,s)}isAttached(e){let t=e&&An(e);return!!(t&&t.isConnected)}};function rf(n){return!Tn()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?bo:yo}var ke=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return ci(this.x)&&ci(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let s={};return e.forEach(o=>{s[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),s}};function af(n,e){let t=n.options.ticks,i=lf(n),s=Math.min(t.maxTicksLimit||i,i),o=t.major.enabled?hf(e):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>s)return df(e,c,o,r/s),c;let h=cf(o,e,s);if(r>0){let d,u,f=r>1?Math.round((l-a)/(r-1)):null;for(In(e,c,h,J(f)?0:a-f,a),d=0,u=r-1;d<u;d++)In(e,c,h,o[d],o[d+1]);return In(e,c,h,l,J(f)?e.length:l+f),c}return In(e,c,h),c}function lf(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function cf(n,e,t){let i=uf(n),s=e.length/t;if(!i)return Math.max(s,1);let o=ha(i);for(let r=0,a=o.length-1;r<a;r++){let l=o[r];if(l>s)return l}return Math.max(s,1)}function hf(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function df(n,e,t,i){let s=0,o=t[0],r;for(i=Math.ceil(i),r=0;r<n.length;r++)r===o&&(e.push(n[r]),s++,o=t[s*i])}function In(n,e,t,i,s){let o=Q(i,0),r=Math.min(Q(s,n.length),n.length),a=0,l,c,h;for(t=Math.ceil(t),s&&(l=s-i,t=l/Math.floor(l/t)),h=o;h<0;)a++,h=Math.round(o+a*t);for(c=Math.max(o,0);c<r;c++)c===h&&(e.push(n[c]),a++,h=Math.round(o+a*t))}function uf(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var ff=n=>n==="left"?"right":n==="right"?"left":n,ja=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,$a=(n,e)=>Math.min(e||n,n);function qa(n,e){let t=[],i=n.length/e,s=n.length,o=0;for(;o<s;o+=i)t.push(n[Math.floor(o)]);return t}function pf(n,e,t){let i=n.ticks.length,s=Math.min(e,i-1),o=n._startPixel,r=n._endPixel,a=1e-6,l=n.getPixelForTick(s),c;if(!(t&&(i===1?c=Math.max(l-o,r-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<o-a||l>r+a)))return l}function gf(n,e){X(n,t=>{let i=t.gc,s=i.length/2,o;if(s>e){for(o=0;o<s;++o)delete t.data[i[o]];i.splice(0,s)}})}function bi(n){return n.drawTicks?n.tickLength:0}function Ka(n,e){if(!n.display)return 0;let t=ct(n.font,e),i=ft(n.padding);return(it(n.text)?n.text.length:1)*t.lineHeight+i.height}function mf(n,e){return se(n,{scale:e,type:"scale"})}function _f(n,e,t){return se(n,{tick:t,index:e,type:"tick"})}function bf(n,e,t){let i=Xs(n);return(t&&e!=="right"||!t&&e==="right")&&(i=ff(i)),i}function yf(n,e,t,i){let{top:s,left:o,bottom:r,right:a,chart:l}=n,{chartArea:c,scales:h}=l,d=0,u,f,p,g=r-s,m=a-o;if(n.isHorizontal()){if(f=_t(i,o,a),q(t)){let _=Object.keys(t)[0],b=t[_];p=h[_].getPixelForValue(b)+g-e}else t==="center"?p=(c.bottom+c.top)/2+g-e:p=ja(n,t,e);u=a-o}else{if(q(t)){let _=Object.keys(t)[0],b=t[_];f=h[_].getPixelForValue(b)-m+e}else t==="center"?f=(c.left+c.right)/2-m+e:f=ja(n,t,e);p=_t(i,r,s),d=t==="left"?-st:st}return{titleX:f,titleY:p,maxWidth:u,rotation:d}}var Be=class n extends ke{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=mt(e,Number.POSITIVE_INFINITY),t=mt(t,Number.NEGATIVE_INFINITY),i=mt(i,Number.POSITIVE_INFINITY),s=mt(s,Number.NEGATIVE_INFINITY),{min:mt(e,i),max:mt(t,s),minDefined:lt(e),maxDefined:lt(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,e),s||(t=Math.min(t,r.min)),o||(i=Math.max(i,r.max));return t=o&&t>i?i:t,i=s&&t>i?t:i,{min:mt(t,mt(i,t)),max:mt(i,mt(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){G(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Pa(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?qa(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=af(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){G(this.options.afterUpdate,[this])}beforeSetDimensions(){G(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){G(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),G(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){G(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,s,o;for(i=0,s=e.length;i<s;i++)o=e[i],o.label=G(t.callback,[o.value,i,e],this)}afterTickToLabelConversion(){G(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){G(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=$a(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,o=t.maxRotation,r=s,a,l,c;if(!this._isVisible()||!t.display||s>=o||i<=1||!this.isHorizontal()){this.labelRotation=s;return}let h=this._getLabelSizes(),d=h.widest.width,u=h.highest.height,f=St(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),d+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-bi(e.grid)-t.padding-Ka(e.title,this.chart.options.font),c=Math.sqrt(d*d+u*u),r=vn(Math.min(Math.asin(St((h.highest.height+6)/a,-1,1)),Math.asin(St(l/c,-1,1))-Math.asin(St(u/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){G(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){G(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){let l=Ka(s,t.options.font);if(a?(e.width=this.maxWidth,e.height=bi(o)+l):(e.height=this.maxHeight,e.width=bi(o)+l),i.display&&this.ticks.length){let{first:c,last:h,widest:d,highest:u}=this._getLabelSizes(),f=i.padding*2,p=At(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){let _=i.mirror?0:m*d.width+g*u.height;e.height=Math.min(this.maxHeight,e.height+_+f)}else{let _=i.mirror?0:g*d.width+m*u.height;e.width=Math.min(this.maxWidth,e.width+_+f)}this._calculatePadding(c,h,m,g)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){let{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),u=0,f=0;l?c?(u=s*e.width,f=i*t.height):(u=i*e.height,f=s*t.width):o==="start"?f=t.width:o==="end"?u=e.width:o!=="inner"&&(u=e.width/2,f=t.width/2),this.paddingLeft=Math.max((u-h+r)*this.width/(this.width-h),0),this.paddingRight=Math.max((f-d+r)*this.width/(this.width-d),0)}else{let h=t.height/2,d=e.height/2;o==="start"?(h=0,d=e.height):o==="end"&&(h=t.height,d=0),this.paddingTop=h+r,this.paddingBottom=d+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){G(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)J(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=qa(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:s,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(t/$a(t,i)),c=0,h=0,d,u,f,p,g,m,_,b,w,C,S;for(d=0;d<t;d+=l){if(p=e[d].label,g=this._resolveTickFontOptions(d),s.font=m=g.string,_=o[m]=o[m]||{data:{},gc:[]},b=g.lineHeight,w=C=0,!J(p)&&!it(p))w=si(s,_.data,_.gc,w,p),C=b;else if(it(p))for(u=0,f=p.length;u<f;++u)S=p[u],!J(S)&&!it(S)&&(w=si(s,_.data,_.gc,w,S),C+=b);r.push(w),a.push(C),c=Math.max(w,c),h=Math.max(C,h)}gf(o,t);let k=r.indexOf(c),O=a.indexOf(h),D=R=>({width:r[R]||0,height:a[R]||0});return{first:D(0),last:D(t-1),widest:D(k),highest:D(O),widths:r,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return fa(this._alignToPixels?ne(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=_f(this.getContext(),e,i))}return this.$context||(this.$context=mf(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=At(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),o=this._getLabelSizes(),r=e.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),u=bi(o),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,_=function(v){return ne(i,v,g)},b,w,C,S,k,O,D,R,z,H,B,rt;if(r==="top")b=_(this.bottom),O=this.bottom-u,R=b-m,H=_(e.top)+m,rt=e.bottom;else if(r==="bottom")b=_(this.top),H=e.top,rt=_(e.bottom)-m,O=b+m,R=this.top+u;else if(r==="left")b=_(this.right),k=this.right-u,D=b-m,z=_(e.left)+m,B=e.right;else if(r==="right")b=_(this.left),z=e.left,B=_(e.right)-m,k=b+m,D=this.left+u;else if(t==="x"){if(r==="center")b=_((e.top+e.bottom)/2+.5);else if(q(r)){let v=Object.keys(r)[0],E=r[v];b=_(this.chart.scales[v].getPixelForValue(E))}H=e.top,rt=e.bottom,O=b+m,R=O+u}else if(t==="y"){if(r==="center")b=_((e.left+e.right)/2);else if(q(r)){let v=Object.keys(r)[0],E=r[v];b=_(this.chart.scales[v].getPixelForValue(E))}k=b-m,D=k-u,z=e.left,B=e.right}let ht=Q(s.ticks.maxTicksLimit,d),K=Math.max(1,Math.ceil(d/ht));for(w=0;w<d;w+=K){let v=this.getContext(w),E=o.setContext(v),I=a.setContext(v),L=E.lineWidth,tt=E.color,pt=I.dash||[],at=I.dashOffset,gt=E.tickWidth,Y=E.tickColor,qt=E.tickBorderDash||[],zt=E.tickBorderDashOffset;C=pf(this,w,l),C!==void 0&&(S=ne(i,C,L),c?k=D=z=B=S:O=R=H=rt=S,f.push({tx1:k,ty1:O,tx2:D,ty2:R,x1:z,y1:H,x2:B,y2:rt,width:L,color:tt,borderDash:pt,borderDashOffset:at,tickWidth:gt,tickColor:Y,tickBorderDash:qt,tickBorderDashOffset:zt}))}return this._ticksLength=d,this._borderValue=b,f}_computeLabelItems(e){let t=this.axis,i=this.options,{position:s,ticks:o}=i,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=o,u=bi(i.grid),f=u+h,p=d?-h:f,g=-At(this.labelRotation),m=[],_,b,w,C,S,k,O,D,R,z,H,B,rt="middle";if(s==="top")k=this.bottom-p,O=this._getXAxisLabelAlignment();else if(s==="bottom")k=this.top+p,O=this._getXAxisLabelAlignment();else if(s==="left"){let K=this._getYAxisLabelAlignment(u);O=K.textAlign,S=K.x}else if(s==="right"){let K=this._getYAxisLabelAlignment(u);O=K.textAlign,S=K.x}else if(t==="x"){if(s==="center")k=(e.top+e.bottom)/2+f;else if(q(s)){let K=Object.keys(s)[0],v=s[K];k=this.chart.scales[K].getPixelForValue(v)+f}O=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")S=(e.left+e.right)/2-f;else if(q(s)){let K=Object.keys(s)[0],v=s[K];S=this.chart.scales[K].getPixelForValue(v)}O=this._getYAxisLabelAlignment(u).textAlign}t==="y"&&(l==="start"?rt="top":l==="end"&&(rt="bottom"));let ht=this._getLabelSizes();for(_=0,b=a.length;_<b;++_){w=a[_],C=w.label;let K=o.setContext(this.getContext(_));D=this.getPixelForTick(_)+o.labelOffset,R=this._resolveTickFontOptions(_),z=R.lineHeight,H=it(C)?C.length:1;let v=H/2,E=K.color,I=K.textStrokeColor,L=K.textStrokeWidth,tt=O;r?(S=D,O==="inner"&&(_===b-1?tt=this.options.reverse?"left":"right":_===0?tt=this.options.reverse?"right":"left":tt="center"),s==="top"?c==="near"||g!==0?B=-H*z+z/2:c==="center"?B=-ht.highest.height/2-v*z+z:B=-ht.highest.height+z/2:c==="near"||g!==0?B=z/2:c==="center"?B=ht.highest.height/2-v*z:B=ht.highest.height-H*z,d&&(B*=-1),g!==0&&!K.showLabelBackdrop&&(S+=z/2*Math.sin(g))):(k=D,B=(1-H)*z/2);let pt;if(K.showLabelBackdrop){let at=ft(K.backdropPadding),gt=ht.heights[_],Y=ht.widths[_],qt=B-at.top,zt=0-at.left;switch(rt){case"middle":qt-=gt/2;break;case"bottom":qt-=gt;break}switch(O){case"center":zt-=Y/2;break;case"right":zt-=Y;break;case"inner":_===b-1?zt-=Y:_>0&&(zt-=Y/2);break}pt={left:zt,top:qt,width:Y+at.width,height:gt+at.height,color:K.backdropColor}}m.push({label:C,font:R,textOffset:B,options:{rotation:g,color:E,strokeColor:I,strokeWidth:L,textAlign:tt,textBaseline:rt,translation:[S,k],backdrop:pt}})}return m}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-At(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=e+o,l=r.widest.width,c,h;return t==="left"?s?(h=this.right+o,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):t==="right"?s?(h=this.left+o,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:s,width:o,height:r}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,o,r),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let s=this.ticks.findIndex(o=>o.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o,r,a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(o=0,r=s.length;o<r;++o){let l=s[o];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:s}}=this,o=i.setContext(this.getContext()),r=i.display?o.width:0;if(!r)return;let a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,h,d,u;this.isHorizontal()?(c=ne(e,this.left,r)-r/2,h=ne(e,this.right,a)+a/2,d=u=l):(d=ne(e,this.top,r)-r/2,u=ne(e,this.bottom,a)+a/2,c=h=l),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(c,d),t.lineTo(h,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,s=this._computeLabelArea();s&&Pn(i,s);let o=this.getLabelItems(e);for(let r of o){let a=r.options,l=r.font,c=r.label,h=r.textOffset;Se(i,c,0,h,l,a)}s&&Mn(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;let o=ct(i.font),r=ft(i.padding),a=i.align,l=o.lineHeight/2;t==="bottom"||t==="center"||q(t)?(l+=r.bottom,it(i.text)&&(l+=o.lineHeight*(i.text.length-1))):l+=r.top;let{titleX:c,titleY:h,maxWidth:d,rotation:u}=yf(this,l,t,a);Se(e,i.text,0,0,o,{color:i.color,maxWidth:d,rotation:u,textAlign:bf(a,t,s),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=Q(e.grid&&e.grid.z,-1),s=Q(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[],o,r;for(o=0,r=t.length;o<r;++o){let a=t[o];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return ct(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},ze=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;Sf(t)&&(i=this.register(t));let s=this.items,o=e.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in s||(s[o]=e,xf(e,r,i),this.override&&nt.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in nt[s]&&(delete nt[s][i],this.override&&delete ie[i])}};function xf(n,e,t){let i=Re(Object.create(null),[t?nt.get(t):{},nt.get(e),n.defaults]);nt.set(e,i),n.defaultRoutes&&vf(e,n.defaultRoutes),n.descriptors&&nt.describe(e,n.descriptors)}function vf(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),s=i.pop(),o=[n].concat(i).join("."),r=e[t].split("."),a=r.pop(),l=r.join(".");nt.route(o,s,l,a)})}function Sf(n){return"id"in n&&"defaults"in n}var xo=class{constructor(){this.controllers=new ze(Pl,"datasets",!0),this.elements=new ze(ke,"elements"),this.plugins=new ze(Object,"plugins"),this.scales=new ze(Be,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{let o=i||this._getRegistryForType(s);i||o.isForType(s)||o===this.plugins&&s.id?this._exec(e,o,s):X(s,r=>{let a=i||this._getRegistryForType(r);this._exec(e,a,r)})})}_exec(e,t,i){let s=xn(e);G(i["before"+s],[],i),t[e](i),G(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}},Vt=new xo,vo=class{constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let o=s?this._descriptors(e).filter(s):this._descriptors(e),r=this._notify(o,e,t,i);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,t,i,s){s=s||{};for(let o of e){let r=o.plugin,a=r[i],l=[t,s,o.options];if(G(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){J(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,s=Q(i.options&&i.options.plugins,{}),o=Cf(i);return s===!1&&!t?[]:Pf(e,o,s,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}};function Cf(n){let e={},t=[],i=Object.keys(Vt.plugins.items);for(let o=0;o<i.length;o++)t.push(Vt.getPlugin(i[o]));let s=n.plugins||[];for(let o=0;o<s.length;o++){let r=s[o];t.indexOf(r)===-1&&(t.push(r),e[r.id]=!0)}return{plugins:t,localIds:e}}function wf(n,e){return!e&&n===!1?null:n===!0?{}:n}function Pf(n,{plugins:e,localIds:t},i,s){let o=[],r=n.getContext();for(let a of e){let l=a.id,c=wf(i[l],s);c!==null&&o.push({plugin:a,options:Mf(n.config,{plugin:a,local:t[l]},c,r)})}return o}function Mf(n,{plugin:e,local:t},i,s){let o=n.pluginScopeKeys(e),r=n.getOptionScopes(i,o);return t&&e.defaults&&r.push(e.defaults),n.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function So(n,e){let t=nt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function kf(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function Ef(n,e){return n===e?"_index_":"_value_"}function Ya(n){if(n==="x"||n==="y"||n==="r")return n}function Tf(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Co(n,...e){if(Ya(n))return n;for(let t of e){let i=t.axis||Tf(t.position)||n.length>1&&Ya(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Qa(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function Af(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return Qa(n,"x",t[0])||Qa(n,"y",t[0])}return{}}function Of(n,e){let t=ie[n.type]||{scales:{}},i=e.scales||{},s=So(n.type,e),o=Object.create(null);return Object.keys(i).forEach(r=>{let a=i[r];if(!q(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);let l=Co(r,a,Af(r,n),nt.scales[a.type]),c=Ef(l,s),h=t.scales||{};o[r]=Le(Object.create(null),[{axis:l},a,h[l],h[c]])}),n.data.datasets.forEach(r=>{let a=r.type||n.type,l=r.indexAxis||So(a,e),h=(ie[a]||{}).scales||{};Object.keys(h).forEach(d=>{let u=kf(d,l),f=r[u+"AxisID"]||u;o[f]=o[f]||Object.create(null),Le(o[f],[{axis:u},i[f],h[d]])})}),Object.keys(o).forEach(r=>{let a=o[r];Le(a,[nt.scales[a.type],nt.scale])}),o}function Ol(n){let e=n.options||(n.options={});e.plugins=Q(e.plugins,{}),e.scales=Of(n,e)}function Dl(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Df(n){return n=n||{},n.data=Dl(n.data),Ol(n),n}var Xa=new Map,Il=new Set;function Rn(n,e){let t=Xa.get(n);return t||(t=e(),Xa.set(n,t),Il.add(t)),t}var yi=(n,e,t)=>{let i=Ne(e,t);i!==void 0&&n.add(i)},wo=class{constructor(e){this._config=Df(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Dl(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),Ol(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Rn(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Rn(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Rn(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return Rn(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){let{options:s,type:o}=this,r=this._cachedScopes(e,i),a=r.get(t);if(a)return a;let l=new Set;t.forEach(h=>{e&&(l.add(e),h.forEach(d=>yi(l,e,d))),h.forEach(d=>yi(l,s,d)),h.forEach(d=>yi(l,ie[o]||{},d)),h.forEach(d=>yi(l,nt,d)),h.forEach(d=>yi(l,wn,d))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Il.has(t)&&r.set(t,c),c}chartOptionScopes(){let{options:e,type:t}=this;return[e,ie[t]||{},nt.datasets[t]||{},{type:t},nt,wn]}resolveNamedOptions(e,t,i,s=[""]){let o={$shared:!0},{resolver:r,subPrefixes:a}=Ga(this._resolverCache,e,s),l=r;if(Rf(r,t)){o.$shared=!1,i=Ut(i)?i():i;let c=this.createResolver(e,i,a);l=xe(r,i,c)}for(let c of t)o[c]=l[c];return o}createResolver(e,t,i=[""],s){let{resolver:o}=Ga(this._resolverCache,e,i);return q(t)?xe(o,t,void 0,s):o}};function Ga(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let s=t.join(),o=i.get(s);return o||(o={resolver:En(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,o)),o}var If=n=>q(n)&&Object.getOwnPropertyNames(n).some(e=>Ut(n[e]));function Rf(n,e){let{isScriptable:t,isIndexable:i}=eo(n);for(let s of e){let o=t(s),r=i(s),a=(r||o)&&n[s];if(o&&(Ut(a)||If(a))||r&&it(a))return!0}return!1}var Lf="4.4.9",Nf=["top","bottom","left","right","chartArea"];function Za(n,e){return n==="top"||n==="bottom"||Nf.indexOf(n)===-1&&e==="x"}function Ja(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function tl(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),G(t&&t.onComplete,[n],e)}function Ff(n){let e=n.chart,t=e.options.animation;G(t&&t.onProgress,[n],e)}function Rl(n){return Tn()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var Vn={},el=n=>{let e=Rl(n);return Object.values(Vn).filter(t=>t.canvas===e).pop()};function Vf(n,e,t){let i=Object.keys(n);for(let s of i){let o=+s;if(o>=e){let r=n[s];delete n[s],(t>0||o>e)&&(n[o+t]=r)}}}function zf(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}var Mo=(()=>{class n{static defaults=nt;static instances=Vn;static overrides=ie;static registry=Vt;static version=Lf;static getChart=el;static register(...t){Vt.add(...t),il()}static unregister(...t){Vt.remove(...t),il()}constructor(t,i){let s=this.config=new wo(i),o=Rl(t),r=el(o);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");let a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||rf(o)),this.platform.updateConfig(s);let l=this.platform.acquireContext(o,a.aspectRatio),c=l&&l.canvas,h=c&&c.height,d=c&&c.width;if(this.id=ra(),this.ctx=l,this.canvas=c,this.width=d,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new vo,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ya(u=>this.update(u),a.resizeDelay||0),this._dataChanges=[],Vn[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}jt.listen(this,"complete",tl),jt.listen(this,"progress",Ff),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:s,height:o,_aspectRatio:r}=this;return J(t)?i&&r?r:o?s/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Vt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():so(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Zs(this.canvas,this.ctx),this}stop(){return jt.stop(this),this}resize(t,i){jt.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let s=this.options,o=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(o,t,i,r),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,so(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),G(s.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};X(i,(s,o)=>{s.id=o})}buildOrUpdateScales(){let t=this.options,i=t.scales,s=this.scales,o=Object.keys(s).reduce((a,l)=>(a[l]=!1,a),{}),r=[];i&&(r=r.concat(Object.keys(i).map(a=>{let l=i[a],c=Co(a,l),h=c==="r",d=c==="x";return{options:l,dposition:h?"chartArea":d?"bottom":"left",dtype:h?"radialLinear":d?"category":"linear"}}))),X(r,a=>{let l=a.options,c=l.id,h=Co(c,l),d=Q(l.type,a.dtype);(l.position===void 0||Za(l.position,h)!==Za(a.dposition))&&(l.position=a.dposition),o[c]=!0;let u=null;if(c in s&&s[c].type===d)u=s[c];else{let f=Vt.getScale(d);u=new f({id:c,type:d,ctx:this.ctx,chart:this}),s[u.id]=u}u.init(l,t)}),X(o,(a,l)=>{a||delete s[l]}),X(s,a=>{re.configure(this,a,a.options),re.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,s=t.length;if(t.sort((o,r)=>o.index-r.index),s>i){for(let o=i;o<s;++o)this._destroyDatasetMeta(o);t.splice(i,s-i)}this._sortedMetasets=t.slice(0).sort(Ja("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((s,o)=>{i.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,s,o;for(this._removeUnreferencedMetasets(),s=0,o=i.length;s<o;s++){let r=i[s],a=this.getDatasetMeta(s),l=r.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=l,a.indexAxis=r.indexAxis||So(l,this.options),a.order=r.order||0,a.index=s,a.label=""+r.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{let c=Vt.getController(l),{datasetElementType:h,dataElementType:d}=nt.datasets[l];Object.assign(c,{dataElementType:Vt.getElement(d),datasetElementType:h&&Vt.getElement(h)}),a.controller=new c(this,s),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){X(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let s=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,d=this.data.datasets.length;h<d;h++){let{controller:u}=this.getDatasetMeta(h),f=!o&&r.indexOf(u)===-1;u.buildOrUpdateElements(f),a=Math.max(+u.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),o||X(r,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ja("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){X(this.scales,t=>{re.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Us(i,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:s,start:o,count:r}of i){let a=s==="_removeElements"?-r:r;Vf(t,o,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,s=r=>new Set(t.filter(a=>a[0]===r).map((a,l)=>l+","+a.splice(1).join(","))),o=s(0);for(let r=1;r<i;r++)if(!Us(o,s(r)))return;return Array.from(o).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;re.update(this,this.width,this.height,t);let i=this.chartArea,s=i.width<=0||i.height<=0;this._layers=[],X(this.boxes,o=>{s&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,r)=>{o._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,s=this.data.datasets.length;i<s;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,s=this.data.datasets.length;i<s;++i)this._updateDataset(i,Ut(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let s=this.getDatasetMeta(t),o={meta:s,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(s.controller._update(i),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(jt.has(this)?this.attached&&!jt.running(this)&&jt.start(this):(this.draw(),tl({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:s,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,s=[],o,r;for(o=0,r=i.length;o<r;++o){let a=i[o];(!t||a.visible)&&s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,s={meta:t,index:t.index,cancelable:!0},o=Oa(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(o&&Pn(i,o),t.controller.draw(),o&&Mn(i),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return ve(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,s,o){let r=Bu.modes[i];return typeof r=="function"?r(this,t,s,o):[]}getDatasetMeta(t){let i=this.data.datasets[t],s=this._metasets,o=s.filter(r=>r&&r._dataset===i).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},s.push(o)),o}getContext(){return this.$context||(this.$context=se(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!i.hidden}setDatasetVisibility(t,i){let s=this.getDatasetMeta(t);s.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,s){let o=s?"show":"hide",r=this.getDatasetMeta(t),a=r.controller._resolveAnimations(void 0,o);ri(i)?(r.data[i].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),a.update(r,{visible:s}),this.update(l=>l.datasetIndex===t?o:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),jt.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Zs(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Vn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,s=(r,a)=>{i.addEventListener(this,r,a),t[r]=a},o=(r,a,l)=>{r.offsetX=a,r.offsetY=l,this._eventHandler(r)};X(this.options.events,r=>s(r,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,s=(c,h)=>{i.addEventListener(this,c,h),t[c]=h},o=(c,h)=>{t[c]&&(i.removeEventListener(this,c,h),delete t[c])},r=(c,h)=>{this.canvas&&this.resize(c,h)},a,l=()=>{o("attach",l),this.attached=!0,this.resize(),s("resize",r),s("detach",a)};a=()=>{this.attached=!1,o("resize",r),this._stop(),this._resize(0,0),s("attach",l)},i.isAttached(this.canvas)?l():a()}unbindEvents(){X(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},X(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,s){let o=s?"set":"remove",r,a,l,c;for(i==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+o+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];let h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[o+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],s=t.map(({datasetIndex:r,index:a})=>{let l=this.getDatasetMeta(r);if(!l)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:l.data[a],index:a}});!oi(s,i)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,i))}notifyPlugins(t,i,s){return this._plugins.notify(this,t,i,s)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,s){let o=this.options.hover,r=(c,h)=>c.filter(d=>!h.some(u=>d.datasetIndex===u.datasetIndex&&d.index===u.index)),a=r(i,t),l=s?t:r(t,i);a.length&&this.updateHoverStyle(a,o.mode,!1),l.length&&o.mode&&this.updateHoverStyle(l,o.mode,!0)}_eventHandler(t,i){let s={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},o=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,o)===!1)return;let r=this._handleEvent(t,i,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,o),(r||s.changed)&&this.render(),this}_handleEvent(t,i,s){let{_active:o=[],options:r}=this,a=i,l=this._getActiveElements(t,o,s,a),c=ca(t),h=zf(t,this._lastEvent,s,c);s&&(this._lastEvent=null,G(r.onHover,[t,l,this],this),c&&G(r.onClick,[t,l,this],this));let d=!oi(l,o);return(d||i)&&(this._active=l,this._updateHoverStyles(l,o,i)),this._lastEvent=h,d}_getActiveElements(t,i,s,o){if(t.type==="mouseout")return[];if(!s)return i;let r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,o)}}return n})();function il(){return X(Mo.instances,n=>n._plugins.invalidate())}function Bf(n,e,t){let{startAngle:i,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=e,c=s/a;n.beginPath(),n.arc(o,r,a,i-c,t+c),l>s?(c=s/l,n.arc(o,r,l,t+c,i-c,!0)):n.arc(o,r,s,t+st,i-st),n.closePath(),n.clip()}function Hf(n){return kn(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Uf(n,e,t,i){let s=Hf(n.options.borderRadius),o=(t-e)/2,r=Math.min(o,i*e/2),a=l=>{let c=(t-Math.min(o,l))*i/2;return St(l,0,Math.min(o,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:St(s.innerStart,0,r),innerEnd:St(s.innerEnd,0,r)}}function Ve(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function Un(n,e,t,i,s,o){let{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,d=Math.max(e.outerRadius+i+t-c,0),u=h>0?h+i+t+c:0,f=0,p=s-l;if(i){let K=h>0?h-i:0,v=d>0?d-i:0,E=(K+v)/2,I=E!==0?p*E/(E+i):p;f=(p-I)/2}let g=Math.max(.001,p*d-t/ot)/d,m=(p-g)/2,_=l+m+f,b=s-m-f,{outerStart:w,outerEnd:C,innerStart:S,innerEnd:k}=Uf(e,u,d,b-_),O=d-w,D=d-C,R=_+w/O,z=b-C/D,H=u+S,B=u+k,rt=_+S/H,ht=b-k/B;if(n.beginPath(),o){let K=(R+z)/2;if(n.arc(r,a,d,R,K),n.arc(r,a,d,K,z),C>0){let L=Ve(D,z,r,a);n.arc(L.x,L.y,C,z,b+st)}let v=Ve(B,b,r,a);if(n.lineTo(v.x,v.y),k>0){let L=Ve(B,ht,r,a);n.arc(L.x,L.y,k,b+st,ht+Math.PI)}let E=(b-k/u+(_+S/u))/2;if(n.arc(r,a,u,b-k/u,E,!0),n.arc(r,a,u,E,_+S/u,!0),S>0){let L=Ve(H,rt,r,a);n.arc(L.x,L.y,S,rt+Math.PI,_-st)}let I=Ve(O,_,r,a);if(n.lineTo(I.x,I.y),w>0){let L=Ve(O,R,r,a);n.arc(L.x,L.y,w,_-st,R)}}else{n.moveTo(r,a);let K=Math.cos(R)*d+r,v=Math.sin(R)*d+a;n.lineTo(K,v);let E=Math.cos(z)*d+r,I=Math.sin(z)*d+a;n.lineTo(E,I)}n.closePath()}function Wf(n,e,t,i,s){let{fullCircles:o,startAngle:r,circumference:a}=e,l=e.endAngle;if(o){Un(n,e,t,i,l,s);for(let c=0;c<o;++c)n.fill();isNaN(a)||(l=r+(a%et||et))}return Un(n,e,t,i,l,s),n.fill(),l}function jf(n,e,t,i,s){let{fullCircles:o,startAngle:r,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:u}=l,f=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=u,f?(n.lineWidth=c*2,n.lineJoin=h||"round"):(n.lineWidth=c,n.lineJoin=h||"bevel");let p=e.endAngle;if(o){Un(n,e,t,i,p,s);for(let g=0;g<o;++g)n.stroke();isNaN(a)||(p=r+(a%et||et))}f&&Bf(n,e,p),o||(Un(n,e,t,i,p,s),n.stroke())}var Wn=class extends ke{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){let s=this.getProps(["x","y"],i),{angle:o,distance:r}=qs(s,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=(this.options.spacing+this.options.borderWidth)/2,f=Q(d,l-a),p=hi(o,a,l)&&a!==l,g=f>=et||p,m=Fe(r,c+u,h+u);return g&&m}getCenterPoint(e){let{x:t,y:i,startAngle:s,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,h=(s+o)/2,d=(r+a+c+l)/2;return{x:t+Math.cos(h)*d,y:i+Math.sin(h)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,s=(t.offset||0)/4,o=(t.spacing||0)/2,r=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>et?Math.floor(i/et):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*s,Math.sin(a)*s);let l=1-Math.sin(Math.min(ot,i||0)),c=s*l;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,Wf(e,this,c,o,r),jf(e,this,c,o,r),e.restore()}};var nl=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},$f=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,jn=class extends ke{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=G(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,s=ct(i.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=nl(i,o),c,h;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(r,o,a,l)+10):(h=this.maxHeight,c=this._fitCols(r,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){let{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a,d=e;o.textAlign="left",o.textBaseline="middle";let u=-1,f=-h;return this.legendItems.forEach((p,g)=>{let m=i+t/2+o.measureText(p.text).width;(g===0||c[c.length-1]+m+2*a>r)&&(d+=h,c[c.length-(g>0?0:1)]=0,f+=h,u++),l[g]={left:0,top:f,row:u,width:m,height:s},c[c.length-1]+=m+a}),d}_fitCols(e,t,i,s){let{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=r-e,d=a,u=0,f=0,p=0,g=0;return this.legendItems.forEach((m,_)=>{let{itemWidth:b,itemHeight:w}=qf(i,t,o,m,s);_>0&&f+w+2*a>h&&(d+=u+a,c.push({width:u,height:f}),p+=u+a,g++,u=f=0),l[_]={left:p,top:f,col:g,width:b,height:w},u=Math.max(u,b),f+=w+a}),d+=u,c.push({width:u,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:o}}=this,r=we(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=_t(i,this.left+s,this.right-this.lineWidths[a]);for(let c of t)a!==c.row&&(a=c.row,l=_t(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+s}else{let a=0,l=_t(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(let c of t)c.col!==a&&(a=c.col,l=_t(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Pn(e,this),this._draw(),Mn(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:o,labels:r}=e,a=nt.color,l=we(e.rtl,this.left,this.width),c=ct(r.font),{padding:h}=r,d=c.size,u=d/2,f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;let{boxWidth:p,boxHeight:g,itemHeight:m}=nl(r,d),_=function(k,O,D){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;s.save();let R=Q(D.lineWidth,1);if(s.fillStyle=Q(D.fillStyle,a),s.lineCap=Q(D.lineCap,"butt"),s.lineDashOffset=Q(D.lineDashOffset,0),s.lineJoin=Q(D.lineJoin,"miter"),s.lineWidth=R,s.strokeStyle=Q(D.strokeStyle,a),s.setLineDash(Q(D.lineDash,[])),r.usePointStyle){let z={radius:g*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:R},H=l.xPlus(k,p/2),B=O+u;to(s,z,H,B,r.pointStyleWidth&&p)}else{let z=O+Math.max((d-g)/2,0),H=l.leftForLtr(k,p),B=Ce(D.borderRadius);s.beginPath(),Object.values(B).some(rt=>rt!==0)?fi(s,{x:H,y:z,w:p,h:g,radius:B}):s.rect(H,z,p,g),s.fill(),R!==0&&s.stroke()}s.restore()},b=function(k,O,D){Se(s,D.text,k,O+m/2,c,{strikethrough:D.hidden,textAlign:l.textAlign(D.textAlign)})},w=this.isHorizontal(),C=this._computeTitleHeight();w?f={x:_t(o,this.left+h,this.right-i[0]),y:this.top+h+C,line:0}:f={x:this.left+h,y:_t(o,this.top+C+h,this.bottom-t[0].height),line:0},ro(this.ctx,e.textDirection);let S=m+h;this.legendItems.forEach((k,O)=>{s.strokeStyle=k.fontColor,s.fillStyle=k.fontColor;let D=s.measureText(k.text).width,R=l.textAlign(k.textAlign||(k.textAlign=r.textAlign)),z=p+u+D,H=f.x,B=f.y;l.setWidth(this.width),w?O>0&&H+z+h>this.right&&(B=f.y+=S,f.line++,H=f.x=_t(o,this.left+h,this.right-i[f.line])):O>0&&B+S>this.bottom&&(H=f.x=H+t[f.line].width+h,f.line++,B=f.y=_t(o,this.top+C+h,this.bottom-t[f.line].height));let rt=l.x(H);if(_(rt,B,k),H=xa(R,H+p+u,w?H+z:this.right,e.rtl),b(l.x(H),B,k),w)f.x+=z+h;else if(typeof k.text!="string"){let ht=c.lineHeight;f.y+=Ll(k,ht)+h}else f.y+=S}),ao(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=ct(t.font),s=ft(t.padding);if(!t.display)return;let o=we(e.rtl,this.left,this.width),r=this.ctx,a=t.position,l=i.size/2,c=s.top+l,h,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),h=this.top+c,d=_t(e.align,d,this.right-u);else{let p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);h=c+_t(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}let f=_t(a,d,d+u);r.textAlign=o.textAlign(Xs(a)),r.textBaseline="middle",r.strokeStyle=t.color,r.fillStyle=t.color,r.font=i.string,Se(r,t.text,f,h,i)}_computeTitleHeight(){let e=this.options.title,t=ct(e.font),i=ft(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,o;if(Fe(e,this.left,this.right)&&Fe(t,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(s=o[i],Fe(e,s.left,s.left+s.width)&&Fe(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!Qf(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let s=this._hoveredItem,o=$f(s,i);s&&!o&&G(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!o&&G(t.onHover,[e,i,this],this)}else i&&G(t.onClick,[e,i,this],this)}};function qf(n,e,t,i,s){let o=Kf(i,n,e,t),r=Yf(s,i,e.lineHeight);return{itemWidth:o,itemHeight:r}}function Kf(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),e+t.size/2+i.measureText(s).width}function Yf(n,e,t){let i=n;return typeof e.text!="string"&&(i=Ll(e,t)),i}function Ll(n,e){let t=n.text?n.text.length:0;return e*t}function Qf(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Nl={id:"legend",_element:jn,start(n,e,t){let i=n.legend=new jn({ctx:n.ctx,options:t,chart:n});re.configure(n,i,t),re.addBox(n,i)},stop(n){re.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;re.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(t?0:void 0),h=ft(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};var vi={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,o=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let l=a.tooltipPosition();i.add(l.x),s+=l.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=n.length;o<r;++o){let l=n[o].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),h=ua(e,c);h<s&&(s=h,a=l)}}if(a){let l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Ft(n,e){return e&&(it(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function $t(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Xf(n,e){let{element:t,datasetIndex:i,index:s}=e,o=n.getDatasetMeta(i).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:n,label:r,parsed:o.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function sl(n,e){let t=n.chart.ctx,{body:i,footer:s,title:o}=n,{boxWidth:r,boxHeight:a}=e,l=ct(e.bodyFont),c=ct(e.titleFont),h=ct(e.footerFont),d=o.length,u=s.length,f=i.length,p=ft(e.padding),g=p.height,m=0,_=i.reduce((C,S)=>C+S.before.length+S.lines.length+S.after.length,0);if(_+=n.beforeBody.length+n.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),_){let C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*C+(_-f)*l.lineHeight+(_-1)*e.bodySpacing}u&&(g+=e.footerMarginTop+u*h.lineHeight+(u-1)*e.footerSpacing);let b=0,w=function(C){m=Math.max(m,t.measureText(C).width+b)};return t.save(),t.font=c.string,X(n.title,w),t.font=l.string,X(n.beforeBody.concat(n.afterBody),w),b=e.displayColors?r+2+e.boxPadding:0,X(i,C=>{X(C.before,w),X(C.lines,w),X(C.after,w)}),b=0,t.font=h.string,X(n.footer,w),t.restore(),m+=p.width,{width:m,height:g}}function Gf(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function Zf(n,e,t,i){let{x:s,width:o}=i,r=t.caretSize+t.caretPadding;if(n==="left"&&s+o+r>e.width||n==="right"&&s-o-r<0)return!0}function Jf(n,e,t,i){let{x:s,width:o}=t,{width:r,chartArea:{left:a,right:l}}=n,c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),Zf(c,n,e,t)&&(c="center"),c}function ol(n,e,t){let i=t.yAlign||e.yAlign||Gf(n,t);return{xAlign:t.xAlign||e.xAlign||Jf(n,e,t,i),yAlign:i}}function tp(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function ep(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function rl(n,e,t,i){let{caretSize:s,caretPadding:o,cornerRadius:r}=n,{xAlign:a,yAlign:l}=t,c=s+o,{topLeft:h,topRight:d,bottomLeft:u,bottomRight:f}=Ce(r),p=tp(e,a),g=ep(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(h,u)+s:a==="right"&&(p+=Math.max(d,f)+s),{x:St(p,0,i.width-e.width),y:St(g,0,i.height-e.height)}}function Ln(n,e,t){let i=ft(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function al(n){return Ft([],$t(n))}function ip(n,e,t){return se(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function ll(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var Fl={beforeTitle:Nt,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Nt,beforeBody:Nt,beforeLabel:Nt,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return J(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Nt,afterBody:Nt,beforeFooter:Nt,footer:Nt,afterFooter:Nt};function bt(n,e,t,i){let s=n[e].call(t,i);return typeof s>"u"?Fl[e].call(t,i):s}var cl=(()=>{class n extends ke{static positioners=vi;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,s=this.options.setContext(this.getContext()),o=s.enabled&&i.options.animation&&s.animations,r=new zn(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=ip(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:s}=i,o=bt(s,"beforeTitle",this,t),r=bt(s,"title",this,t),a=bt(s,"afterTitle",this,t),l=[];return l=Ft(l,$t(o)),l=Ft(l,$t(r)),l=Ft(l,$t(a)),l}getBeforeBody(t,i){return al(bt(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:s}=i,o=[];return X(t,r=>{let a={before:[],lines:[],after:[]},l=ll(s,r);Ft(a.before,$t(bt(l,"beforeLabel",this,r))),Ft(a.lines,bt(l,"label",this,r)),Ft(a.after,$t(bt(l,"afterLabel",this,r))),o.push(a)}),o}getAfterBody(t,i){return al(bt(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:s}=i,o=bt(s,"beforeFooter",this,t),r=bt(s,"footer",this,t),a=bt(s,"afterFooter",this,t),l=[];return l=Ft(l,$t(o)),l=Ft(l,$t(r)),l=Ft(l,$t(a)),l}_createItems(t){let i=this._active,s=this.chart.data,o=[],r=[],a=[],l=[],c,h;for(c=0,h=i.length;c<h;++c)l.push(Xf(this.chart,i[c]));return t.filter&&(l=l.filter((d,u,f)=>t.filter(d,u,f,s))),t.itemSort&&(l=l.sort((d,u)=>t.itemSort(d,u,s))),X(l,d=>{let u=ll(t.callbacks,d);o.push(bt(u,"labelColor",this,d)),r.push(bt(u,"labelPointStyle",this,d)),a.push(bt(u,"labelTextColor",this,d))}),this.labelColors=o,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=l,l}update(t,i){let s=this.options.setContext(this.getContext()),o=this._active,r,a=[];if(!o.length)this.opacity!==0&&(r={opacity:0});else{let l=vi[s.position].call(this,o,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);let c=this._size=sl(this,s),h=Object.assign({},l,c),d=ol(this.chart,s,h),u=rl(s,h,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,r={opacity:1,x:u.x,y:u.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,s,o){let r=this.getCaretPosition(t,s,o);i.lineTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineTo(r.x3,r.y3)}getCaretPosition(t,i,s){let{xAlign:o,yAlign:r}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:u}=Ce(l),{x:f,y:p}=t,{width:g,height:m}=i,_,b,w,C,S,k;return r==="center"?(S=p+m/2,o==="left"?(_=f,b=_-a,C=S+a,k=S-a):(_=f+g,b=_+a,C=S-a,k=S+a),w=_):(o==="left"?b=f+Math.max(c,d)+a:o==="right"?b=f+g-Math.max(h,u)-a:b=this.caretX,r==="top"?(C=p,S=C-a,_=b-a,w=b+a):(C=p+m,S=C+a,_=b+a,w=b-a),k=C),{x1:_,x2:b,x3:w,y1:C,y2:S,y3:k}}drawTitle(t,i,s){let o=this.title,r=o.length,a,l,c;if(r){let h=we(s.rtl,this.x,this.width);for(t.x=Ln(this,s.titleAlign,s),i.textAlign=h.textAlign(s.titleAlign),i.textBaseline="middle",a=ct(s.titleFont),l=s.titleSpacing,i.fillStyle=s.titleColor,i.font=a.string,c=0;c<r;++c)i.fillText(o[c],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===r&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,i,s,o,r){let a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:h}=r,d=ct(r.bodyFont),u=Ln(this,"left",r),f=o.x(u),p=c<d.lineHeight?(d.lineHeight-c)/2:0,g=i.y+p;if(r.usePointStyle){let m={radius:Math.min(h,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},_=o.leftForLtr(f,h)+h/2,b=g+c/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Js(t,m,_,b),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Js(t,m,_,b)}else{t.lineWidth=q(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let m=o.leftForLtr(f,h),_=o.leftForLtr(o.xPlus(f,1),h-2),b=Ce(a.borderRadius);Object.values(b).some(w=>w!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,fi(t,{x:m,y:g,w:h,h:c,radius:b}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),fi(t,{x:_,y:g+1,w:h-2,h:c-2,radius:b}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,h,c),t.strokeRect(m,g,h,c),t.fillStyle=a.backgroundColor,t.fillRect(_,g+1,h-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,i,s){let{body:o}=this,{bodySpacing:r,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:h,boxPadding:d}=s,u=ct(s.bodyFont),f=u.lineHeight,p=0,g=we(s.rtl,this.x,this.width),m=function(R){i.fillText(R,g.x(t.x+p),t.y+f/2),t.y+=f+r},_=g.textAlign(a),b,w,C,S,k,O,D;for(i.textAlign=a,i.textBaseline="middle",i.font=u.string,t.x=Ln(this,_,s),i.fillStyle=s.bodyColor,X(this.beforeBody,m),p=l&&_!=="right"?a==="center"?h/2+d:h+2+d:0,S=0,O=o.length;S<O;++S){for(b=o[S],w=this.labelTextColors[S],i.fillStyle=w,X(b.before,m),C=b.lines,l&&C.length&&(this._drawColorBox(i,t,S,g,s),f=Math.max(u.lineHeight,c)),k=0,D=C.length;k<D;++k)m(C[k]),f=u.lineHeight;X(b.after,m)}p=0,f=u.lineHeight,X(this.afterBody,m),t.y-=r}drawFooter(t,i,s){let o=this.footer,r=o.length,a,l;if(r){let c=we(s.rtl,this.x,this.width);for(t.x=Ln(this,s.footerAlign,s),t.y+=s.footerMarginTop,i.textAlign=c.textAlign(s.footerAlign),i.textBaseline="middle",a=ct(s.footerFont),i.fillStyle=s.footerColor,i.font=a.string,l=0;l<r;++l)i.fillText(o[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s.footerSpacing}}drawBackground(t,i,s,o){let{xAlign:r,yAlign:a}=this,{x:l,y:c}=t,{width:h,height:d}=s,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:g}=Ce(o.cornerRadius);i.fillStyle=o.backgroundColor,i.strokeStyle=o.borderColor,i.lineWidth=o.borderWidth,i.beginPath(),i.moveTo(l+u,c),a==="top"&&this.drawCaret(t,i,s,o),i.lineTo(l+h-f,c),i.quadraticCurveTo(l+h,c,l+h,c+f),a==="center"&&r==="right"&&this.drawCaret(t,i,s,o),i.lineTo(l+h,c+d-g),i.quadraticCurveTo(l+h,c+d,l+h-g,c+d),a==="bottom"&&this.drawCaret(t,i,s,o),i.lineTo(l+p,c+d),i.quadraticCurveTo(l,c+d,l,c+d-p),a==="center"&&r==="left"&&this.drawCaret(t,i,s,o),i.lineTo(l,c+u),i.quadraticCurveTo(l,c,l+u,c),i.closePath(),i.fill(),o.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,s=this.$animations,o=s&&s.x,r=s&&s.y;if(o||r){let a=vi[t.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=sl(this,t),c=Object.assign({},a,this._size),h=ol(i,t,c),d=rl(t,c,h,i);(o._to!==d.x||r._to!==d.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),s=this.opacity;if(!s)return;this._updateAnimationTarget(i);let o={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;let a=ft(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,o,i),ro(t,i.textDirection),r.y+=a.top,this.drawTitle(r,t,i),this.drawBody(r,t,i),this.drawFooter(r,t,i),ao(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let s=this._active,o=t.map(({datasetIndex:l,index:c})=>{let h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[c],index:c}}),r=!oi(s,o),a=this._positionChanged(o,i);(r||a)&&(this._active=o,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,s=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,r=this._active||[],a=this._getActiveElements(t,r,i,s),l=this._positionChanged(a,t),c=i||!oi(a,r)||l;return c&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),c}_getActiveElements(t,i,s,o){let r=this.options;if(t.type==="mouseout")return[];if(!o)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:s,caretY:o,options:r}=this,a=vi[r.position].call(this,t,i);return a!==!1&&(s!==a.x||o!==a.y)}}return n})(),Vl={id:"tooltip",_element:cl,positioners:vi,afterInit(n,e,t){t&&(n.tooltip=new cl({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",Ee(Ot({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Fl},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function np(n,e){let t=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:u}=n,f=o||1,p=h-1,{min:g,max:m}=e,_=!J(r),b=!J(a),w=!J(c),C=(m-g)/(d+1),S=Ws((m-g)/p/f)*f,k,O,D,R;if(S<1e-14&&!_&&!b)return[{value:g},{value:m}];R=Math.ceil(m/S)-Math.floor(g/S),R>p&&(S=Ws(R*S/p/f)*f),J(l)||(k=Math.pow(10,l),S=Math.ceil(S*k)/k),s==="ticks"?(O=Math.floor(g/S)*S,D=Math.ceil(m/S)*S):(O=g,D=m),_&&b&&o&&da((a-r)/o,S/1e3)?(R=Math.round(Math.min((a-r)/S,h)),S=(a-r)/R,O=r,D=a):w?(O=_?r:O,D=b?a:D,R=c-1,S=(D-O)/R):(R=(D-O)/S,li(R,Math.round(R),S/1e3)?R=Math.round(R):R=Math.ceil(R));let z=Math.max($s(S),$s(O));k=Math.pow(10,J(l)?z:l),O=Math.round(O*k)/k,D=Math.round(D*k)/k;let H=0;for(_&&(u&&O!==r?(t.push({value:r}),O<r&&H++,li(Math.round((O+H*S)*k)/k,r,hl(r,C,n))&&H++):O<r&&H++);H<R;++H){let B=Math.round((O+H*S)*k)/k;if(b&&B>a)break;t.push({value:B})}return b&&u&&D!==a?t.length&&li(t[t.length-1].value,a,hl(a,C,n))?t[t.length-1].value=a:t.push({value:a}):(!b||D===a)&&t.push({value:D}),t}function hl(n,e,{horizontal:t,minRotation:i}){let s=At(i),o=(t?Math.sin(s):Math.cos(s))||.001,r=.75*e*(""+n).length;return Math.min(e/o,r)}var He=class extends Be{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return J(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:s,max:o}=this,r=l=>s=t?s:l,a=l=>o=i?o:l;if(e){let l=ai(s),c=ai(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||r(s-l)}this.min=s,this.max=o}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,r=np(s,o);return e.bounds==="ticks"&&js(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return di(e,this.chart.options.locale,this.options.ticks.format)}},dl=class extends He{static id="linear";static defaults={ticks:{callback:ui.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=lt(e)?e:0,this.max=lt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=At(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},Ci=n=>Math.floor(Wt(n)),Me=(n,e)=>Math.pow(10,Ci(n)+e);function ul(n){return n/Math.pow(10,Ci(n))===1}function fl(n,e,t){let i=Math.pow(10,t),s=Math.floor(n/i);return Math.ceil(e/i)-s}function sp(n,e){let t=e-n,i=Ci(t);for(;fl(n,e,i)>10;)i++;for(;fl(n,e,i)<10;)i--;return Math.min(i,Ci(n))}function op(n,{min:e,max:t}){e=mt(n.min,e);let i=[],s=Ci(e),o=sp(e,t),r=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),l=s>o?Math.pow(10,s):0,c=Math.round((e-l)*r)/r,h=Math.floor((e-l)/a/10)*a*10,d=Math.floor((c-h)/Math.pow(10,o)),u=mt(n.min,Math.round((l+h+d*Math.pow(10,o))*r)/r);for(;u<t;)i.push({value:u,major:ul(u),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,r=o>=0?1:r),u=Math.round((l+h+d*Math.pow(10,o))*r)/r;let f=mt(n.max,u);return i.push({value:f,major:ul(f),significand:d}),i}var pl=class extends Be{static id="logarithmic";static defaults={ticks:{callback:ui.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=He.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return lt(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=lt(e)?Math.max(0,e):null,this.max=lt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!lt(this._userMin)&&(this.min=e===Me(this.min,0)?Me(this.min,-1):Me(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,s=this.max,o=a=>i=e?i:a,r=a=>s=t?s:a;i===s&&(i<=0?(o(1),r(10)):(o(Me(i,-1)),r(Me(s,1)))),i<=0&&o(Me(s,-1)),s<=0&&r(Me(i,1)),this.min=i,this.max=s}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=op(t,this);return e.bounds==="ticks"&&js(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":di(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Wt(e),this._valueRange=Wt(this.max)-Wt(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Wt(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function Po(n){let e=n.ticks;if(e.display&&n.display){let t=ft(e.backdropPadding);return Q(e.font&&e.font.size,nt.font.size)+t.height}return 0}function rp(n,e,t){return t=it(t)?t:[t],{w:Ca(n,e.string,t),h:t.length*e.lineHeight}}function gl(n,e,t,i,s){return n===i||n===s?{start:e-t/2,end:e+t/2}:n<i||n>s?{start:e-t,end:e}:{start:e,end:e+t}}function ap(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],s=[],o=n._pointLabels.length,r=n.options.pointLabels,a=r.centerPointLabels?ot/o:0;for(let l=0;l<o;l++){let c=r.setContext(n.getPointLabelContext(l));s[l]=c.padding;let h=n.getPointPosition(l,n.drawingArea+s[l],a),d=ct(c.font),u=rp(n.ctx,d,n._pointLabels[l]);i[l]=u;let f=Tt(n.getIndexAngle(l)+a),p=Math.round(vn(f)),g=gl(p,h.x,u.w,0,180),m=gl(p,h.y,u.h,90,270);lp(t,e,f,g,m)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=dp(n,i,s)}function lp(n,e,t,i,s){let o=Math.abs(Math.sin(t)),r=Math.abs(Math.cos(t)),a=0,l=0;i.start<e.l?(a=(e.l-i.start)/o,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/o,n.r=Math.max(n.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/r,n.t=Math.min(n.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/r,n.b=Math.max(n.b,e.b+l))}function cp(n,e,t){let i=n.drawingArea,{extra:s,additionalAngle:o,padding:r,size:a}=t,l=n.getPointPosition(e,i+s+r,o),c=Math.round(vn(Tt(l.angle+st))),h=pp(l.y,a.h,c),d=up(c),u=fp(l.x,a.w,d);return{visible:!0,x:l.x,y:h,textAlign:d,left:u,top:h,right:u+a.w,bottom:h+a.h}}function hp(n,e){if(!e)return!0;let{left:t,top:i,right:s,bottom:o}=n;return!(ve({x:t,y:i},e)||ve({x:t,y:o},e)||ve({x:s,y:i},e)||ve({x:s,y:o},e))}function dp(n,e,t){let i=[],s=n._pointLabels.length,o=n.options,{centerPointLabels:r,display:a}=o.pointLabels,l={extra:Po(o)/2,additionalAngle:r?ot/s:0},c;for(let h=0;h<s;h++){l.padding=t[h],l.size=e[h];let d=cp(n,h,l);i.push(d),a==="auto"&&(d.visible=hp(d,c),d.visible&&(c=d))}return i}function up(n){return n===0||n===180?"center":n<180?"left":"right"}function fp(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function pp(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function gp(n,e,t){let{left:i,top:s,right:o,bottom:r}=t,{backdropColor:a}=e;if(!J(a)){let l=Ce(e.borderRadius),c=ft(e.backdropPadding);n.fillStyle=a;let h=i-c.left,d=s-c.top,u=o-i+c.width,f=r-s+c.height;Object.values(l).some(p=>p!==0)?(n.beginPath(),fi(n,{x:h,y:d,w:u,h:f,radius:l}),n.fill()):n.fillRect(h,d,u,f)}}function mp(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let s=e-1;s>=0;s--){let o=n._pointLabelItems[s];if(!o.visible)continue;let r=i.setContext(n.getPointLabelContext(s));gp(t,r,o);let a=ct(r.font),{x:l,y:c,textAlign:h}=o;Se(t,n._pointLabels[s],l,c+a.lineHeight/2,a,{color:r.color,textAlign:h,textBaseline:"middle"})}}function zl(n,e,t,i){let{ctx:s}=n;if(t)s.arc(n.xCenter,n.yCenter,e,0,et);else{let o=n.getPointPosition(0,e);s.moveTo(o.x,o.y);for(let r=1;r<i;r++)o=n.getPointPosition(r,e),s.lineTo(o.x,o.y)}}function _p(n,e,t,i,s){let o=n.ctx,r=e.circular,{color:a,lineWidth:l}=e;!r&&!i||!a||!l||t<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(s.dash||[]),o.lineDashOffset=s.dashOffset,o.beginPath(),zl(n,t,r,i),o.closePath(),o.stroke(),o.restore())}function bp(n,e,t){return se(n,{label:t,index:e,type:"pointLabel"})}var ml=class extends He{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ui.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=ft(Po(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=lt(e)&&!isNaN(e)?e:0,this.max=lt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Po(this.options))}generateTickLabels(e){He.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let s=G(this.options.pointLabels.callback,[t,i],this);return s||s===0?s:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?ap(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){let t=et/(this._pointLabels.length||1),i=this.options.startAngle||0;return Tt(e*t+At(i))}getDistanceFromCenterForValue(e){if(J(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(J(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return bp(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let s=this.getIndexAngle(e)-st+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:s,bottom:o}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:o}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),zl(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:s,border:o}=t,r=this._pointLabels.length,a,l,c;if(t.pointLabels.display&&mp(this,r),s.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);let u=this.getContext(d),f=s.setContext(u),p=o.setContext(u);_p(this,f,l,r,p)}}),i.display){for(e.save(),a=r-1;a>=0;a--){let h=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:u}=h;!u||!d||(e.lineWidth=u,e.strokeStyle=d,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let s=this.getIndexAngle(0),o,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;let c=i.setContext(this.getContext(l)),h=ct(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,r=e.measureText(a.label).width,e.fillStyle=c.backdropColor;let d=ft(c.backdropPadding);e.fillRect(-r/2-d.left,-o-h.size/2-d.top,r+d.width,h.size+d.height)}Se(e,a.label,0,-o,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}},$n={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yt=Object.keys($n);function _l(n,e){return n-e}function bl(n,e){if(J(e))return null;let t=n._adapter,{parser:i,round:s,isoWeekday:o}=n._parseOpts,r=e;return typeof i=="function"&&(r=i(r)),lt(r)||(r=typeof i=="string"?t.parse(r,i):t.parse(r)),r===null?null:(s&&(r=s==="week"&&(ci(o)||o===!0)?t.startOf(r,"isoWeek",o):t.startOf(r,s)),+r)}function yl(n,e,t,i){let s=yt.length;for(let o=yt.indexOf(n);o<s-1;++o){let r=$n[yt[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((t-e)/(a*r.size))<=i)return yt[o]}return yt[s-1]}function yp(n,e,t,i,s){for(let o=yt.length-1;o>=yt.indexOf(t);o--){let r=yt[o];if($n[r].common&&n._adapter.diff(s,i,r)>=e-1)return r}return yt[t?yt.indexOf(t):0]}function xp(n){for(let e=yt.indexOf(n)+1,t=yt.length;e<t;++e)if($n[yt[e]].common)return yt[e]}function xl(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:s}=Sn(t,e),o=t[i]>=e?t[i]:t[s];n[o]=!0}}function vp(n,e,t,i){let s=n._adapter,o=+s.startOf(e[0].value,i),r=e[e.length-1].value,a,l;for(a=o;a<=r;a=+s.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function vl(n,e,t){let i=[],s={},o=e.length,r,a;for(r=0;r<o;++r)a=e[r],s[a]=r,i.push({value:a,major:!1});return o===0||!t?i:vp(n,i,s,t)}var Sl=(()=>{class n extends Be{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let s=t.time||(t.time={}),o=this._adapter=new Lu._date(t.adapters.date);o.init(i),Le(s.displayFormats,o.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:bl(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,s=t.time.unit||"day",{min:o,max:r,minDefined:a,maxDefined:l}=this.getUserBounds();function c(h){!a&&!isNaN(h.min)&&(o=Math.min(o,h.min)),!l&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),o=lt(o)&&!isNaN(o)?o:+i.startOf(Date.now(),s),r=lt(r)&&!isNaN(r)?r:+i.endOf(Date.now(),s)+1,this.min=Math.min(o,r-1),this.max=Math.max(o+1,r)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],s=t[t.length-1]),{min:i,max:s}}buildTicks(){let t=this.options,i=t.time,s=t.ticks,o=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let r=this.min,a=this.max,l=ga(o,r,a);return this._unit=i.unit||(s.autoSkip?yl(i.minUnit,this.min,this.max,this._getLabelCapacity(r)):yp(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:xp(this._unit),this.initOffsets(o),t.reverse&&l.reverse(),vl(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,s=0,o,r;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?i=1-o:i=(this.getDecimalForValue(t[1])-o)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=St(i,0,a),s=St(s,0,a),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){let t=this._adapter,i=this.min,s=this.max,o=this.options,r=o.time,a=r.unit||yl(r.minUnit,i,s,this._getLabelCapacity(i)),l=Q(o.ticks.stepSize,1),c=a==="week"?r.isoWeekday:!1,h=ci(c)||c===!0,d={},u=i,f,p;if(h&&(u=+t.startOf(u,"isoWeek",c)),u=+t.startOf(u,h?"day":a),t.diff(s,i,a)>1e5*l)throw new Error(i+" and "+s+" are too far apart with stepSize of "+l+" "+a);let g=o.ticks.source==="data"&&this.getDataTimestamps();for(f=u,p=0;f<s;f=+t.add(f,l,a),p++)xl(d,f,g);return(f===s||o.bounds==="ticks"||p===1)&&xl(d,f,g),Object.keys(d).sort(_l).map(m=>+m)}getLabelForValue(t){let i=this._adapter,s=this.options.time;return s.tooltipFormat?i.format(t,s.tooltipFormat):i.format(t,s.displayFormats.datetime)}format(t,i){let o=this.options.time.displayFormats,r=this._unit,a=i||o[r];return this._adapter.format(t,a)}_tickFormatFunction(t,i,s,o){let r=this.options,a=r.ticks.callback;if(a)return G(a,[t,i,s],this);let l=r.time.displayFormats,c=this._unit,h=this._majorUnit,d=c&&l[c],u=h&&l[h],f=s[i],p=h&&u&&f&&f.major;return this._adapter.format(t,o||(p?u:d))}generateTickLabels(t){let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i],o.label=this._tickFormatFunction(o.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+s)*i.factor)}getValueForPixel(t){let i=this._offsets,s=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,s=this.ctx.measureText(t).width,o=At(this.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(o),a=Math.sin(o),l=this._resolveTickFontOptions(0).size;return{w:s*r+l*a,h:s*a+l*r}}_getLabelCapacity(t){let i=this.options.time,s=i.displayFormats,o=s[i.unit]||s.millisecond,r=this._tickFormatFunction(t,0,vl(this,[t],this._majorUnit),o),a=this._getLabelSize(r),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],i,s;if(t.length)return t;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(i=0,s=o.length;i<s;++i)t=t.concat(o[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,s;if(t.length)return t;let o=this.getLabels();for(i=0,s=o.length;i<s;++i)t.push(bl(this,o[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ba(t.sort(_l))}}return n})();function Nn(n,e,t){let i=0,s=n.length-1,o,r,a,l;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=Cn(n,"pos",e)),{pos:o,time:a}=n[i],{pos:r,time:l}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=Cn(n,"time",e)),{time:o,pos:a}=n[i],{time:r,pos:l}=n[s]);let c=r-o;return c?a+(l-a)*(e-o)/c:a}var Cl=class extends Sl{static id="timeseries";static defaults=Sl.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Nn(t,this.min),this._tableRange=Nn(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,s=[],o=[],r,a,l,c,h;for(r=0,a=e.length;r<a;++r)c=e[r],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(r=0,a=s.length;r<a;++r)h=s[r+1],l=s[r-1],c=s[r],Math.round((h+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,o)=>s-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Nn(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Nn(this._table,i*this._tableRange+this._minPos,!0)}};Mo.register(Wn,Ml,Vl,Nl);qe.production&&void 0;console.log("\u{1F6F0}\uFE0F  environment.apiUrl =",qe.apiUrl);Wo(ji,$r);
