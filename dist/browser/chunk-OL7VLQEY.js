import{b as Je,c as Ke,d as Ye}from"./chunk-BQTBWDS4.js";import{q as D,r as V}from"./chunk-QUJHE6QH.js";import{a as Ge}from"./chunk-KPVCULSL.js";import"./chunk-MM22J7PI.js";import{a as Xe}from"./chunk-GKTJ3MPG.js";import{c as G,e as Ne,g as Be}from"./chunk-Y6UGLKWX.js";import{b as J,c as ze,d as K,e as $e,g as je,h as qe,k as Ue,n as Ae,o as Re,p as He,q as We,u as Qe,v as Y,w as X}from"./chunk-JYF56DXZ.js";import{$b as N,A as fe,Ab as h,Ac as De,Bb as l,D as he,Dc as Ve,E as R,Fc as T,Gb as Ce,Hb as ve,Ib as Se,Jb as F,Kb as d,Lb as v,M as z,Mb as L,Mc as ke,Na as W,Nb as be,O as $,Oa as Q,Qb as Pe,R as _e,Rb as ye,Rc as Fe,Sb as Oe,Ta as c,Vb as Ie,W as xe,Xb as Me,Za as I,Zb as we,aa as H,ba as g,ca as u,db as M,f as ge,hb as f,j as ue,ka as S,n as A,ob as p,qb as k,t as ae,tb as n,ub as s,vb as b,vc as E,wb as ce,wc as w,xb as le,xc as Te,yc as Le,zb as C,zc as Ee}from"./chunk-VE4VNBXX.js";import{a as y,b as O}from"./chunk-EQDQRRRY.js";function tt(r,t){if(r&1&&(n(0,"mat-icon",9),d(1),s()),r&2){let e=l().$implicit;c(),v(e.icon)}}function it(r,t){if(r&1){let e=C();n(0,"div",4),h("click",function(){let o=g(e).$implicit,a=l();return u(a.toggleCategory(o))}),n(1,"div",5),f(2,tt,2,1,"mat-icon",6),n(3,"span",7),d(4),s()(),n(5,"span",8)(6,"mat-icon"),d(7),s()()()}if(r&2){let e=t.$implicit,i=l();k("selected",i.selectedCategoryId===e.id),c(2),p("ngIf",e.icon),c(2),v(e.name),c(3),v(i.selectedCategoryId===e.id?"expand_less":"expand_more")}}var Z=class r{categories=[];categorySelected=new S;selectedCategoryId="default";toggleCategory(t){this.selectedCategoryId===t.id?(this.selectedCategoryId="default",this.categorySelected.emit(this.selectedCategoryId)):(this.selectedCategoryId=t.id,this.categorySelected.emit(t.id))}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=M({type:r,selectors:[["app-sidebar"]],inputs:{categories:"categories"},outputs:{categorySelected:"categorySelected"},decls:6,vars:1,consts:[[1,"sidebar"],[1,"sidebar-header"],[1,"category-list"],["class","category-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"category-item",3,"click"],[1,"category-content"],["fontSet","material-symbols-outlined",4,"ngIf"],[1,"category-name"],[1,"expand-icon"],["fontSet","material-symbols-outlined"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),d(3,"Sections"),s()(),n(4,"div",2),f(5,it,8,5,"div",3),s()()),e&2&&(c(5),p("ngForOf",i.categories))},dependencies:[T,E,w,D,V],styles:[".sidebar[_ngcontent-%COMP%]{width:240px;background-color:#fff;border-right:1px solid #e0e0e0;height:100%;overflow-y:auto;scroll-behavior:smooth;scrollbar-color:#0B3B5B white;box-shadow:0 2px 5px #0000001a}.sidebar-header[_ngcontent-%COMP%]{padding:16px 12px;border-bottom:1px solid #e0e0e0}.sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#0b3b5b}.category-list[_ngcontent-%COMP%]{padding:8px 0}.category-item[_ngcontent-%COMP%]{display:flex;align-items:center;width:220px;justify-content:space-between;padding:12px 16px;cursor:pointer;transition:background-color .2s}.category-item[_ngcontent-%COMP%]:hover{background-color:#fcacc480}.category-item.selected[_ngcontent-%COMP%]{background-color:#fcacc4;font-weight:700}.category-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.mat-icon[_ngcontent-%COMP%]{font-size:24px;color:#0b3b5b}.category-name[_ngcontent-%COMP%]{font-size:14px;color:#0b3b5b}.expand-icon[_ngcontent-%COMP%]{color:#0b3b5b}"]})};var ee=(x=>(x.PERSONAL="PERSONAL",x.WORK="WORK",x.SHOPPING="SHOPPING",x.GROCERY="GROCERY",x.PICKUP="PICKUP",x.DELIVERY="DELIVERY",x.OTHER="OTHER",x))(ee||{});function rt(r,t){r&1&&(n(0,"div",16),d(1," Name is required "),s())}function nt(r,t){if(r&1&&(n(0,"option",17),d(1),s()),r&2){let e=t.$implicit;p("value",e),c(),v(e)}}function st(r,t){if(r&1){let e=C();n(0,"div",18),h("click",function(){let o=g(e).$implicit,a=l();return u(a.toggleShareOption(o.userId))}),n(1,"span",19),d(2),s()()}if(r&2){let e=t.$implicit,i=l();k("selected",i.isShareOptionSelected(e.userId)),c(2),v(e.userName)}}var U=class r{constructor(t,e){this.formBuilder=t;this.userProfileService=e;let i=localStorage.getItem("userInfo");this.userId=i?JSON.parse(i).id:""}isEditMode=!1;initialValues={name:"",description:"",listType:"OTHER",shareWith:[]};formValuesChange=new S;listForm;listTypes=Object.values(ee);shareOptions=[];isLoading=!1;userId;ngOnInit(){this.initializeForm(),this.loadFriends(),this.isEditMode&&this.listForm.patchValue(this.initialValues)}ngOnChanges(t){t.initialValues&&!t.initialValues.firstChange&&this.listForm.patchValue(this.initialValues)}initializeForm(){this.listForm=this.formBuilder.group({name:[this.initialValues.name||"",ze.required],description:[this.initialValues.description||""],listType:[this.initialValues.listType||"OTHER"],shareWith:[this.initialValues.shareWith||[]]}),this.listForm.valueChanges.subscribe(t=>{this.formValuesChange.emit(t)})}loadFriends(){if(!this.userId){console.error("User ID not found");return}this.isLoading=!0,this.userProfileService.getUserFriends(this.userId).subscribe({next:t=>{if(this.shareOptions=t.map(e=>({userId:e.id,userName:e.name})),this.isEditMode&&this.initialValues.shareWith?.length>0){let e=new Set(this.shareOptions.map(o=>o.userId)),i=this.initialValues.shareWith.filter(o=>!e.has(o));i.length>0&&this.userProfileService.getUsersByIds(i).subscribe({next:o=>{let a=o.map(m=>({userId:m.id,userName:m.name}));this.shareOptions=[...this.shareOptions,...a]},error:o=>{console.error("Error loading additional collaborators:",o)}})}this.isLoading=!1},error:t=>{console.error("Error loading friends:",t),this.isLoading=!1}})}toggleShareOption(t){let e=this.listForm.get("shareWith")?.value||[],i=e.indexOf(t);i===-1?e.push(t):e.splice(i,1),this.listForm.patchValue({shareWith:e})}isShareOptionSelected(t){return(this.listForm.get("shareWith")?.value||[]).includes(t)}getFormValues(){return this.listForm.value}isFormValid(){return this.listForm.valid}reset(){this.listForm.reset(this.initialValues)}static \u0275fac=function(e){return new(e||r)(I(Qe),I(Ge))};static \u0275cmp=M({type:r,selectors:[["app-list-form"]],inputs:{isEditMode:"isEditMode",initialValues:"initialValues"},outputs:{formValuesChange:"formValuesChange"},features:[H],decls:23,vars:4,consts:[[1,"form-container"],[3,"formGroup"],[1,"form-row"],[1,"form-group"],["for","listName"],["type","text","id","listName","formControlName","name","placeholder","List Name"],["class","error-message",4,"ngIf"],[1,"form-group","description-group"],["for","listDescription"],["id","listDescription","formControlName","description","placeholder","List Description"],["for","listType"],["id","listType","formControlName","listType"],[3,"value",4,"ngFor","ngForOf"],["for","shareWith"],["id","shareWith",1,"share-options-container"],["class","share-option",3,"selected","click",4,"ngFor","ngForOf"],[1,"error-message"],[3,"value"],[1,"share-option",3,"click"],[1,"share-name"]],template:function(e,i){if(e&1&&(n(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"label",4),d(5,"List Name"),s(),b(6,"input",5),f(7,rt,2,0,"div",6),s(),n(8,"div",7)(9,"label",8),d(10,"List Description"),s(),b(11,"textarea",9),s()(),n(12,"div",2)(13,"div",3)(14,"label",10),d(15,"List Type"),s(),n(16,"select",11),f(17,nt,2,2,"option",12),s()(),n(18,"div",3)(19,"label",13),d(20,"Share With"),s(),n(21,"div",14),f(22,st,3,3,"div",15),s()()()()()),e&2){let o;c(),p("formGroup",i.listForm),c(6),p("ngIf",((o=i.listForm.get("name"))==null?null:o.invalid)&&((o=i.listForm.get("name"))==null?null:o.touched)),c(10),p("ngForOf",i.listTypes),c(5),p("ngForOf",i.shareOptions)}},dependencies:[T,E,w,X,qe,He,We,J,Re,K,$e,Ue,Ae],styles:[".form-container[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:15px}.form-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.description-group[_ngcontent-%COMP%]{flex:2}label[_ngcontent-%COMP%]{font-size:12px;color:#0b3b5b;margin-bottom:5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:10px;border:1px solid #0B3B5B;border-radius:4px;font-size:14px;color:#0b3b5b}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:60px;color:#0b3b5b}.error-message[_ngcontent-%COMP%]{color:#fcacc4;font-size:12px;margin-top:5px}.share-options-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;max-height:100px;overflow-y:auto;border:1px solid #0B3B5B;border-radius:4px;padding:10px;scroll-behavior:smooth;scrollbar-color:transparent #0B3B5B}.share-option[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:70px;padding:6px 12px;background:#0b3b5b1a;border-radius:15px;cursor:pointer;transition:all .2s}.share-option.selected[_ngcontent-%COMP%]{background:#fcacc4;color:#fff}.share-name[_ngcontent-%COMP%]{font-size:12px;color:#0b3b5b}"]})};var at=r=>({"max-height":r});function ct(r,t){if(r&1&&(n(0,"p",25),d(1),s()),r&2){let e=l().$implicit;c(),L("",e.price," KM")}}function lt(r,t){if(r&1&&(n(0,"p",26),d(1),s()),r&2){let e=l().$implicit;c(),v(e.storeName)}}function dt(r,t){if(r&1){let e=C();n(0,"div",12)(1,"div",13),b(2,"img",14),s(),n(3,"div",15)(4,"p",16),d(5),s(),f(6,ct,2,1,"p",17)(7,lt,2,1,"p",18),s(),n(8,"div",19)(9,"div",20)(10,"button",21),h("click",function(){let o=g(e).$implicit,a=l(2);return u(a.updateItemQuantity(o.id,(o.quantity||1)-1))}),d(11,"-"),s(),n(12,"span",22),d(13),s(),n(14,"button",23),h("click",function(){let o=g(e).$implicit,a=l(2);return u(a.updateItemQuantity(o.id,(o.quantity||1)+1))}),d(15,"+"),s()(),n(16,"button",24),h("click",function(){let o=g(e).$implicit,a=l(2);return u(a.onRemoveProduct(o))}),d(17,"\xD7"),s()()()}if(r&2){let e=t.$implicit;c(2),p("alt",e.productName),c(3),v(e.productName),c(),p("ngIf",e.price),c(),p("ngIf",e.storeName),c(3),p("disabled",(e.quantity||1)<=1),c(3),v(e.quantity||1)}}function pt(r,t){if(r&1&&(n(0,"div",27)(1,"p")(2,"strong"),d(3,"Total Items:"),s(),d(4),s(),n(5,"p")(6,"strong"),d(7,"Total Price:"),s(),d(8),Me(9,"number"),s()()),r&2){let e=l(2);c(4),L(" ",e.selectedProducts.length,""),c(4),L(" ",we(9,2,e.getTotalPrice(),"1.2-2")," KM")}}function mt(r,t){if(r&1&&(n(0,"div",8)(1,"div",9),f(2,dt,18,6,"div",10),s(),f(3,pt,10,5,"div",11),s()),r&2){let e=l();c(),p("ngStyle",Ie(3,at,e.getContainerHeight())),c(),p("ngForOf",e.selectedProducts),c(),p("ngIf",e.selectedProducts.length>0)}}function gt(r,t){r&1&&(n(0,"div",28),b(1,"img",29),s(),n(2,"p",30),d(3,"The List is still empty! "),b(4,"br"),d(5," Once you select the products you would like to add, they will appear here!"),s())}function ut(r,t){if(r&1){let e=C();n(0,"button",31),h("click",function(){g(e);let o=l();return u(o.onCancelEdit())}),d(1,"CANCEL"),s()}}var te=class r{selectedProducts=[];isEditMode=!1;preferredStore=null;listFormValid=!1;quantityChange=new S;removeProduct=new S;saveList=new S;cancelEdit=new S;changeStore=new S;updateProductStore=new S;previousStore=null;ngOnChanges(t){if(t.preferredStore&&!t.preferredStore.firstChange){let e=t.preferredStore.currentValue,i=t.preferredStore.previousValue;e!==i&&e&&this.switchSelectedItemsToNewStore(e)}}switchSelectedItemsToNewStore(t){this.selectedProducts.forEach(e=>{this.updateProductStore.emit({productId:e.id,newStore:t})})}getContainerHeight(){return`${Math.min(100+this.selectedProducts.length*70,300)}px`}updateItemQuantity(t,e){e>0&&this.quantityChange.emit({id:t,quantity:e})}onRemoveProduct(t){this.removeProduct.emit(t)}onSaveList(){this.saveList.emit()}onCancelEdit(){this.cancelEdit.emit()}onChangeStore(){this.changeStore.emit()}getTotalPrice(){return this.selectedProducts.reduce((t,e)=>t+(e.price||0)*(e.quantity||1),0)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=M({type:r,selectors:[["app-selected-products"]],inputs:{selectedProducts:"selectedProducts",isEditMode:"isEditMode",preferredStore:"preferredStore",listFormValid:"listFormValid"},outputs:{quantityChange:"quantityChange",removeProduct:"removeProduct",saveList:"saveList",cancelEdit:"cancelEdit",changeStore:"changeStore",updateProductStore:"updateProductStore"},features:[H],decls:14,vars:6,consts:[["emptyList",""],["id","list-header"],["class","list-preview-content",4,"ngIf","ngIfElse"],[1,"list-instruction"],[1,"info-icon"],[1,"action-buttons"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"create-list-btn",3,"click","disabled"],[1,"list-preview-content"],[1,"selected-items-container",3,"ngStyle"],["class","selected-item",4,"ngFor","ngForOf"],["class","list-total",4,"ngIf"],[1,"selected-item"],[1,"selected-item-image"],["src","assets/images/item-img-generic.png","height","50","width","50",3,"alt"],[1,"selected-item-details"],[1,"selected-item-name"],["class","selected-item-price",4,"ngIf"],["class","selected-item-store",4,"ngIf"],[1,"selected-item-actions"],[1,"quantity-control"],[1,"quantity-btn",3,"click","disabled"],[1,"quantity-value"],[1,"quantity-btn",3,"click"],["title","Remove item",1,"remove-item-btn",3,"click"],[1,"selected-item-price"],[1,"selected-item-store"],[1,"list-total"],[1,"list-preview-image"],["src","assets/images/shopping-list-icon.png","alt","Shopping List","height","400","width","400"],[1,"list-info"],[1,"secondary-btn",3,"click"]],template:function(e,i){if(e&1){let o=C();n(0,"h2",1),d(1),s(),f(2,mt,4,5,"div",2)(3,gt,6,0,"ng-template",null,0,N),n(5,"div",3)(6,"mat-icon",4),d(7,"info"),s(),n(8,"span"),d(9,"Remember you can use your points to get discounts in our partnering stores"),s()(),n(10,"div",5),f(11,ut,2,0,"button",6),n(12,"button",7),h("click",function(){return g(o),u(i.onSaveList())}),d(13),s()()}if(e&2){let o=F(4);c(),v(i.isEditMode?"Edit Shopping List":"Shopping List"),c(),p("ngIf",i.selectedProducts.length>0)("ngIfElse",o),c(9),p("ngIf",i.isEditMode),c(),p("disabled",!i.listFormValid||i.selectedProducts.length===0),c(),L(" ",i.isEditMode?"UPDATE LIST":"CREATE A LIST"," ")}},dependencies:[T,E,w,De,Ve,V,D],styles:["#list-header[_ngcontent-%COMP%]{color:#0b3b5b}.shopping-list-preview[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;align-items:center;text-align:center;height:610px;scroll-behavior:smooth;scrollbar-color:#FCACC4 white}.list-preview-content[_ngcontent-%COMP%]{position:relative;width:100%;flex:1;display:flex;flex-direction:column;overflow:hidden}.selected-items-container[_ngcontent-%COMP%]{width:100%;flex:1;overflow-y:auto;margin-bottom:20px;min-height:100px;max-height:300px;scroll-behavior:smooth;transition:max-height .3s ease}.selected-item[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid #0B3B5B;padding:10px 0}.selected-item-image[_ngcontent-%COMP%]{width:50px;height:50px;margin-right:10px;display:flex;justify-content:center;align-items:center}.selected-item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.selected-item-details[_ngcontent-%COMP%]{flex:1;text-align:left}.selected-item-name[_ngcontent-%COMP%]{font-size:14px;margin:0 0 5px}.selected-item-price[_ngcontent-%COMP%], .selected-item-store[_ngcontent-%COMP%]{font-size:12px;color:#0b3b5bb3;margin:0}.selected-item-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.quantity-control[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:10px}.quantity-btn[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;border:1px solid #0B3B5B;background:#fff;display:flex;justify-content:center;align-items:center;font-size:18px;cursor:pointer;color:#0b3b5b}.quantity-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.quantity-value[_ngcontent-%COMP%]{margin:0 8px;font-size:14px;min-width:20px;text-align:center}.remove-item-btn[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;border:none;background:#fcacc4;color:#fff;font-size:18px;cursor:pointer;display:flex;justify-content:center;align-items:center;line-height:1}.list-total[_ngcontent-%COMP%]{width:100%;padding-top:10px;text-align:right}.list-preview-image[_ngcontent-%COMP%]{height:200px;margin:20px 0;display:flex;justify-content:center;align-items:center}.list-preview-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.list-info[_ngcontent-%COMP%]{font-size:14px;color:#0b3b5b;margin-bottom:20px}.list-instruction[_ngcontent-%COMP%]{display:flex;gap:10px;font-size:12px;color:#0b3b5bb3;margin-bottom:20px;padding:10px;background:#f5f5f5;border-radius:4px;width:100%;align-items:center}.info-icon[_ngcontent-%COMP%]{font-size:16px}.action-buttons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;gap:10px;margin-top:auto}.create-list-btn[_ngcontent-%COMP%], .secondary-btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:4px;font-weight:700;cursor:pointer;border:none}.create-list-btn[_ngcontent-%COMP%]{background:#fcacc4cc;color:#fff}.create-list-btn[_ngcontent-%COMP%]:hover{background:#fcacc4}.create-list-btn[_ngcontent-%COMP%]:disabled{background:#ffb6c1;cursor:not-allowed}.secondary-btn[_ngcontent-%COMP%]{background:#f0f0f0;color:#0b3b5b}.secondary-btn[_ngcontent-%COMP%]:hover{background:#0b3b5b1a}"]})};function ft(r,t){r&1&&(n(0,"mat-icon",16),d(1,"favorite"),s())}function ht(r,t){r&1&&(n(0,"mat-icon",16),d(1,"attach_money"),s())}function _t(r,t){r&1&&(n(0,"mat-icon",16),d(1,"group"),s())}function xt(r,t){r&1&&(n(0,"mat-icon",16),d(1,"category"),s())}function Ct(r,t){if(r&1&&(n(0,"div",29)(1,"span",30),d(2),s()()),r&2){let e=l().$implicit,i=l(3);c(2),v(i.getProductQuantity(e.productId))}}function vt(r,t){if(r&1&&(n(0,"p",35),d(1),s()),r&2){let e=l().ngIf;c(),L(" Your store: ",e.selectedStorePrice," ")}}function St(r,t){if(r&1&&(n(0,"div",32)(1,"p",33),d(2),s(),f(3,vt,2,1,"p",34),s()),r&2){let e=t.ngIf;c(2),be(" Best at ",e.bestStore,": ",e.bestPrice," "),c(),p("ngIf",e.selectedStorePrice)}}function bt(r,t){if(r&1&&(ce(0),f(1,St,4,3,"div",31),le()),r&2){let e=l().$implicit,i=l(3);c(),p("ngIf",i.getBestPriceInfo(e))}}function Pt(r,t){if(r&1&&(n(0,"div",36)(1,"p",37),d(2),s(),n(3,"p",38),d(4),s()()),r&2){let e=l().$implicit,i=l(3);c(2),v(i.getDisplayStoreName(e)),c(2),v(i.getDisplayPrice(e))}}function yt(r,t){if(r&1){let e=C();n(0,"div",20),h("click",function(){let o=g(e).$implicit,a=l(3);return u(a.selectProduct(o))}),n(1,"div",21),b(2,"img",22),f(3,Ct,3,1,"div",23),s(),n(4,"div",24)(5,"p",25),d(6),s(),n(7,"div",26),f(8,bt,2,1,"ng-container",27)(9,Pt,5,2,"ng-template",null,0,N),s(),n(11,"button",28),h("click",function(o){let a=g(e).$implicit,m=l(3);return u(m.compareStoreItems(a.productId,o))}),d(12," Compare prices "),s()()()}if(r&2){let e=t.$implicit,i=F(10),o=l(2).$implicit,a=l();k("selected",a.isProductSelected(e.productId)),c(2),p("src","assets/images/item-img-generic.png",Q)("alt",e.productName),c(),p("ngIf",a.isProductSelected(e.productId)),c(3),v(e.productName),c(2),p("ngIf",o.id==="best-price")("ngIfElse",i)}}function Ot(r,t){if(r&1&&(n(0,"div",17)(1,"div",18),f(2,yt,13,8,"div",19),s()()),r&2){let e=l().$implicit;c(2),p("ngForOf",e.products)}}function It(r,t){if(r&1){let e=C();n(0,"div",8)(1,"div",9),h("click",function(){let o=g(e).$implicit,a=l();return u(a.toggleCategory(o))}),n(2,"h3",10),ce(3,11),f(4,ft,2,0,"mat-icon",12)(5,ht,2,0,"mat-icon",12)(6,_t,2,0,"mat-icon",12)(7,xt,2,0,"mat-icon",13),le(),d(8),s(),n(9,"mat-icon",14),d(10),s()(),f(11,Ot,3,1,"div",15),s()}if(r&2){let e=t.$implicit,i=l();c(3),p("ngSwitch",e.id),c(),p("ngSwitchCase","favorite"),c(),p("ngSwitchCase","best-price"),c(),p("ngSwitchCase","peoples-choice"),c(2),L(" ",e.name," "),c(2),v(i.isCategoryExpanded(e)?"expand_less":"expand_more"),c(),p("ngIf",i.isCategoryExpanded(e))}}var ie=class r{filteredProducts=[];selectedProducts=[];categories=[];searchTerm="";preferredStore=null;searchChange=new S;toggleCategoryEvent=new S;selectProductEvent=new S;comparePricesEvent=new S;collapsedCategories=new Set;onSearchInput(){this.searchChange.emit(this.searchTerm)}toggleCategory(t){this.collapsedCategories.has(t.id)?this.collapsedCategories.delete(t.id):this.collapsedCategories.add(t.id),this.toggleCategoryEvent.emit(t)}selectProduct(t){this.selectProductEvent.emit(t)}compareStoreItems(t,e){e.stopPropagation(),this.comparePricesEvent.emit(t)}isProductSelected(t){return this.selectedProducts.some(e=>e.productId===t)}getProductQuantity(t){return this.selectedProducts.find(i=>i.productId===t)?.quantity||0}isCategoryExpanded(t){return!this.collapsedCategories.has(t.id)}getDisplayStoreName(t){return t.storeName?t.storeName:this.preferredStore||"No store selected"}getDisplayPrice(t){return t.price!==null&&t.price!==void 0?`${t.price} KM`:"Price not available"}getBestPriceInfo(t){let e={bestStore:t.originalBestStore||t.storeName||"Unknown",bestPrice:t.originalBestPrice?`${t.originalBestPrice} KM`:"N/A",selectedStorePrice:void 0};return this.preferredStore&&this.preferredStore!==e.bestStore&&(e.selectedStorePrice=this.getDisplayPrice(t)),e}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=M({type:r,selectors:[["app-product-list"]],inputs:{filteredProducts:"filteredProducts",selectedProducts:"selectedProducts",categories:"categories",searchTerm:"searchTerm",preferredStore:"preferredStore"},outputs:{searchChange:"searchChange",toggleCategoryEvent:"toggleCategoryEvent",selectProductEvent:"selectProductEvent",comparePricesEvent:"comparePricesEvent"},decls:9,vars:3,consts:[["regularDisplay",""],[1,"search-box"],[1,"item-count"],[1,"search-input"],["type","text","placeholder","Search Products",3,"ngModelChange","input","ngModel"],[1,"search-icon"],[1,"categories-container"],["class","category",4,"ngFor","ngForOf"],[1,"category"],[1,"category-header",3,"click"],[1,"category-title"],[3,"ngSwitch"],["class","category-icon",4,"ngSwitchCase"],["class","category-icon",4,"ngSwitchDefault"],[1,"expand-icon"],["class","products-container",4,"ngIf"],[1,"category-icon"],[1,"products-container"],[1,"product-row"],["class","product-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"product-item",3,"click"],[1,"product-image"],["height","100","width","130",2,"background-color","#334867",3,"src","alt"],["class","selection-indicator",4,"ngIf"],[1,"product-details"],[1,"product-name"],[1,"price-store-container"],[4,"ngIf","ngIfElse"],[1,"compare-btn",3,"click"],[1,"selection-indicator"],[1,"quantity"],["class","best-price-info",4,"ngIf"],[1,"best-price-info"],[1,"best-price-label"],["class","selected-store-price",4,"ngIf"],[1,"selected-store-price"],[1,"price-info-area"],[1,"product-store-regular"],[1,"product-price-regular"]],template:function(e,i){e&1&&(n(0,"div",1)(1,"p",2),d(2),s(),n(3,"div",3)(4,"input",4),Oe("ngModelChange",function(a){return ye(i.searchTerm,a)||(i.searchTerm=a),a}),h("input",function(){return i.onSearchInput()}),s(),n(5,"mat-icon",5),d(6,"search"),s()()(),n(7,"div",6),f(8,It,12,7,"div",7),s()),e&2&&(c(2),L("",i.filteredProducts.length," Products"),c(2),Pe("ngModel",i.searchTerm),c(4),p("ngForOf",i.categories))},dependencies:[T,E,w,Te,Le,Ee,Y,J,K,je,V,D],styles:['.products-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;overflow:hidden;height:100%}.search-box[_ngcontent-%COMP%]{padding:15px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #0B3B5B;background:#0b3b5b1a;position:relative;z-index:10;color:#0b3b5b}.item-count[_ngcontent-%COMP%]{font-size:12px;color:#0b3b5b;margin:0}.search-input[_ngcontent-%COMP%]{position:relative;width:250px}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px 30px 8px 10px;border-radius:15px;border:1px solid #0B3B5B;color:#0b3b5b}.search-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#0b3b5b}.categories-container[_ngcontent-%COMP%]{overflow-y:auto;flex:1;position:relative;z-index:5}.category[_ngcontent-%COMP%]{border-bottom:1px solid #0B3B5B}.category-header[_ngcontent-%COMP%]{padding:15px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;background:#0b3b5b1a}.category-title[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:700;display:flex;align-items:center}.category-icon[_ngcontent-%COMP%]{margin-right:10px;color:#0b3b5b}.expand-icon[_ngcontent-%COMP%]{font-size:25px;color:#0b3b5b}.products-container[_ngcontent-%COMP%]{padding:15px}.product-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px}.product-item[_ngcontent-%COMP%]{border:1px solid #0B3B5B;border-radius:8px;padding:10px;cursor:pointer;position:relative;transition:all .2s}.product-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a}.product-item.selected[_ngcontent-%COMP%]{border-color:#fcacc4;background-color:#ff5c8d0d}.product-image[_ngcontent-%COMP%]{width:100%;height:100px;display:flex;justify-content:center;align-items:center;margin-bottom:10px}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.product-details[_ngcontent-%COMP%]{font-size:12px}.product-name[_ngcontent-%COMP%]{font-weight:700;margin:0 0 5px}.price-store-container[_ngcontent-%COMP%]{height:65px;display:flex;flex-direction:column;justify-content:flex-start;margin-bottom:5px}.product-store[_ngcontent-%COMP%], .product-price[_ngcontent-%COMP%]{margin:0 0 5px;color:#0b3b5b}.product-store[_ngcontent-%COMP%]:empty:after{content:"No store selected";color:#999;font-style:italic}.product-price[_ngcontent-%COMP%]:empty:after{content:"Price not available";color:#999;font-style:italic}.best-price-info[_ngcontent-%COMP%]{margin:5px 0}.best-price-label[_ngcontent-%COMP%]{margin:0 0 5px;color:#f9a825;font-weight:700;font-size:11px}.selected-store-price[_ngcontent-%COMP%]{margin:0 0 3px;color:#0b3b5b;font-size:11px}.price-info-area[_ngcontent-%COMP%]{margin:5px 0}.compare-btn[_ngcontent-%COMP%]{font-size:11px;background:transparent;border:1px solid #0B3B5B;border-radius:12px;padding:3px 8px;color:#0b3b5b;cursor:pointer;margin-top:5px}.compare-btn[_ngcontent-%COMP%]:hover{background:#0b3b5b33}.selection-indicator[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:20px;height:20px;background:#fcacc4;color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:12px}.product-store-regular[_ngcontent-%COMP%], .product-price-regular[_ngcontent-%COMP%]{color:#0b3b5b}']})};function wt(r,t){if(r&1&&(n(0,"div",11)(1,"div",12),b(2,"img",13),s(),n(3,"div",14)(4,"h4"),d(5),s()()()),r&2){let e=l(3);c(2),p("src","assets/images/item-img-generic.png",Q)("alt",e.selectedProduct.productName),c(3),v(e.selectedProduct.productName)}}function Tt(r,t){r&1&&(n(0,"div",22)(1,"mat-icon"),d(2,"check_circle"),s(),n(3,"span"),d(4,"Current Store"),s()())}function Lt(r,t){if(r&1){let e=C();n(0,"div",15),h("click",function(){let o=g(e).$implicit,a=l(3);return u(a.onStoreSelect(o))}),n(1,"div",16),b(2,"span",17),n(3,"span",18),d(4),s()(),n(5,"div",19)(6,"span",20),d(7),s(),f(8,Tt,5,0,"div",21),s()()}if(r&2){let e=t.$implicit,i=l(3);k("preferred",e.storeName===i.preferredStore),c(2),p("innerHTML",i.getSafeSvg(e.storeIcon),W),c(2),v(e.storeName),c(3),L("",e.price," KM"),c(),p("ngIf",e.storeName===i.preferredStore)}}function Et(r,t){if(r&1&&(n(0,"div",7),f(1,wt,6,3,"div",8),n(2,"div",9),f(3,Lt,9,6,"div",10),s()()),r&2){let e=l(2);c(),p("ngIf",e.selectedProduct),c(2),p("ngForOf",e.storeComparisons)}}function Dt(r,t){r&1&&(n(0,"div",23),b(1,"div",24),n(2,"p",25),d(3,"Loading price comparisons..."),s()())}function Vt(r,t){if(r&1){let e=C();n(0,"div",2),h("click",function(){g(e);let o=l();return u(o.onBackdropClick())}),n(1,"div",3),h("click",function(o){g(e);let a=l();return u(a.onContentClick(o))}),n(2,"div",4)(3,"h3"),d(4,"Compare Store Prices"),s(),n(5,"button",5),h("click",function(){g(e);let o=l();return u(o.onClose())}),d(6,"\xD7"),s()(),f(7,Et,4,2,"div",6)(8,Dt,4,0,"ng-template",null,0,N),s()()}if(r&2){let e=F(9),i=l();c(7),p("ngIf",!i.isLoading)("ngIfElse",e)}}var oe=class r{constructor(t){this.sanitizer=t}show=!1;isLoading=!1;storeComparisons=[];selectedProduct=null;preferredStore=null;product=null;closeModal=new S;storeSelected=new S;onClose(){this.closeModal.emit()}onStoreSelect(t){this.storeSelected.emit(t)}getSafeSvg(t){return this.sanitizer.bypassSecurityTrustHtml(t)}onBackdropClick(){this.closeModal.emit()}onContentClick(t){t.stopPropagation()}static \u0275fac=function(e){return new(e||r)(I(G))};static \u0275cmp=M({type:r,selectors:[["app-price-comparison-modal"]],inputs:{show:"show",isLoading:"isLoading",storeComparisons:"storeComparisons",selectedProduct:"selectedProduct",preferredStore:"preferredStore",product:"product"},outputs:{closeModal:"closeModal",storeSelected:"storeSelected"},decls:1,vars:1,consts:[["loadingPrices",""],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content","price-comparison-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["class","modal-body",4,"ngIf","ngIfElse"],[1,"modal-body"],["class","product-info",4,"ngIf"],[1,"store-prices"],["class","store-price-item",3,"preferred","click",4,"ngFor","ngForOf"],[1,"product-info"],[1,"product-image"],[3,"src","alt"],[1,"product-details"],[1,"store-price-item",3,"click"],[1,"store-info"],[1,"store-logo",3,"innerHTML"],[1,"store-name"],[1,"price-info"],[1,"price"],["class","store-indicator",4,"ngIf"],[1,"store-indicator"],[1,"loading-container"],[1,"loading-spinner"],[2,"color","#0B3B5B"]],template:function(e,i){e&1&&f(0,Vt,10,2,"div",1),e&2&&p("ngIf",i.show)},dependencies:[T,E,w,V,D],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:80vh;overflow-y:auto;box-shadow:0 4px 8px #0003}.price-comparison-modal[_ngcontent-%COMP%]{width:100%;max-width:450px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;border-bottom:1px solid #0B3B5B}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#0b3b5b}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#0b3b5b}.modal-body[_ngcontent-%COMP%]{padding:20px}.product-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid #eee}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:8px}.product-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:1.2em}.store-prices[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.store-price-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-radius:8px;border:1px solid #0B3B5B;cursor:pointer;transition:all .2s ease}.store-price-item[_ngcontent-%COMP%]:hover{background-color:#0b3b5b1a;transform:translateY(-2px);box-shadow:0 4px 8px #0000000d}.store-price-item.preferred[_ngcontent-%COMP%]{border-color:#0b3b5b;background-color:#0b3b5b59}.store-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.store-logo[_ngcontent-%COMP%]{display:flex;width:32px;height:32px}.store-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.price-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:5px}.price[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#0b3b5b}.store-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;color:#0b3b5b;font-size:12px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px 20px}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #FCACC4;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};function kt(r,t){r&1&&(n(0,"div",19)(1,"mat-icon"),d(2,"check_circle"),s()())}function Ft(r,t){if(r&1){let e=C();n(0,"div",14),h("click",function(){let o=g(e).$implicit,a=l(3);return u(a.onStoreSelect(o))}),n(1,"div",15),b(2,"span",16),n(3,"span",17),d(4),s()(),f(5,kt,3,0,"div",18),s()}if(r&2){let e=t.$implicit,i=l(3);k("selected",e.name===i.preferredStore),c(2),p("innerHTML",i.getSafeSvg(e.icon),W)("title",e.name),c(2),v(e.name),c(),p("ngIf",e.name===i.preferredStore)}}function Nt(r,t){if(r&1){let e=C();n(0,"button",20),h("click",function(){g(e);let o=l(3);return u(o.onClearStore())}),d(1," Clear Store Preference "),s()}}function Bt(r,t){if(r&1&&(n(0,"div",7)(1,"p",8),d(2," Choose your preferred store. All products in your list will be updated to this store when available. "),s(),n(3,"div",9)(4,"div",10),f(5,Ft,6,6,"div",11),s()(),n(6,"div",12),f(7,Nt,2,0,"button",13),s()()),r&2){let e=l(2);c(5),p("ngForOf",e.stores),c(2),p("ngIf",e.preferredStore)}}function zt(r,t){r&1&&(n(0,"div",21),b(1,"div",22),n(2,"p",23),d(3,"Loading stores..."),s()())}function $t(r,t){if(r&1){let e=C();n(0,"div",2),h("click",function(){g(e);let o=l();return u(o.onBackdropClick())}),n(1,"div",3),h("click",function(o){g(e);let a=l();return u(a.onContentClick(o))}),n(2,"div",4)(3,"h3"),d(4,"Select Preferred Store"),s(),n(5,"button",5),h("click",function(){g(e);let o=l();return u(o.onClose())}),d(6,"\xD7"),s()(),f(7,Bt,8,2,"div",6)(8,zt,4,0,"ng-template",null,0,N),s()()}if(r&2){let e=F(9),i=l();c(7),p("ngIf",!i.isLoading)("ngIfElse",e)}}var re=class r{constructor(t){this.sanitizer=t}show=!1;stores=[];preferredStore=null;isLoading=!1;currentStore=null;closeModal=new S;storeSelected=new S;clearStore=new S;onClose(){this.closeModal.emit()}onStoreSelect(t){this.storeSelected.emit(t)}onClearStore(){this.clearStore.emit()}getSafeSvg(t){return this.sanitizer.bypassSecurityTrustHtml(t)}onBackdropClick(){this.closeModal.emit()}onContentClick(t){t.stopPropagation()}isStoreSelected(t){return t.name===this.currentStore}static \u0275fac=function(e){return new(e||r)(I(G))};static \u0275cmp=M({type:r,selectors:[["app-store-selection-modal"]],inputs:{show:"show",stores:"stores",preferredStore:"preferredStore",isLoading:"isLoading",currentStore:"currentStore"},outputs:{closeModal:"closeModal",storeSelected:"storeSelected",clearStore:"clearStore"},decls:1,vars:1,consts:[["loadingStores",""],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content","store-selection-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["class","modal-body",4,"ngIf","ngIfElse"],[1,"modal-body"],[1,"store-selection-info"],[1,"store-options"],[1,"store-list"],["class","store-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"store-selection-actions"],["class","clear-store-btn",3,"click",4,"ngIf"],[1,"store-item",3,"click"],[1,"store-info"],[1,"store-logo",3,"innerHTML","title"],[1,"store-name"],["class","store-selection-indicator",4,"ngIf"],[1,"store-selection-indicator"],[1,"clear-store-btn",3,"click"],[1,"loading-container"],[1,"loading-spinner"],[2,"color","#0B3B5B"]],template:function(e,i){e&1&&f(0,$t,10,2,"div",1),e&2&&p("ngIf",i.show)},dependencies:[T,E,w,V,D],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:500px;max-height:80vh;overflow-y:auto;box-shadow:0 4px 8px #0003}.store-selection-modal[_ngcontent-%COMP%]{width:100%;max-width:450px;scroll-behavior:smooth;scrollbar-color:#0B3B5B white}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;border-bottom:1px solid #0B3B5B}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#0b3b5b}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#0b3b5b}.modal-body[_ngcontent-%COMP%]{padding:20px}.store-selection-info[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center;color:#0b3b5b}.store-options[_ngcontent-%COMP%], .store-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.store-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-radius:8px;border:1px solid #0B3B5B;cursor:pointer;transition:all .2s ease}.store-item[_ngcontent-%COMP%]:hover{background-color:#0b3b5b1a;transform:translateY(-2px);box-shadow:0 4px 8px #0000000d}.store-item.selected[_ngcontent-%COMP%]{border-color:#0b3b5b;background-color:#0b3b5b59}.store-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.store-logo[_ngcontent-%COMP%]{display:flex;width:32px;height:32px}.store-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.store-selection-indicator[_ngcontent-%COMP%]{color:#0b3b5b}.store-selection-actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center}.clear-store-btn[_ngcontent-%COMP%]{padding:8px 16px;background-color:#0b3b5b;border:1px solid #0B3B5B;border-radius:4px;cursor:pointer;font-size:14px;transition:all .2s ease;color:#fff}.clear-store-btn[_ngcontent-%COMP%]:hover{background-color:#092a40}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px 20px}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #FCACC4;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};var ne=class r{constructor(t){this.http=t}apiUrl=`${Fe.apiUrl}/api/shopping-lists`;getCategories(){return this.http.get(`${this.apiUrl}/categories`)}getSidebarCategories(){return this.http.get(`${this.apiUrl}/sidebar-categories`)}getAllProducts(){return this.http.get(`${this.apiUrl}/products`)}getListById(t){return this.http.get(`${this.apiUrl}/${t}`)}getListsByUserId(t){return this.http.get(`${this.apiUrl}/user/${t}`)}createList(t){return this.http.post(`${this.apiUrl}`,t)}updateList(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}softDeleteList(t){return this.http.put(`${this.apiUrl}/${t}/soft-delete`,{})}getCollaborators(t){return this.http.get(`${this.apiUrl}/${t}/collaborators`)}searchProducts(t){return this.http.get(`${this.apiUrl}/products/search`,{params:{term:t}})}getProductsByCategory(t){return this.http.get(`${this.apiUrl}/products/category/${t}`)}getItemPriceComparisons(t){return this.http.get(`${this.apiUrl}/items/${t}/price-comparisons`)}getAllAvailableStores(){return this.http.get(`${this.apiUrl}/stores`)}updateShoppingList(t,e){return this.http.put(`${this.apiUrl}/${t}/update`,e)}static \u0275fac=function(e){return new(e||r)(xe(ke))};static \u0275prov=_e({token:r,factory:r.\u0275fac,providedIn:"root"})};function qt(r,t){if(r&1){let e=C();n(0,"div",8)(1,"div",9)(2,"mat-icon"),d(3,"store"),s(),n(4,"span"),d(5,"Shopping from: "),n(6,"strong"),d(7),s()(),n(8,"button",10),h("click",function(){g(e);let o=l();return u(o.changePreferredStore())}),d(9,"Change"),s()(),n(10,"p",11),d(11),s()()}if(r&2){let e=l();c(7),v(e.preferredStore),c(4),L("Products will be selected from ",e.preferredStore," when available")}}function Ut(r,t){if(r&1){let e=C();n(0,"app-store-selection-modal",12),h("closeModal",function(){g(e);let o=l();return u(o.closeStoreSelectionModal())})("storeSelected",function(o){g(e);let a=l();return u(a.onStoreSelected(o))})("clearStore",function(){g(e);let o=l();return o.preferredStore=null,u(o.closeStoreSelectionModal())}),s()}if(r&2){let e=l();p("show",e.showStoreSelectionModal)("stores",e.availableStores)("preferredStore",e.preferredStore)("isLoading",e.isLoading)}}function At(r,t){if(r&1){let e=C();n(0,"div",13)(1,"div",14)(2,"app-selected-products",15),h("quantityChange",function(o){g(e);let a=l();return u(a.updateItemQuantity(o))})("removeProduct",function(o){g(e);let a=l();return u(a.removeProduct(o))})("saveList",function(){g(e);let o=l();return u(o.saveList())})("cancelEdit",function(){g(e);let o=l();return u(o.cancelEdit())})("changeStore",function(){g(e);let o=l();return u(o.showStoreSelectionModal=!0)})("updateProductStore",function(o){g(e);let a=l();return u(a.onUpdateProductStore(o))}),s()(),n(3,"div",16)(4,"app-product-list",17),h("searchChange",function(o){g(e);let a=l();return u(a.onSearchInput(o))})("toggleCategoryEvent",function(o){g(e);let a=l();return u(a.toggleCategory(o))})("selectProductEvent",function(o){g(e);let a=l();return u(a.selectProduct(o))})("comparePricesEvent",function(o){g(e);let a=l();return u(a.showPriceComparison(o))}),s()()()}if(r&2){let e=l();c(2),p("selectedProducts",e.selectedProducts)("isEditMode",e.isEditMode)("preferredStore",e.preferredStore)("listFormValid",e.listFormComponent&&e.listFormComponent.isFormValid()||!1),c(2),p("categories",e.categories)("filteredProducts",e.filteredProducts)("selectedProducts",e.selectedProducts)("searchTerm",e.searchTerm)("preferredStore",e.preferredStore)}}function Rt(r,t){if(r&1){let e=C();n(0,"app-price-comparison-modal",20),h("closeModal",function(){g(e);let o=l(2);return u(o.closeComparisonModal())})("storeSelected",function(o){g(e);let a=l(2);return u(a.selectStore(o))}),s()}if(r&2){let e=l(2);p("show",e.showComparisonModal)("selectedProduct",e.selectedComparisonProduct)("storeComparisons",e.storeComparisons)("preferredStore",e.preferredStore)("isLoading",e.isLoadingComparisons)}}function Ht(r,t){if(r&1){let e=C();n(0,"div",18),h("click",function(){g(e);let o=l();return u(o.closeComparisonModal())}),f(1,Rt,1,5,"app-price-comparison-modal",19),s()}if(r&2){let e=l();c(),p("ngIf",e.showComparisonModal)}}function Wt(r,t){r&1&&(n(0,"div",21),b(1,"div",22),n(2,"p",23),d(3,"Loading shopping list data..."),s()())}var Ze=class r{constructor(t,e,i,o,a,m,x){this.route=t;this.router=e;this.shoppingListService=i;this.favoriteProductsService=o;this.loyaltyPointsService=a;this.productService=m;this.priceComparisonService=x;let _=localStorage.getItem("userInfo");if(this.userId=_?JSON.parse(_).id:"",!this.userId)throw new Error("User ID not found. Please log in again.")}categories=[];selectedProducts=[];isEditMode=!1;listId=null;searchTerm="";filteredProducts=[];isLoading=!1;currentList=null;originalCategories=[];selectedCategoryId=null;preferredStore=null;showStoreSelectionModal=!1;availableStores=[];sidebarCategories=[];showComparisonModal=!1;storeComparisons=[];selectedComparisonProduct=null;isLoadingComparisons=!1;listFormComponent;formValues=null;initialFormValues={name:"",description:"",listType:"OTHER",shareWith:[]};userId;searchSubject=new ge;DEBOUNCE_TIME=300;currentStore=null;favoriteProducts=[];ngOnInit(){this.setupSearch(),this.isLoading=!1,this.route.paramMap.pipe($(t=>{this.listId=t.get("id")}),z(()=>this.favoriteProductsService.getFavoriteProducts(this.userId).pipe($(t=>{this.favoriteProducts=t.map(e=>O(y({},e),{isChecked:!1,quantity:1,price:0,storeId:"",storeName:""}))}),z(()=>this.shoppingListService.getAllProducts()),$(t=>{this.filteredProducts=t}),z(()=>this.shoppingListService.getSidebarCategories()))),$(t=>{let e={id:"favorite",name:"Favorites",icon:"favorite",products:[]};this.sidebarCategories=[e,...t]}),z(()=>this.shoppingListService.getCategories()),$(t=>{let e=[],i=t.map(a=>a.id),o=this.getFavoriteProducts();o.length>0&&!i.includes("favorite")&&e.push({id:"favorite",name:"Favorites",icon:"favorite",products:o}),i.includes("peoples-choice")||e.push({id:"peoples-choice",name:"People's Choice",icon:"group",products:[]}),i.includes("best-price")||e.push({id:"best-price",name:"Best Price",icon:"attach_money",products:[]}),this.categories=[...e,...t],this.originalCategories=JSON.parse(JSON.stringify(this.categories)),this.loadSpecialCategories()}),z(()=>this.listId?this.shoppingListService.getListById(this.listId):ue(null)),R(()=>{this.isLoading=!1})).subscribe(t=>{t&&(this.currentList=t,this.isEditMode=this.hasEditPermission(),this.loadListData(t))})}setupSearch(){this.searchSubject.pipe(fe(this.DEBOUNCE_TIME),he()).subscribe(t=>{this.performSearch(t)})}searchProducts(t){let e=t||this.searchTerm;this.searchSubject.next(e)}performSearch(t){if(!t.trim()){this.getAllProducts(),this.updateCategoriesWithSearchResults([]);return}this.isLoading=!0,this.shoppingListService.searchProducts(t).subscribe(e=>{this.filteredProducts=e,this.updateCategoriesWithSearchResults(e),this.isLoading=!1})}loadListData(t){this.currentList=t,this.initialFormValues={name:t.name,description:t.description||"",listType:t.listType||"OTHER",shareWith:t.collaborators?t.collaborators.map(e=>e.userId):[]},this.listFormComponent&&this.listFormComponent.reset(),this.selectedProducts=[...t.items],this.preferredStore=t.storeName??null,t.storeId&&t.storeName&&(this.currentStore={id:t.storeId,name:t.storeName,icon:""}),this.filteredProducts=this.filteredProducts.map(e=>{let i=t.items.find(o=>o.productId===e.productId);return i?O(y({},e),{storeName:i.storeName,storeId:i.storeId,price:i.price}):e}),this.preferredStore&&this.updateProductPricesForStore(this.preferredStore)}onFormValuesChange(t){this.formValues=t}getAllProducts(){this.shoppingListService.getAllProducts().subscribe({next:t=>{this.filteredProducts=t.map(e=>{let i=this.selectedProducts.find(o=>o.id===e.id);return i?O(y({},e),{storeName:i.storeName,price:i.price}):e}),this.categories=JSON.parse(JSON.stringify(this.originalCategories))},error:t=>{console.error("Error loading products:",t)}})}filterByCategory(t){this.selectedCategoryId=t,this.isLoading=!0,this.searchTerm="",this.selectedCategoryId==="default"?this.shoppingListService.getAllProducts().subscribe(e=>{this.filteredProducts=e,this.categories=this.originalCategories,this.isLoading=!1}):this.selectedCategoryId==="favorite"?this.shoppingListService.getAllProducts().subscribe(e=>{this.filteredProducts=e;let i=this.getFavoriteProducts();this.categories=[{id:"favorite",name:"Favorites",icon:"favorite",products:i}],this.isLoading=!1}):this.shoppingListService.getProductsByCategory(t).subscribe(e=>{this.filteredProducts=e,this.categories=this.originalCategories.filter(i=>i.id===t),this.categories.length>0&&(this.categories[0].expanded=!0),this.isLoading=!1})}updateCategoriesWithSearchResults(t){if(!t||t.length===0){this.resetCategoriesToOriginal();return}this.categories.forEach(e=>{e.id==="favorite"?e.products=this.getFavoriteProducts().filter(i=>t.some(o=>o.productId===i.productId)):e.products=[],e.expanded=!1}),t.forEach(e=>{let i=e.category||"general",o=this.categories.find(a=>a.id===i);if(o&&o.id!=="favorite")o.products.push(e),o.expanded=!0;else if(!o){let a=this.categories.find(m=>m.id==="general");a||(a={id:"general",name:"Search Results",products:[]},this.categories.push(a)),a.products.push(e),a.expanded=!0}})}resetCategoriesToOriginal(){this.categories=JSON.parse(JSON.stringify(this.originalCategories))}toggleCategory(t){t.expanded=!t.expanded}onStoreSelected(t){this.preferredStore!==t.name&&(this.currentStore=t,this.preferredStore=t.name,this.showStoreSelectionModal=!1,this.selectedProducts=this.selectedProducts.map(e=>O(y({},e),{storeName:t.name,storeId:t.id})),this.updateProductPricesForStore(t.name))}selectProduct(t){this.selectedProducts.findIndex(i=>i.productId===t.productId)===-1?this.shoppingListService.getItemPriceComparisons(t.productId).subscribe({next:i=>{let o=i.reduce((a,m)=>!a||m.price&&(!a.price||m.price<a.price)?m:a,null);if(o){this.currentStore||(this.currentStore={id:o.storeId,name:o.storeName,icon:o.storeIcon||""},this.preferredStore=o.storeName);let a=i.find(m=>m.storeName===this.currentStore.name);this.selectedProducts=[...this.selectedProducts,O(y({},t),{storeName:this.currentStore.name,storeId:this.currentStore.id,price:a?.price||o.price,quantity:1})]}else this.selectedProducts=[...this.selectedProducts,O(y({},t),{quantity:1})]}}):this.selectedProducts=this.selectedProducts.filter(i=>i.productId!==t.productId)}updateItemQuantity(t){let e=this.selectedProducts.findIndex(i=>i.id===t.id);e!==-1&&t.quantity>0&&(this.selectedProducts=[...this.selectedProducts.slice(0,e),O(y({},this.selectedProducts[e]),{quantity:t.quantity}),...this.selectedProducts.slice(e+1)])}changePreferredStore(){this.showStoreSelectionModal=!0,this.isLoadingComparisons=!0,this.shoppingListService.getAllAvailableStores().subscribe(t=>{this.availableStores=t,this.isLoadingComparisons=!1})}closeStoreSelectionModal(){this.showStoreSelectionModal=!1}saveList(){if(!this.listFormComponent.isFormValid())return;if(!this.currentStore?.id){console.error("Please select a store before saving the list");return}this.isLoading=!0;let t=this.listFormComponent.getFormValues(),e={name:t.name,description:t.description,listType:t.listType,ownerId:this.userId,items:this.selectedProducts.map(o=>O(y({},o),{quantity:o.quantity||1,storeName:this.currentStore.name,storeId:this.currentStore.id})),collaborators:t.shareWith.map(o=>({userId:o,permission:"EDIT"})),active:!0,storeId:this.currentStore.id,storeName:this.currentStore.name},i;this.isEditMode&&this.listId&&this.currentList?i=this.shoppingListService.updateList(this.listId,{id:this.listId,name:t.name,description:t.description,listType:t.listType,ownerId:this.userId,items:e.items,collaborators:t.shareWith.map(o=>({userId:o,permission:"EDIT"})),active:!0,storeId:this.currentStore.id,storeName:this.currentStore.name}):i=this.shoppingListService.createList(e),i.pipe(R(()=>{this.isLoading=!1})).subscribe({next:o=>{o&&(this.router.navigate(["/dashboard"]),this.loyaltyPointsService.awardPointsWithNotification("create_list",1,!0))},error:o=>{console.error("Failed to save shopping list:",o)}})}cancelEdit(){this.router.navigate(["/dashboard"])}compareStoreItems(t){this.isLoadingComparisons=!0,this.showComparisonModal=!0,this.selectedComparisonProduct=this.findProductById(t),this.shoppingListService.getItemPriceComparisons(t).subscribe(e=>{this.storeComparisons=e,this.isLoadingComparisons=!1})}findProductById(t){let e=this.selectedProducts.find(i=>i.productId===t);return e||this.filteredProducts.find(i=>i.productId===t)||null}closeComparisonModal(){this.showComparisonModal=!1,this.selectedComparisonProduct=null,this.storeComparisons=[],this.isLoadingComparisons=!1}selectStore(t){let e=this.preferredStore;this.preferredStore=t.storeName,this.currentStore={id:t.storeId,name:t.storeName,icon:t.storeIcon},this.selectedComparisonProduct&&(this.selectedProducts.some(o=>o.productId===this.selectedComparisonProduct.productId)||(this.selectedProducts=[...this.selectedProducts,O(y({},this.selectedComparisonProduct),{storeName:t.storeName,storeId:t.storeId,price:t.price,quantity:1})])),this.selectedProducts=this.selectedProducts.map(i=>O(y({},i),{storeName:t.storeName,storeId:t.storeId})),this.closeComparisonModal(),this.updateProductPricesForStore(t.storeName)}applyPreferredStoreToList(){this.preferredStore&&this.updateProductPricesForStore(this.preferredStore)}removeProduct(t){this.selectedProducts=this.selectedProducts.filter(e=>e.productId!==t.productId)}ngOnDestroy(){this.searchSubject.complete()}onSearchInput(t){this.searchTerm=t,this.searchSubject.next(t)}showPriceComparison(t){if(this.isLoadingComparisons)return;this.isLoadingComparisons=!0;let e=this.findProductById(t);e?(this.selectedComparisonProduct=e,this.shoppingListService.getItemPriceComparisons(e.productId).subscribe({next:i=>{this.storeComparisons=i,this.showComparisonModal=!0,this.isLoadingComparisons=!1},error:i=>{console.error("Error loading price comparisons:",i),this.isLoadingComparisons=!1}})):this.isLoadingComparisons=!1}updateProductPricesForStore(t){if(!t||!this.currentStore||this.isLoading)return;this.isLoading=!0;let e=this.selectedProducts.length>0?this.selectedProducts.map(a=>this.shoppingListService.getItemPriceComparisons(a.productId).pipe(A(m=>{let x=m.find(_=>_.storeName===t);return O(y({},a),{storeName:t,storeId:this.currentStore?.id,price:x?.price,quantity:a.quantity||1})}))):[],i=[];this.categories.forEach(a=>{a.products&&a.products.length>0&&a.products.forEach(m=>{m.productId&&i.push(this.shoppingListService.getItemPriceComparisons(m.productId).pipe(A(x=>{let _=x.find(P=>P.storeName===t);return O(y({},m),{storeName:_?t:m.storeName,storeId:_?this.currentStore?.id:m.storeId,price:_?.price||m.price,categoryId:a.id})})))})});let o=[...e,...i];if(o.length===0){this.isLoading=!1;return}ae(o).pipe(R(()=>this.isLoading=!1)).subscribe({next:a=>{e.length>0&&(this.selectedProducts=[...a.slice(0,e.length)]);let m=a.slice(e.length),x=new Map;m.forEach(_=>{let P=_.categoryId;x.has(P)||x.set(P,[]),x.get(P).push(_)}),this.categories.forEach(_=>{let P=x.get(_.id);if(P)if(_.id==="best-price"){let se=P.map(pe=>{let me=_.products.find(et=>et.productId===pe.productId);return O(y({},pe),{originalBestPrice:me?.originalBestPrice,originalBestStore:me?.originalBestStore})});_.products=[...se]}else _.products=[...P]}),this.filteredProducts=this.filteredProducts.map(_=>{let P=a.find(se=>se.productId===_.productId);return P?O(y({},_),{storeName:P.storeName,storeId:P.storeId,price:P.price}):_})},error:a=>{console.error("Error updating product prices:",a)}})}onUpdateProductStore(t){this.updateProductPricesForStore(t.newStore)}hasEditPermission(){return this.currentList?this.currentList.ownerId===this.userId?!0:this.currentList.collaborators.find(e=>e.userId===this.userId)?.permission==="EDIT":!1}getFavoriteProducts(){return this.filteredProducts.filter(t=>this.favoriteProducts.some(e=>e.productId===t.productId))}loadSpecialCategories(){this.productService.getTopProducts().subscribe(t=>{let e=this.categories.find(i=>i.id==="peoples-choice");e&&t.length>0&&this.shoppingListService.getAllProducts().subscribe(i=>{let o=t.map(m=>{let x=i.find(_=>_.productName.toLowerCase().trim()===m.productName.toLowerCase().trim());return x?{id:x.productId,productId:x.productId,productName:x.productName,price:m.price,storeName:m.storeName,storeId:x.storeId||"",isChecked:!1,quantity:1}:{id:this.generateProductId(m.productName),productId:this.generateProductId(m.productName),productName:m.productName,price:m.price,storeName:m.storeName,storeId:"",isChecked:!1,quantity:1}}),a=this.deduplicateProductsByPrice(o);e.products=a.slice(0,10)})}),this.priceComparisonService.getAllItems(this.userId).subscribe(t=>{let e=this.categories.find(i=>i.id==="best-price");if(e)if(t&&t.length>0){let i=t.map(o=>this.priceComparisonService.getItemPrices(this.userId,o.id).pipe(A(a=>{if(a&&a.length>0){let m=a.reduce((x,_)=>!x||_.price&&_.price<x.price?_:x);return{id:o.id,productId:o.id,productName:o.name,price:m.price,storeName:m.storeName,storeId:m.storeId,isChecked:!1,quantity:1,originalBestPrice:m.price,originalBestStore:m.storeName}}return null})));ae(i).subscribe(o=>{let a=o.filter(_=>_&&_.price&&_.price>0),x=this.deduplicateProductsByPrice(a).sort((_,P)=>(_.price||0)-(P.price||0)).slice(0,10);e.products=x})}else e.products=[];else e.products=[]})}deduplicateProductsByPrice(t){let e=new Map;return t.forEach(i=>{let o=i.productName.toLowerCase().trim(),a=e.get(o);if(!a)e.set(o,i);else{let m=i.price||0,x=a.price||0;m>0&&(x===0||m<x)&&e.set(o,i)}}),Array.from(e.values())}generateProductId(t){return"product-"+t.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")+"-"+Date.now()}static \u0275fac=function(e){return new(e||r)(I(Ne),I(Be),I(ne),I(Je),I(Ke),I(Xe),I(Ye))};static \u0275cmp=M({type:r,selectors:[["app-shopping-list-page"]],viewQuery:function(e,i){if(e&1&&Ce(U,5),e&2){let o;ve(o=Se())&&(i.listFormComponent=o.first)}},decls:9,vars:8,consts:[["loadingTemplate",""],[3,"formValuesChange","isEditMode","initialValues"],["class","preferred-store-indicator",4,"ngIf"],[3,"show","stores","preferredStore","isLoading","closeModal","storeSelected","clearStore",4,"ngIf"],[1,"page-container"],[1,"sidebar-container",3,"categorySelected","categories"],["class","shopping-list-container",4,"ngIf","ngIfElse"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"preferred-store-indicator"],[1,"preferred-store-badge"],[1,"clear-store-btn",3,"click"],[1,"store-info-text"],[3,"closeModal","storeSelected","clearStore","show","stores","preferredStore","isLoading"],[1,"shopping-list-container"],[1,"shopping-list-preview"],[3,"quantityChange","removeProduct","saveList","cancelEdit","changeStore","updateProductStore","selectedProducts","isEditMode","preferredStore","listFormValid"],[1,"products-section"],[3,"searchChange","toggleCategoryEvent","selectProductEvent","comparePricesEvent","categories","filteredProducts","selectedProducts","searchTerm","preferredStore"],[1,"modal-overlay",3,"click"],[3,"show","selectedProduct","storeComparisons","preferredStore","isLoading","closeModal","storeSelected",4,"ngIf"],[3,"closeModal","storeSelected","show","selectedProduct","storeComparisons","preferredStore","isLoading"],[1,"loading-container"],[1,"loading-spinner"],[2,"color","#0B3B5B"]],template:function(e,i){if(e&1){let o=C();n(0,"app-list-form",1),h("formValuesChange",function(m){return g(o),u(i.onFormValuesChange(m))}),s(),f(1,qt,12,2,"div",2)(2,Ut,1,4,"app-store-selection-modal",3),n(3,"div",4)(4,"app-sidebar",5),h("categorySelected",function(m){return g(o),u(i.filterByCategory(m))}),s(),f(5,At,5,9,"div",6)(6,Ht,2,1,"div",7)(7,Wt,4,0,"ng-template",null,0,N),s()}if(e&2){let o=F(8);p("isEditMode",i.isEditMode)("initialValues",i.initialFormValues),c(),p("ngIf",i.preferredStore),c(),p("ngIf",i.showStoreSelectionModal),c(2),p("categories",i.sidebarCategories),c(),p("ngIf",!i.isLoading)("ngIfElse",o),c(),p("ngIf",i.showComparisonModal)}},dependencies:[T,w,Y,X,D,V,Z,U,te,ie,oe,re],styles:[".page-container[_ngcontent-%COMP%]{display:flex;width:100%;min-height:100vh}.sidebar-container[_ngcontent-%COMP%]{flex:0 0 240px;position:relative;top:40px;height:80vh;overflow-y:auto}.shopping-list-container[_ngcontent-%COMP%]{flex:1;display:grid;grid-template-columns:1fr 360px;grid-template-rows:auto 1fr;gap:20px;padding:20px 0 20px 20px;height:100%;max-width:1200px;margin:0 auto}.shopping-list-preview[_ngcontent-%COMP%]{grid-column:2;grid-row:2;background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;align-items:center;text-align:center;height:570px;scroll-behavior:smooth;scrollbar-color:#FCACC4 white}.products-section[_ngcontent-%COMP%]{grid-column:1;grid-row:2;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;overflow:hidden;height:100%}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;width:100%}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #FCACC4;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.store-selection-modal[_ngcontent-%COMP%]{width:100%;max-width:450px;scroll-behavior:smooth;scrollbar-color:#0B3B5B white}.preferred-store-indicator[_ngcontent-%COMP%]{margin:10px 0;padding:10px;background-color:#0b3b5b;border-radius:4px;border-left:4px solid #FCACC4}.preferred-store-badge[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:16px;color:#fcacc4}.preferred-store-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;color:#fcacc4}.preferred-store-badge[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin:0 4px}.store-info-text[_ngcontent-%COMP%]{margin:5px 0 0 32px;font-size:14px;color:#fff}.clear-store-btn[_ngcontent-%COMP%]{margin-left:10px;padding:4px 8px;background-color:#fcacc4e6;border:1px solid #FCACC4;color:#fff;border-radius:4px;cursor:pointer;font-size:12px}.clear-store-btn[_ngcontent-%COMP%]:hover{background-color:#fcacc4}"]})};export{Ze as ShoppingListPageComponent};
