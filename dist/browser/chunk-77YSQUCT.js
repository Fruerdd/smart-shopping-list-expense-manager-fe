import{l as T}from"./chunk-NCA32NOU.js";import{a as W}from"./chunk-MDHOMDS3.js";import{a as A,b as O,d as D,g as N,o as I,p as V,q as k,v as F}from"./chunk-LNNPOXGM.js";import{Ab as C,Bb as S,Ec as x,Kb as l,Lb as M,Mb as b,Qb as u,Rb as g,Sb as f,Ta as m,Za as h,ba as c,ca as d,db as E,hb as _,ob as p,tb as i,ub as n,uc as w,zb as v}from"./chunk-PWFS57B3.js";import{a as y,b as U}from"./chunk-EQDQRRRY.js";function R(a,t){if(a&1&&(i(0,"option",10),l(1),n()),a&2){let e=t.$implicit;p("value",e),m(),b(" ",e," ")}}function P(a,t){if(a&1){let e=v();i(0,"tr")(1,"td"),l(2),n(),i(3,"td")(4,"select",6),f("ngModelChange",function(r){let s=c(e).$implicit;return g(s.userType,r)||(s.userType=r),d(r)}),_(5,R,2,2,"option",7),n()(),i(6,"td")(7,"input",8),f("ngModelChange",function(r){let s=c(e).$implicit;return g(s.isActive,r)||(s.isActive=r),d(r)}),n()(),i(8,"td")(9,"button",9),C("click",function(){let r=c(e).$implicit,s=S();return d(s.deleteUser(r))}),l(10," Delete "),n()()()}if(a&2){let e=t.$implicit,o=S();m(2),M(e.name),m(2),u("ngModel",e.userType),m(),p("ngForOf",o.userTypes),m(2),u("ngModel",e.isActive)}}var L=class a{constructor(t){this.usersSvc=t}users=[];filter="";userTypes=["USER","ADMIN"];ngOnInit(){this.usersSvc.getUsers().subscribe(t=>{this.users=t.map(e=>U(y({},e),{userType:e.userType??"USER"}))})}get filteredUsers(){let t=this.filter.trim().toLowerCase();return t?this.users.filter(e=>e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)):this.users}deleteUser(t){t.isActive=!1}saveAll(){this.usersSvc.bulkUpdateUsers(this.users).subscribe({next:()=>alert("Users updated successfully"),error:t=>alert(`Save failed: ${t.message||t.status}`)})}static \u0275fac=function(e){return new(e||a)(h(W))};static \u0275cmp=E({type:a,selectors:[["app-edit-users"]],decls:20,vars:2,consts:[[1,"edit-users-wrapper"],["type","text","placeholder","Search by name or email\u2026",1,"form-control","mb-3",3,"ngModelChange","ngModel"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"text-end"],[1,"btn","btn-primary",3,"click"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-danger",3,"click"],[3,"value"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"h2"),l(2,"Edit Users"),n(),i(3,"input",1),f("ngModelChange",function(s){return g(o.filter,s)||(o.filter=s),s}),n(),i(4,"table",2)(5,"thead")(6,"tr")(7,"th"),l(8,"Name"),n(),i(9,"th"),l(10,"Role"),n(),i(11,"th"),l(12,"Active"),n(),i(13,"th"),l(14,"Actions"),n()()(),i(15,"tbody"),_(16,P,11,4,"tr",3),n()(),i(17,"div",4)(18,"button",5),C("click",function(){return o.saveAll()}),l(19," Save Changes "),n()()()),e&2&&(m(3),u("ngModel",o.filter),m(13),p("ngForOf",o.filteredUsers))},dependencies:[x,w,F,V,k,O,A,I,D,N,T],encapsulation:2})};export{L as EditUsersComponent};
