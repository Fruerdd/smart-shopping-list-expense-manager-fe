<!-- src/app/features/home/home.component.html -->

<section class="hero d-flex align-items-center justify-content-center text-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6 text-center d-flex flex-column justify-content-center">
        <h1 class="hero-title">Plan,<br />Track <br /> &amp; Save</h1>
        <p class="hero-subtitle mt-3">
          Shop smarter, track <br /> your spending, find the <br /> best prices — all in one app.
        </p>
      </div>
      <div class="col-md-6 text-center mt-4 mt-md-0">
        <img src="home1.png" alt="Shopping" class="img-fluid hero-image" />
      </div>
    </div>
  </div>
</section>

<section class="did-you-know text-center py-5">
  <div class="container">
    <div class="info-box mx-auto p-4">
      <h2 class="section-title">Did you know?</h2>
      <p class="section-text mt-3">
        Using a smart shopping list helps reduce impulse purchases and unnecessary spending.
        With real-time price comparisons and budget tracking, users can make informed decisions,
        saving both time and money.
      </p>
    </div>
    <button
  class="btn btn-primary mt-4"
  (click)="onStartShopping()"
>
  Start Shopping!
</button>
  </div>
</section>

<section class="testimonials-section text-center py-5" style="background-color: #FCACC4;">
  <div class="container py-5">
    <!-- Heading -->
    <div class="row justify-content-center mb-5">
      <div class="col-md-10 col-xl-8 text-center">
        <!-- Heart Icon -->
        <i class="fas fa-heart fa-2x mb-3"></i>
        <!-- New Title -->
        <h3 class="fw-bold mb-2">What our users have to say</h3>
      </div>
    </div>

    <div class="position-relative">
      <!-- Prev -->
      <button class="btn btn-link position-absolute top-50 start-0 translate-middle-y" (click)="prev()">
        <i class="fas fa-chevron-left fa-2x"></i>
      </button>

      <!-- Cards -->
      <div class="row text-center mx-auto" style="max-width: 900px;">
        <ng-container *ngFor="let t of visibleTestimonials; let i = index">
          <div class="col-12 col-md-4">
            <div class="card testimonial-card mb-4 d-flex flex-column">
              <div class="card-body d-flex flex-column">
                <!-- Avatar -->
                <div class="d-flex justify-content-center mb-3">
                  <img
                    [src]="t.avatar"
                    (error)="setDefaultAvatar($event)"
                    class="rounded-circle shadow-1-strong"
                    width="100"
                    height="100"
                    style="background-color: #FEBFB3;"
                    [alt]="t.name"
                  />
                </div>
                <!-- Name -->
                <h5 class="font-weight-bold text-center mb-1">{{ t.name }}</h5>
                <!-- Stars -->
                <ul class="rating-stars list-unstyled d-flex justify-content-center mb-3">
                  <li *ngFor="let _ of [0,1,2,3,4]; let idx = index">
                    <i [ngClass]="starClass(idx, t.score)"></i>
                  </li>
                </ul>
                <!-- Review Wrapper -->
                <div class="review-wrapper flex-grow-1">
                  <p class="testimonial-text mb-0">
                    <i class="fas fa-quote-left pe-2"></i>
                    <ng-container *ngIf="t.context.length <= 30; else truncated">
                      {{ t.context }}
                    </ng-container>
                    <ng-template #truncated>
                      {{ t.context | slice: 0: 30 }}
                      <span
                        class="ellipsis"
                        (mouseenter)="hoverMap[i] = true"
                        (mouseleave)="hoverMap[i] = false"
                        >…</span
                      >
                    </ng-template>
                  </p>
                  <div class="full-text-container" *ngIf="hoverMap[i]">
                    {{ t.context }}
                  </div>
                </div>
                <!-- /Review Wrapper -->
              </div>
            </div>
          </div>
        </ng-container>
      </div>

      <!-- Next -->
      <button class="btn btn-link position-absolute top-50 end-0 translate-middle-y" (click)="next()">
        <i class="fas fa-chevron-right fa-2x"></i>
      </button>
    </div>
  </div>
</section>

<section id="how-it-works" class="how-it-works py-5">
  <div class="container">
    <h2 class="section-title text-center mb-4">How it Works?</h2>
    <div class="row align-items-center">
      <div class="col-md-6 text-md-start text-center">
        <ul class="hiw-list list-unstyled mx-auto">
          <li>Create an Account</li>
          <li>Build Your Shopping List</li>
          <li>Compare &amp; Save</li>
          <li>Track Expenses</li>
          <li>Earn Rewards</li>
        </ul>
      </div>
      <div class="col-md-6 text-center mt-4 mt-md-0">
        <img src="home2.png" alt="How It Works" class="img-fluid hiw-image" />
      </div>
    </div>
  </div>
</section>
